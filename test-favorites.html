<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار المفضلة</title>
    <style>
        body { font-family: 'Arial', sans-serif; padding: 20px; }
        .test-box { border: 1px solid #ccc; padding: 15px; margin: 10px 0; }
        .btn { background: #007bff; color: white; padding: 8px 15px; border: none; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>اختبار المفضلة</h1>
    
    <div class="test-box">
        <h2>إضافة بيانات تجريبية للمفضلة</h2>
        <button class="btn" onclick="addTestData()">إضافة بيانات تجريبية</button>
        <button class="btn" onclick="clearFavorites()">مسح المفضلة</button>
        <button class="btn" onclick="showFavorites()">عرض المفضلة</button>
    </div>
    
    <div class="test-box">
        <h2>المفضلة الحالية</h2>
        <div id="favorites-display"></div>
    </div>
    
    <div class="test-box">
        <h2>اختبار التصنيفات</h2>
        <a href="favorites.html" target="_blank">فتح صفحة المفضلة</a>
    </div>

    <script>
        function addTestData() {
            const testProducts = [
                {
                    id: 'test-1',
                    title: 'كوشة زفاف فاخرة',
                    price: 500,
                    imageUrl: '../assets/images/cake.jpg',
                    category: 'koshat',
                    subcategories: ['koshat-wedding', 'koshat-luxury'],
                    governorate: 'القاهرة',
                    cities: 'مدينة نصر'
                },
                {
                    id: 'test-2',
                    title: 'مرآة عيد ميلاد',
                    price: 200,
                    imageUrl: '../assets/images/decorations.jpg',
                    category: 'mirr',
                    subcategories: ['mirr-birthday', 'mirr-decorative'],
                    governorate: 'الجيزة',
                    cities: 'المهندسين'
                },
                {
                    id: 'test-3',
                    title: 'تورتة شوكولاتة',
                    price: 150,
                    imageUrl: '../assets/images/f.jpg',
                    category: 'cake',
                    subcategories: ['cake-chocolate', 'cake-birthday'],
                    governorate: 'الإسكندرية',
                    cities: 'سيدي جابر'
                }
            ];
            
            localStorage.setItem('favorites', JSON.stringify(testProducts));
            alert('تم إضافة البيانات التجريبية!');
            showFavorites();
        }
        
        function clearFavorites() {
            localStorage.removeItem('favorites');
            alert('تم مسح المفضلة!');
            showFavorites();
        }
        
        function showFavorites() {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const display = document.getElementById('favorites-display');
            
            if (favorites.length === 0) {
                display.innerHTML = '<p>لا توجد منتجات في المفضلة</p>';
                return;
            }
            
            display.innerHTML = '<h3>عدد المنتجات: ' + favorites.length + '</h3>' +
                favorites.map(product => `
                    <div style="border: 1px solid #ddd; padding: 10px; margin: 5px 0;">
                        <strong>${product.title}</strong><br>
                        التصنيف الرئيسي: ${product.category || 'غير محدد'}<br>
                        التصنيفات الفرعية: ${Array.isArray(product.subcategories) ? product.subcategories.join(', ') : product.subcategories || 'غير محدد'}<br>
                        السعر: ${product.price} ج.م<br>
                        المحافظة: ${product.governorate || 'غير محدد'}
                    </div>
                `).join('');
        }
        
        // عرض المفضلة عند تحميل الصفحة
        showFavorites();
    </script>
</body>
</html>
