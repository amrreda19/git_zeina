<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø³ÙŠØ· - Supabase</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-config.js?v=2025-08-22-1"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            direction: rtl;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            width: 100%;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }
        .test-button.success {
            background: #10b981;
        }
        .test-button.success:hover {
            background: #059669;
        }
        .test-button.danger {
            background: #ef4444;
        }
        .test-button.danger:hover {
            background: #dc2626;
        }
        .test-button.warning {
            background: #f59e0b;
        }
        .test-button.warning:hover {
            background: #d97706;
        }
        .log-area {
            background: #1f2937;
            color: #f9fafb;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log-entry {
            margin-bottom: 8px;
            padding: 8px;
            border-radius: 6px;
        }
        .log-success {
            background: rgba(16, 185, 129, 0.2);
            border-left: 4px solid #10b981;
        }
        .log-error {
            background: rgba(239, 68, 68, 0.2);
            border-left: 4px solid #ef4444;
        }
        .log-info {
            background: rgba(59, 130, 246, 0.2);
            border-left: 4px solid #3b82f6;
        }
        .log-warning {
            background: rgba(245, 158, 11, 0.2);
            border-left: 4px solid #f59e0b;
        }
        .status-bar {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .status-indicator {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-left: 10px;
        }
        .status-connected {
            background: #10b981;
        }
        .status-disconnected {
            background: #ef4444;
        }
        .status-loading {
            background: #f59e0b;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .clear-btn {
            background: #6b7280;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            width: 100%;
        }
        .clear-btn:hover {
            background: #4b5563;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø³ÙŠØ· - Supabase</h1>
        
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div class="status-bar">
            <strong>Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</strong>
            <span id="connection-status" class="status-indicator status-loading"></span>
            <span id="status-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>
        </div>
        
        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
        <button class="test-button" onclick="testConnection()">
            ğŸ”Œ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
        </button>
        
        <button class="test-button" onclick="checkAllTables()">
            ğŸ“Š ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
        </button>
        
        <button class="test-button success" onclick="testProductRequests()">
            ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        </button>
        
        <button class="test-button warning" onclick="testUpdateRandom()">
            ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ø¯ÙŠØ« Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        </button>
        
        <button class="test-button" onclick="testInsertRandom()">
            â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±
        </button>
        
        <button class="test-button danger" onclick="testDeleteRandom()">
            ğŸ—‘ï¸ Ø­Ø°Ù Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±
        </button>
        
        <button class="test-button" onclick="testComplexQueries()">
            ğŸ” Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…Ø¹Ù‚Ø¯Ø©
        </button>
        
        <!-- Ø²Ø± Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ -->
        <button class="clear-btn" onclick="clearLog()">
            ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„
        </button>
        
        <!-- Ø³Ø¬Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
        <div class="log-area">
            <div class="log-entry log-info">ğŸš€ ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø§Ù‡Ø²Ø©. Ø§Ø¶ØºØ· "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„" Ù„Ù„Ø¨Ø¯Ø¡.</div>
        </div>
    </div>

    <script>
        let supabaseClient = null;
        let testProductId = null;

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        window.onload = async function() {
            log('ğŸ“± ØªÙ‡ÙŠØ¦Ø© ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±...', 'info');
            
            // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Supabase
            let attempts = 0;
            const maxAttempts = 50;
            
            while (!window.supabaseClient && attempts < maxAttempts) {
                await new Promise(resolve => setTimeout(resolve, 100));
                attempts++;
            }
            
            if (window.supabaseClient) {
                supabaseClient = window.supabaseClient;
                log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Supabase client', 'success');
                updateConnectionStatus('connected');
            } else {
                log('âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Supabase client', 'error');
                updateConnectionStatus('disconnected');
            }
        };

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
        function updateConnectionStatus(status) {
            const indicator = document.getElementById('connection-status');
            const statusText = document.getElementById('status-text');
            
            indicator.className = `status-indicator status-${status}`;
            
            if (status === 'connected') {
                statusText.textContent = 'Ù…ØªØµÙ„';
                statusText.style.color = '#10b981';
            } else if (status === 'disconnected') {
                statusText.textContent = 'ØºÙŠØ± Ù…ØªØµÙ„';
                statusText.style.color = '#ef4444';
            } else {
                statusText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...';
                statusText.style.color = '#f59e0b';
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø³Ø¬Ù„
        function log(message, type = 'info') {
            const logArea = document.querySelector('.log-area');
            const timestamp = new Date().toLocaleTimeString('ar-EG');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            logArea.appendChild(logEntry);
            logArea.scrollTop = logArea.scrollHeight;
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
        async function testConnection() {
            log('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Supabase...', 'info');
            updateConnectionStatus('loading');
            
            try {
                if (!supabaseClient) {
                    throw new Error('Supabase client ØºÙŠØ± Ù…ØªØ§Ø­');
                }
                
                log('ğŸ“¡ Supabase client Ù…ØªØ§Ø­', 'success');
                
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¨Ø³ÙŠØ·
                const { data, error } = await supabaseClient
                    .from('product_requests')
                    .select('count')
                    .limit(1);
                
                if (error) {
                    throw error;
                }
                
                log('âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ù†Ø§Ø¬Ø­! ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
                updateConnectionStatus('connected');
                
            } catch (error) {
                log(`âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`, 'error');
                updateConnectionStatus('disconnected');
            }
        }

        // ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
        async function checkAllTables() {
            log('ğŸ” ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„...', 'info');
            
            const tables = [
                'product_requests', 
                'products_koshat', 
                'products_cake', 
                'products_mirr', 
                'products_other', 
                'products_invitations'
            ];
            
            for (const table of tables) {
                try {
                    const { data, error } = await supabaseClient
                        .from(table)
                        .select('count')
                        .limit(1);
                    
                    if (error) {
                        log(`âŒ Ø¬Ø¯ÙˆÙ„ ${table}: ${error.message}`, 'error');
                    } else {
                        log(`âœ… Ø¬Ø¯ÙˆÙ„ ${table}: Ù…ØªØ§Ø­`, 'success');
                    }
                } catch (tableError) {
                    log(`âŒ Ø¬Ø¯ÙˆÙ„ ${table}: ${tableError.message}`, 'error');
                }
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        async function testProductRequests() {
            log('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...', 'info');
            
            try {
                // Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                const { count, error: countError } = await supabaseClient
                    .from('product_requests')
                    .select('*', { count: 'exact', head: true });
                
                if (countError) {
                    throw countError;
                }
                
                log(`ğŸ“Š Ø¹Ø¯Ø¯ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${count}`, 'success');
                
                // Ø¬Ù„Ø¨ Ø¢Ø®Ø± 3 Ø·Ù„Ø¨Ø§Øª
                const { data: recentRequests, error: recentError } = await supabaseClient
                    .from('product_requests')
                    .select('id, description, created_at')
                    .order('created_at', { ascending: false })
                    .limit(3);
                
                if (recentError) {
                    throw recentError;
                }
                
                log('ğŸ“‹ Ø¢Ø®Ø± 3 Ø·Ù„Ø¨Ø§Øª:', 'info');
                recentRequests.forEach((request, index) => {
                    log(`   ${index + 1}. ID: ${request.id}, Ø§Ù„ÙˆØµÙ: ${request.description}`, 'info');
                });
                
                // Ø­ÙØ¸ Ù…Ø¹Ø±Ù Ø£ÙˆÙ„ Ø·Ù„Ø¨ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
                if (recentRequests.length > 0) {
                    testProductId = recentRequests[0].id;
                    log(`ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${testProductId}`, 'success');
                }
                
            } catch (error) {
                log(`âŒ ÙØ´Ù„ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${error.message}`, 'error');
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ø¯ÙŠØ« Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        async function testUpdateRandom() {
            if (!testProductId) {
                log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø±Ù Ù…Ù†ØªØ¬ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±. Ø§Ø¶ØºØ· "Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙˆÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª" Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            log(`ğŸ” Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ ${testProductId}...`, 'info');
            
            try {
                // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                const { data: currentData, error: fetchError } = await supabaseClient
                    .from('product_requests')
                    .select('*')
                    .eq('id', testProductId)
                    .single();
                
                if (fetchError) {
                    throw new Error(`ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${fetchError.message}`);
                }
                
                log('âœ… ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©', 'success');
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØµÙ
                const newDescription = `ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ ÙÙŠ ${new Date().toLocaleString('ar-EG')}`;
                const updateData = {
                    description: newDescription,
                    updated_at: new Date().toISOString()
                };
                
                log(`ğŸ“ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØµÙ Ø¥Ù„Ù‰: ${newDescription}`, 'info');
                
                // ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ­Ø¯ÙŠØ«
                const { data: updateResult, error: updateError } = await supabaseClient
                    .from('product_requests')
                    .update(updateData)
                    .eq('id', testProductId)
                    .select();
                
                if (updateError) {
                    throw new Error(`ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${updateError.message}`);
                }
                
                log('âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«
                const { data: verifyData, error: verifyError } = await supabaseClient
                    .from('product_requests')
                    .select('*')
                    .eq('id', testProductId)
                    .single();
                
                if (verifyError) {
                    log(`âš ï¸ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚: ${verifyError.message}`, 'warning');
                } else {
                    log('âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'success');
                    log(`ğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${JSON.stringify(verifyData, null, 2)}`, 'info');
                }
                
            } catch (error) {
                log(`âŒ ÙØ´Ù„ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${error.message}`, 'error');
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±
        async function testInsertRandom() {
            log('ğŸ” Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±...', 'info');
            
            try {
                const testData = {
                    description: `Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø± - ${new Date().toLocaleString('ar-EG')}`,
                    price: Math.floor(Math.random() * 1000) + 100,
                    category: 'test',
                    governorate: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',
                    created_at: new Date().toISOString()
                };
                
                log(`ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯: ${JSON.stringify(testData, null, 2)}`, 'info');
                
                const { data, error } = await supabaseClient
                    .from('product_requests')
                    .insert(testData)
                    .select();
                
                if (error) {
                    throw error;
                }
                
                log('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                log(`ğŸ“Š Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø¶Ø§Ù: ${JSON.stringify(data[0], null, 2)}`, 'info');
                
                // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
                testProductId = data[0].id;
                log(`ğŸ’¾ ØªÙ… ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${testProductId}`, 'success');
                
            } catch (error) {
                log(`âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬: ${error.message}`, 'error');
            }
        }

        // Ø­Ø°Ù Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±
        async function testDeleteRandom() {
            if (!testProductId) {
                log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø±Ù Ù…Ù†ØªØ¬ Ù„Ù„Ø­Ø°Ù. Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±" Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ ${testProductId}ØŸ`)) {
                return;
            }
            
            log(`ğŸ” Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ ${testProductId}...`, 'info');
            
            try {
                const { data, error } = await supabaseClient
                    .from('product_requests')
                    .delete()
                    .eq('id', testProductId)
                    .select();
                
                if (error) {
                    throw error;
                }
                
                log('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                log(`ğŸ“Š Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø­Ø°ÙˆÙ: ${JSON.stringify(data[0], null, 2)}`, 'info');
                
                // Ù…Ø³Ø­ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬
                testProductId = null;
                log('ğŸ’¾ ØªÙ… Ù…Ø³Ø­ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬', 'info');
                
            } catch (error) {
                log(`âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: ${error.message}`, 'error');
            }
        }

        // Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…Ø¹Ù‚Ø¯Ø©
        async function testComplexQueries() {
            log('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…Ø¹Ù‚Ø¯Ø©...', 'info');
            
            try {
                // Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ ÙƒÙ„ Ø¬Ø¯ÙˆÙ„
                const tables = ['product_requests', 'products_koshat', 'products_cake'];
                
                for (const table of tables) {
                    try {
                        const { count, error } = await supabaseClient
                            .from(table)
                            .select('*', { count: 'exact', head: true });
                        
                        if (error) {
                            log(`âŒ ÙØ´Ù„ ÙÙŠ Ø¹Ø¯ ${table}: ${error.message}`, 'error');
                        } else {
                            log(`ğŸ“Š Ø¬Ø¯ÙˆÙ„ ${table}: ${count} Ù…Ù†ØªØ¬`, 'success');
                        }
                    } catch (tableError) {
                        log(`âŒ Ø®Ø·Ø£ ÙÙŠ ${table}: ${tableError.message}`, 'error');
                    }
                }
                
                // Ø¬Ù„Ø¨ Ø£Ø­Ø¯Ø« 5 Ø·Ù„Ø¨Ø§Øª
                const { data: recentRequests, error: recentError } = await supabaseClient
                    .from('product_requests')
                    .select('id, description, created_at, price')
                    .order('created_at', { ascending: false })
                    .limit(5);
                
                if (recentError) {
                    throw recentError;
                }
                
                log('ğŸ“‹ Ø£Ø­Ø¯Ø« 5 Ø·Ù„Ø¨Ø§Øª:', 'info');
                recentRequests.forEach((request, index) => {
                    const price = request.price ? `${request.price} Ø¬Ù†ÙŠÙ‡` : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
                    log(`   ${index + 1}. ID: ${request.id}, Ø§Ù„Ø³Ø¹Ø±: ${price}, Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(request.created_at).toLocaleDateString('ar-EG')}`, 'info');
                });
                
            } catch (error) {
                log(`âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©: ${error.message}`, 'error');
            }
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„
        function clearLog() {
            const logArea = document.querySelector('.log-area');
            logArea.innerHTML = '<div class="log-entry log-info">ğŸ§¹ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</div>';
        }
    </script>
</body>
</html>

