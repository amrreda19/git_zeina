<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1994970196400389"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ - Ø²ÙÙŠÙ†ÙØ©</title>
    <meta name="description" content="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ - Ø¹Ø±Ø¶ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø§ØªØµØ§Ù„">
    <meta name="title" content="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ - Ø²ÙÙŠÙ†ÙØ©">
    <link rel="canonical" href="https://zeinaevents.com/pages/product-details.html">
    <link rel="icon" type="image/png" href="../assets/images/zeina.jpeg">
    
    <!-- Schema.org markup for Google -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Product",
      "name": "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬",
      "description": "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ - Ø¹Ø±Ø¶ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø§ØªØµØ§Ù„",
      "url": "https://zeinaevents.com/pages/product-details.html",
      "image": "../assets/images/zeina.jpeg",
      "offers": {
        "@type": "Offer",
        "availability": "https://schema.org/InStock"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Zeina Events",
        "url": "https://zeinaevents.com"
      }
    }
    </script>
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" as="script">
    <link rel="preload" href="../js/supabase-config.js?v=2025-08-22-1" as="script">
    <link rel="preload" href="../js/product-service.js?v=2025-08-22-1" as="script">
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-config.js?v=2025-08-22-1"></script>
    <script src="../js/product-service.js?v=2025-08-22-1"></script>
    <script src="../js/auth-service.js?v=2025-08-22-1"></script>
    <script src="../js/common-utils.js?v=2025-08-22-1"></script>
    <script src="../js/governorate-filter.js?v=2025-08-22-1"></script>
    <script src="../js/enhanced-auto-slideshow.js?v=2025-08-22-1" defer></script>
    <script src="../js/advertising-service.js?v=2025-08-22-1"></script>

    <style>
        :root {
            --primary-pink: #f8d7e4;
            --primary-green: #d8e9d6;
            --primary-beige: #f5f0e6;
            --gold: #d4af37;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f9f9f9;
        }
        
        .gold-border {
            border: 1px solid var(--gold);
        }
        
        .gold-text {
            color: var(--gold);
        }
        
        .product-image {
            transition: transform 0.3s ease;
        }
        
        .product-image:hover {
            transform: scale(1.05);
        }
        
        .product-image {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        
        .image-gallery img {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        
        .contact-btn {
            transition: all 0.3s ease;
        }
        
        .contact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .whatsapp-btn {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
        }
        
        .facebook-btn {
            background: linear-gradient(135deg, #1877F2 0%, #0D6EFD 100%);
        }
        
        .instagram-btn {
            background: linear-gradient(135deg, #E4405F 0%, #C13584 100%);
        }
        
        /* Favorite Button Styles */
        .favorite-btn {
            transition: all 0.3s ease;
        }
        
        .favorite-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        /* Recommended Products Styles */
        #recommended-products-grid {
            scrollbar-width: thin;
            scrollbar-color: #d4af37 #f3f4f6;
        }
        
        #recommended-products-grid::-webkit-scrollbar {
            height: 8px;
        }
        
        #recommended-products-grid::-webkit-scrollbar-track {
            background: #f3f4f6;
        }
        
        #recommended-products-grid::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 4px;
        }
        
        #recommended-products-grid::-webkit-scrollbar-thumb:hover {
            background: #b8941f;
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .favorite-btn.active svg {
            color: #ec4899;
            fill: currentColor;
        }
        
        .favorite-btn.active {
            background-color: #fdf2f8;
            border-color: #ec4899;
        }
        
        .image-gallery {
            scrollbar-width: thin;
            scrollbar-color: var(--gold) #f1f1f1;
        }
        
        .image-gallery::-webkit-scrollbar {
            height: 6px;
        }
        
        .image-gallery::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .image-gallery::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 3px;
        }
        
        .image-gallery::-webkit-scrollbar-thumb:hover {
            background: #b8941f;
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .modal-message {
            color: #6b7280;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }
        
        .modal-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }
        
        .btn-modal-primary {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
        }
        
        .btn-modal-secondary {
            background: transparent;
            color: #6b7280;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            border: 2px solid #d1d5db;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-secondary:hover {
            border-color: #9ca3af;
            color: #374151;
        }
    </style>
</head>
<body class="text-gray-700">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white shadow-sm gold-border">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <!-- Logo -->
            <div class="w-16">
                <a href="../index.html" class="text-xl font-bold gold-text">Ø²ÙÙŠÙ†ÙØ©</a>
            </div>
            
            <!-- Navigation -->
            <nav class="flex items-center space-x-4 space-x-reverse">
                <a href="../index.html" class="text-gray-600 hover:text-yellow-600">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="favorites.html" class="text-gray-600 hover:text-yellow-600 flex items-center relative">
                    <svg class="w-5 h-5 ml-2 text-pink-500" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    Ø§Ù„Ù…ÙØ¶Ù„Ø©
                    <span id="favorites-count" class="absolute -top-2 -right-2 bg-yellow-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Loading State -->
    <div id="loading-state" class="container mx-auto px-4 py-12 text-center">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto mb-4"></div>
        <p class="text-gray-600">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬...</p>
    </div>

    <!-- Product Not Found -->
    <div id="not-found-state" class="container mx-auto px-4 py-12 text-center hidden">
        <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33" />
            </svg>
        </div>
        <h3 class="text-xl font-bold mb-2">Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</h3>
        <p class="text-gray-600 mb-6">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø°ÙŠ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡ ØºÙŠØ± Ù…ØªØ§Ø­</p>
        <a href="../index.html" class="inline-block bg-yellow-600 text-white px-6 py-3 rounded-lg hover:bg-yellow-700 transition-colors">
            Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </a>
    </div>

    <!-- Product Details -->
    <main id="product-details" class="container mx-auto px-4 py-8 hidden">
        <!-- Breadcrumb -->
        <nav class="mb-6">
            <ol class="flex items-center space-x-2 space-x-reverse text-sm text-gray-600">
                <li><a href="../index.html" class="hover:text-yellow-600">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><span class="mx-2">/</span></li>
                <li><a href="#" id="product-category-breadcrumb" class="hover:text-yellow-600"></a></li>
                <li><span class="mx-2">/</span></li>
                <li class="text-gray-900 font-medium" id="product-title-breadcrumb"></li>
            </ol>
        </nav>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Product Images -->
            <div class="space-y-4">
                <!-- Main Image -->
                <div class="relative">
                    <img id="main-image" src="" alt="" class="w-full h-96 lg:h-[600px] object-cover rounded-lg shadow-lg product-image">
                    <div class="absolute top-4 left-4 bg-green-500 text-white text-xs px-3 py-1 rounded-full">Ù…ØªØ§Ø­</div>
                </div>
                
                <!-- Image Gallery -->
                <div id="image-gallery" class="flex space-x-2 space-x-reverse overflow-x-auto image-gallery pb-2">
                    <!-- Thumbnail images will be loaded here -->
                </div>
            </div>

            <!-- Product Info -->
            <div class="space-y-6">
                <!-- Title and Favorite Button -->
                <div class="flex items-center justify-between">
                    <h1 id="product-title" class="text-3xl font-bold text-gray-900 mb-2"></h1>
                    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© -->
                    <button id="favorite-btn" class="favorite-btn bg-white rounded-full p-3 shadow-lg hover:bg-pink-50 transition-all duration-200 border border-gray-200" onclick="toggleFavorite()">
                        <svg id="favorite-icon" class="w-6 h-6 text-gray-400" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                    </button>
                </div>

                <!-- Price -->
                <div class="flex items-center space-x-4 space-x-reverse">
                    <span id="product-price" class="text-3xl font-bold gold-text"></span>
                </div>

                <!-- Description -->
                <div id="description-section" class="hidden">
                    <h3 class="text-lg font-semibold mb-3">ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</h3>
                    <p id="product-description" class="text-gray-700 leading-relaxed"></p>
                </div>

                <!-- Contact Information -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¨Ø§Ø¦Ø¹</h3>
                    <p class="text-gray-600 mb-4">Ø¬Ù…ÙŠØ¹ ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„ØªØ§Ù„ÙŠØ© ØªØ®Øµ Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬.</p>
                    <div class="space-y-3">
                        <!-- WhatsApp -->
                        <div id="whatsapp-section" class="hidden">
                            <a id="whatsapp-btn" href="#" 
                               class="contact-btn whatsapp-btn text-white w-full py-4 px-6 rounded-lg flex items-center justify-center font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                                </svg>
                                <div class="text-right">
                                    <div class="font-bold">Ø±Ø§Ø³Ù„ Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</div>
                                    <div class="text-sm opacity-90">Ø§Ø¶ØºØ· Ù„ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</div>
                                </div>
                            </a>
                        </div>

                        <!-- Facebook -->
                        <div id="facebook-section" class="hidden">
                            <a id="facebook-btn" href="#" target="_blank" 
                               class="contact-btn facebook-btn text-white w-full py-3 px-4 rounded-lg flex items-center justify-center font-medium">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                </svg>
                                ØµÙØ­Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ
                            </a>
                        </div>

                        <!-- Instagram -->
                        <div id="instagram-section" class="hidden">
                            <a id="instagram-btn" href="#" target="_blank" 
                               class="contact-btn instagram-btn text-white w-full py-3 px-4 rounded-lg flex items-center justify-center font-medium">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z"/>
                                </svg>
                                ØªØ§Ø¨Ø¹ Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø¹Ù„Ù‰ Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…
                            </a>
                        </div>

                        <!-- No Contact Info -->
                        <div id="no-contact-info" class="text-center py-4 text-gray-500">
                            <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ³Ø§Ø¦Ù„ ØªÙˆØ§ØµÙ„ Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬</p>
                        </div>
                    </div>
                </div>

                <!-- Product Details -->
                <div class="border-t border-gray-200 pt-6">
                    <h3 class="text-lg font-semibold mb-4">ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©:</span>
                            <span id="product-date" class="block font-medium"></span>
                        </div>
                        <div>
                            <span class="text-gray-600">Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>
                            <span id="product-subcategory-detail" class="block font-medium text-gray-500">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©:</span>
                            <div id="product-governorate" class="block font-medium"></div>
                        </div>
                        <div>
                            <span class="text-gray-600">Ø§Ù„Ù…Ù†Ø§Ø·Ù‚/Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…ØªÙˆÙØ±Ø©:</span>
                            <div id="product-cities" class="block font-medium"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

                 <!-- Legal Notice Section -->
         <section class="bg-yellow-50 border-l-4 border-yellow-400 py-6 mt-12">
             <div class="container mx-auto px-4">
                 <div class="flex items-start">
                     <div class="flex-shrink-0">
                         <svg class="h-6 w-6 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                         </svg>
                     </div>
                     <div class="mr-3">
                         <h3 class="text-lg font-semibold text-yellow-800 mb-2">ØªÙ†ÙˆÙŠÙ‡ Ù…Ù‡Ù…</h3>
                         <p class="text-yellow-700 text-sm leading-relaxed">
                             Ù†Ø­Ù† Ù…Ù†ØµØ© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙ‚Ø·ØŒ ÙˆÙ„Ø³Ù†Ø§ Ø·Ø±ÙÙ‹Ø§ ÙÙŠ Ø§Ù„Ø¨ÙŠØ¹ Ø£Ùˆ Ø§Ù„ØªÙˆØµÙŠÙ„. Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ø§Ù…Ù„Ø§Øª ØªØªÙ… Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠ Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±.
                         </p>
                     </div>
                 </div>
             </div>
         </section>

         <!-- Recommended Products Section -->
         <section class="bg-gray-50 py-12 mt-12">
             <div class="container mx-auto px-4">
                 <div class="text-center mb-8">
                     <h2 class="text-3xl font-bold mb-4 gold-text">Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø¯ ØªØ¹Ø¬Ø¨Ùƒ</h2>
                     <p class="text-gray-600 max-w-2xl mx-auto">
                         Ø§ÙƒØªØ´Ù Ù…Ù†ØªØ¬Ø§Øª Ù…Ù…ÙŠØ²Ø© ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡Ø§ Ø®ØµÙŠØµØ§Ù‹ Ù„Ùƒ
                     </p>
                 </div>
                
                <div id="recommended-products-grid" class="flex flex-nowrap overflow-x-auto gap-4 md:gap-6 pb-4">
                    <!-- Recommended products will be loaded dynamically -->
                </div>
                
                <!-- Loading state for recommended products -->
                <div id="recommended-loading" class="text-center py-8">
                    <div class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-gray-600">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span class="text-gray-600">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§...</span>
                    </div>
                </div>
                
                <!-- No recommended products message -->
                <div id="no-recommended-message" class="text-center py-12 hidden">
                    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-bold text-gray-700 mb-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                    <p class="text-gray-500">Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                </div>
            </div>
        </section>
    </main>

    <script>
        let currentProduct = null;

        // Get product ID from URL
        function getProductIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id');
        }
        
        // Ø¯Ø§Ù„Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function toggleFavorite() {
            if (!currentProduct) return;
            
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const existingIndex = favorites.findIndex(item => item.id === currentProduct.id);
            
            if (existingIndex > -1) {
                // Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©
                favorites.splice(existingIndex, 1);
                showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'info');
                updateFavoriteButton(false);
            } else {
                // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©
                const productData = {
                    id: currentProduct.id,
                    title: currentProduct.title || getCategoryName(currentProduct.category),
                    imageUrl: currentProduct.image_urls && currentProduct.image_urls.length > 0 ? currentProduct.image_urls[0] : '',
                    price: currentProduct.price || 0,
                    governorate: currentProduct.governorate || '',
                    cities: currentProduct.cities || '',
                    subcategories: currentProduct.subcategory ? (Array.isArray(currentProduct.subcategory) ? currentProduct.subcategory : [currentProduct.subcategory]) : [],
                    category: currentProduct.category || 'other', // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
                    addedAt: new Date().toISOString()
                };
                favorites.push(productData);
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'success');
                updateFavoriteButton(true);
            }
            
                          // Ø­ÙØ¸ ÙÙŠ Local Storage
              localStorage.setItem('favorites', JSON.stringify(favorites));
              
              // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
              updateFavoritesCount();
              
              // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ù…Ø®ØµØµ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
              window.dispatchEvent(new CustomEvent('favoritesChanged', {
                  detail: { favorites: favorites }
              }));
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function updateFavoriteButton(isFavorite) {
            const favoriteBtn = document.getElementById('favorite-btn');
            const favoriteIcon = document.getElementById('favorite-icon');
            
            if (isFavorite) {
                favoriteBtn.classList.add('active');
                favoriteIcon.classList.remove('text-gray-400');
                favoriteIcon.classList.add('text-pink-500', 'fill-current');
            } else {
                favoriteBtn.classList.remove('active');
                favoriteIcon.classList.remove('text-pink-500', 'fill-current');
                favoriteIcon.classList.add('text-gray-400');
            }
        }
        
                 // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
         function checkFavoriteStatus() {
             if (!currentProduct) return;
             
             const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
             const isFavorite = favorites.some(item => item.id === currentProduct.id);
             updateFavoriteButton(isFavorite);
         }
         
         // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
         function updateFavoritesCount() {
             const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
             const countElement = document.getElementById('favorites-count');
             if (countElement) {
                 countElement.textContent = favorites.length;
                 
                 // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ø¯Ø¯ ØµÙØ±
                 if (favorites.length === 0) {
                     countElement.style.display = 'none';
                 } else {
                     countElement.style.display = 'flex';
                 }
             }
         }
        
        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©
        function getCategoryName(category) {
            const categories = {
                'koshat': 'ÙƒÙˆØ´Ø§Øª',
                'mirr': 'Ù…Ø±Ø§ÙŠØ§',
                'cake': 'ØªÙˆØ±ØªØ§Øª',
                'other': 'Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©',
                'invitations': 'Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª'
            };
            return categories[category] || category;
        }
        
        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type = 'info') {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            const notification = document.createElement('div');
            notification.className = `notification fixed top-4 left-4 z-50 px-4 py-2 rounded-lg shadow-lg text-white text-sm font-medium transform transition-all duration-300 translate-x-0`;
            
            // ØªØ­Ø¯ÙŠØ¯ Ù„ÙˆÙ† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            if (type === 'success') {
                notification.style.backgroundColor = '#10b981'; // Ø£Ø®Ø¶Ø±
            } else if (type === 'error') {
                notification.style.backgroundColor = '#ef4444'; // Ø£Ø­Ù…Ø±
            } else {
                notification.style.backgroundColor = '#3b82f6'; // Ø£Ø²Ø±Ù‚
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
            setTimeout(() => {
                notification.style.transform = 'translateX(-100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Optimized load product details
        async function loadProductDetails() {
            const productId = getProductIdFromUrl();
            
            if (!productId) {
                showNotFound();
                return;
            }

            try {
                // Quick validation
                if (!window.ProductService?.getProductById) {
                    console.error('âŒ ProductService not ready');
                    showNotFound();
                    return;
                }

                // Fetch product data with timeout
                const result = await Promise.race([
                    window.ProductService.getProductById(productId),
                    new Promise((_, reject) => 
                        setTimeout(() => reject(new Error('Request timeout')), 5000)
                    )
                ]);
                
                if (result.success && result.data) {
                    currentProduct = result.data;
                    displayProductDetails(result.data);
                } else {
                    showNotFound();
                }
            } catch (error) {
                console.error('âŒ Error loading product:', error);
                showNotFound();
            }
        }

        // Optimized display product details
        function displayProductDetails(product) {
            // Show product details immediately
            document.getElementById('loading-state').classList.add('hidden');
            document.getElementById('product-details').classList.remove('hidden');

            // Set page title
            const categoryName = getCategoryName(product.category);
            document.title = `${categoryName} - Ø²ÙÙŠÙ†ÙØ©`;

            // Batch DOM updates for better performance
            const elements = {
                title: document.getElementById('product-title'),
                titleBreadcrumb: document.getElementById('product-title-breadcrumb'),
                categoryBreadcrumb: document.getElementById('product-category-breadcrumb'),
                subcategoryDetail: document.getElementById('product-subcategory-detail'),
                date: document.getElementById('product-date'),
                mainImage: document.getElementById('main-image'),
                description: document.getElementById('product-description'),
                descriptionSection: document.getElementById('description-section')
            };

            // Update text content in batch
            elements.title.textContent = categoryName;
            elements.categoryBreadcrumb.textContent = categoryName;
            
            // Set the category link
            const categoryUrl = getCategoryUrl(product.category);
            elements.categoryBreadcrumb.href = categoryUrl;
            
            // Create a more descriptive title for the breadcrumb
            let productTitle = categoryName;
            if (product.subcategory && product.subcategory.length > 0) {
                // Get the first subcategory for a more specific title
                let firstSub = '';
                if (Array.isArray(product.subcategory)) {
                    firstSub = product.subcategory[0];
                } else if (typeof product.subcategory === 'string') {
                    try {
                        const parsed = JSON.parse(product.subcategory);
                        firstSub = Array.isArray(parsed) ? parsed[0] : parsed;
                    } catch (e) {
                        firstSub = product.subcategory.split(',')[0].trim();
                    }
                }
                if (firstSub) {
                    productTitle = getSubcategoryName(firstSub);
                }
            }
            elements.titleBreadcrumb.textContent = productTitle;
            
            // Handle subcategory efficiently
            let subs = [];
            if (product.subcategory && product.subcategory.length > 0) {
                // Handle both array and string formats
                if (Array.isArray(product.subcategory)) {
                    subs = product.subcategory;
                } else if (typeof product.subcategory === 'string') {
                    // Try to parse as JSON first, then fallback to comma-separated
                    try {
                        const parsed = JSON.parse(product.subcategory);
                        subs = Array.isArray(parsed) ? parsed : [parsed];
                    } catch (e) {
                        // If JSON parsing fails, treat as comma-separated string
                        subs = product.subcategory.split(',').map(s => s.trim()).filter(Boolean);
                    }
                }
            }
            
            if (subs.length > 0) {
                elements.subcategoryDetail.innerHTML = subs.map(sub =>
                    `<span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">
                        ${getSubcategoryName(sub)}
                    </span>`
                ).join('');
            } else {
                elements.subcategoryDetail.textContent = 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            }
            // Display governorates with badges
            const governorateElement = document.getElementById('product-governorate');
            if (product.governorate) {
                const governorates = product.governorate.split(',').map(g => g.trim());
                governorateElement.innerHTML = governorates.map(gov => 
                    window.GovernorateDisplay ? GovernorateDisplay.createBadge(gov) : `<span class="inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">${gov}</span>`
                ).join('');
            } else {
                governorateElement.innerHTML = '<span class="text-gray-500">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span>';
            }
            
            // Display cities with badges
            const citiesElement = document.getElementById('product-cities');
            if (product.cities) {
                const cities = product.cities.split(',').map(c => c.trim());
                citiesElement.innerHTML = cities.map(city => 
                    `<span class="inline-block bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full mr-1 mb-1">${city}</span>`
                ).join('');
            } else {
                citiesElement.innerHTML = '<span class="text-gray-500">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span>';
            }
            document.getElementById('product-price').textContent = product.price > 0 ? `${product.price} Ø¬.Ù…` : 'Ø§Ù„Ø³Ø¹Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨';
            
            // Handle description efficiently
            let cleanDescription = product.description || '';
            cleanDescription = cleanDescription.replace(/^Ù…Ù†ØªØ¬\s+(cake|koshat|mirr|other)$/i, '').trim();
            
            if (cleanDescription && cleanDescription !== '') {
                elements.description.textContent = cleanDescription;
                elements.descriptionSection.classList.remove('hidden');
            } else {
                elements.descriptionSection.classList.add('hidden');
            }
            
            // Update date
            elements.date.textContent = formatDate(product.created_at);

            // Set main image with optimized loading
            const imageUrl = product.image_urls && product.image_urls.length > 0 
                ? product.image_urls[0] 
                : 'https://placehold.co/600x400/EEE/31343C?text=Ù„Ø§+ØªÙˆØ¬Ø¯+ØµÙˆØ±Ø©';
            
            // Preload main image for faster display
            const img = new Image();
            img.onload = () => {
                elements.mainImage.src = imageUrl;
                elements.mainImage.alt = categoryName;
            };
            img.src = imageUrl;

            // Create image gallery and setup contact buttons in parallel
            Promise.all([
                createImageGallery(product.image_urls || []),
                setupContactButtons(product)
            ]).catch(console.error);
            
                         // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
             checkFavoriteStatus();
             
             // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
             updateFavoritesCount();
        }

        // Optimized create image gallery
        async function createImageGallery(imageUrls) {
            const gallery = document.getElementById('image-gallery');
            
            if (imageUrls.length <= 1) {
                gallery.classList.add('hidden');
                return;
            }

            // Use DocumentFragment for better performance
            const fragment = document.createDocumentFragment();
            
            imageUrls.forEach((url, index) => {
                const div = document.createElement('div');
                div.className = 'flex-shrink-0';
                div.innerHTML = `
                    <img src="${url}" 
                         alt="ØµÙˆØ±Ø© ${index + 1}" 
                         class="w-20 h-20 object-cover rounded-lg cursor-pointer border-2 border-transparent hover:border-yellow-400 transition-colors"
                         onclick="changeMainImage('${url}')"
                         loading="lazy">
                `;
                fragment.appendChild(div);
            });
            
            gallery.innerHTML = '';
            gallery.appendChild(fragment);
        }

        // Change main image
        function changeMainImage(imageUrl) {
            const mainImage = document.getElementById('main-image');
            mainImage.src = imageUrl;
        }

        // Setup contact buttons
        function setupContactButtons(product) {
            let hasContactInfo = false;

            // WhatsApp
            if (product.whatsapp) {
                const whatsappSection = document.getElementById('whatsapp-section');
                const whatsappBtn = document.getElementById('whatsapp-btn');
                
                // ØªÙ†Ø¸ÙŠÙ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø­Ø±Ù ØºÙŠØ± Ø§Ù„Ø±Ù‚Ù…ÙŠØ©
                let phoneNumber = product.whatsapp.replace(/[^0-9]/g, '');
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                if (phoneNumber.startsWith('20')) {
                    phoneNumber = phoneNumber.substring(2);
                }
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„ÙŠ Ù„Ù…ØµØ± Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
                if (!phoneNumber.startsWith('20') && !phoneNumber.startsWith('+20')) {
                    phoneNumber = '20' + phoneNumber;
                }
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø­Ø³Ù†Ø©
                let message = ``;
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¹Ø± Ø£ÙˆÙ„Ø§Ù‹
                if (product.price && product.price > 0) {
                    message += `ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${product.price} Ø¬.Ù…\n`;
                }
                
                // Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø«Ø§Ù†ÙŠØ§Ù‹
                if (product.image_urls && product.image_urls.length > 0) {
                    message += `ğŸ–¼ï¸ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©: ${product.image_urls[0]}\n`;
                }
                
                // Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬ Ø«Ø§Ù„Ø«Ø§Ù‹
                message += `ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬: ${window.location.href}\n\n`;
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­ÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªÙØ³Ø§Ø± ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
                message += `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬`;
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                
                whatsappBtn.href = whatsappUrl;
                whatsappBtn.setAttribute('target', '_blank');
                whatsappBtn.setAttribute('rel', 'noopener noreferrer');
                
                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†Ù‚Ø± Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©
                whatsappBtn.addEventListener('click', function(e) {
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ù…Ø­Ù…ÙˆÙ„
                    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                    
                    if (isMobile) {
                        // Ù…Ø­Ø§ÙˆÙ„Ø© ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©
                        window.location.href = whatsappUrl;
                    } else {
                        // Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±ØŒ ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯
                        window.open(whatsappUrl, '_blank');
                    }
                });
                
                // Ø¥Ø¶Ø§ÙØ© tooltip Ù„Ø´Ø±Ø­ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                whatsappBtn.title = 'Ø§Ø¶ØºØ· Ù„ÙØªØ­ Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬';
                
                // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„Ø²Ø± Ù„ÙŠÙƒÙˆÙ† Ø£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ø§Ù‹
                const whatsappText = whatsappBtn.querySelector('div');
                if (whatsappText) {
                    whatsappText.innerHTML = `
                        <div class="font-bold">ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</div>
                        <div class="text-sm opacity-90">Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…Ø¹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</div>
                    `;
                }
                
                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø¨ØµØ±ÙŠ Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø³ØªÙƒÙˆÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
                whatsappBtn.classList.add('relative');
                const autoIndicator = document.createElement('div');
                autoIndicator.className = 'absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full shadow-lg';
                autoIndicator.textContent = 'ØªÙ„Ù‚Ø§Ø¦ÙŠ';
                autoIndicator.style.animation = 'pulse 2s infinite';
                whatsappBtn.appendChild(autoIndicator);
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
                whatsappBtn.addEventListener('mouseenter', function() {
                    autoIndicator.style.transform = 'scale(1.1)';
                    autoIndicator.style.transition = 'transform 0.2s ease';
                });
                
                whatsappBtn.addEventListener('mouseleave', function() {
                    autoIndicator.style.transform = 'scale(1)';
                });
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
                whatsappBtn.addEventListener('click', function() {
                    autoIndicator.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        autoIndicator.style.transform = 'scale(1)';
                    }, 150);
                });
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ù…Ø³ÙŠØ©
                whatsappBtn.addEventListener('touchstart', function() {
                    autoIndicator.style.transform = 'scale(0.9)';
                });
                
                whatsappBtn.addEventListener('touchend', function() {
                    setTimeout(() => {
                        autoIndicator.style.transform = 'scale(1)';
                    }, 150);
                });
                
                whatsappBtn.addEventListener('touchmove', function() {
                    autoIndicator.style.transform = 'scale(1)';
                });
                
                whatsappBtn.addEventListener('touchcancel', function() {
                    autoIndicator.style.transform = 'scale(1)';
                });
                
                whatsappSection.classList.remove('hidden');
                hasContactInfo = true;
            }

            // Facebook
            if (product.facebook) {
                const facebookSection = document.getElementById('facebook-section');
                const facebookBtn = document.getElementById('facebook-btn');
                
                // ØªÙ†Ø¸ÙŠÙ ÙˆØªØµØ­ÙŠØ­ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ
                let facebookUrl = product.facebook.trim();
                
                // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ù…Ø³Ø§ÙØ§Øª Ø£Ùˆ Ø£Ø­Ø±Ù ØºÙŠØ± Ù…Ø±ØºÙˆØ¨ ÙÙŠÙ‡Ø§
                facebookUrl = facebookUrl.replace(/\s+/g, '');
                
                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ¨Ø¯Ø£ Ø¨Ù€ https:// Ø£Ùˆ http://
                if (!facebookUrl.startsWith('http://') && !facebookUrl.startsWith('https://')) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø·ØŒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ÙƒØ§Ù…Ù„
                    if (facebookUrl.includes('facebook.com')) {
                        facebookUrl = 'https://' + facebookUrl;
                    } else {
                        facebookUrl = 'https://www.facebook.com/' + facebookUrl;
                    }
                }
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­
                if (facebookUrl.includes('facebook.com')) {
                    facebookBtn.href = facebookUrl;
                    facebookSection.classList.remove('hidden');
                    hasContactInfo = true;
                } else {
                    console.warn('âš ï¸ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ ØºÙŠØ± ØµØ­ÙŠØ­:', product.facebook);
                }
            }

            // Instagram
            if (product.instagram) {
                const instagramSection = document.getElementById('instagram-section');
                const instagramBtn = document.getElementById('instagram-btn');
                
                // ØªÙ†Ø¸ÙŠÙ ÙˆØªØµØ­ÙŠØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ù†Ø³ØªØºØ±Ø§Ù…
                let instagramUrl = product.instagram.trim();
                
                // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ù…Ø³Ø§ÙØ§Øª Ø£Ùˆ Ø£Ø­Ø±Ù ØºÙŠØ± Ù…Ø±ØºÙˆØ¨ ÙÙŠÙ‡Ø§
                instagramUrl = instagramUrl.replace(/\s+/g, '');
                
                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ¨Ø¯Ø£ Ø¨Ù€ https:// Ø£Ùˆ http://
                if (!instagramUrl.startsWith('http://') && !instagramUrl.startsWith('https://')) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø·ØŒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ÙƒØ§Ù…Ù„
                    if (instagramUrl.includes('instagram.com')) {
                        instagramUrl = 'https://' + instagramUrl;
                    } else {
                        instagramUrl = 'https://www.instagram.com/' + instagramUrl;
                    }
                }
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­
                if (instagramUrl.includes('instagram.com')) {
                    instagramBtn.href = instagramUrl;
                    instagramSection.classList.remove('hidden');
                    hasContactInfo = true;
                } else {
                    console.warn('âš ï¸ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ù†Ø³ØªØºØ±Ø§Ù… ØºÙŠØ± ØµØ­ÙŠØ­:', product.instagram);
                }
            }

            // Show/hide no contact info message
            const noContactInfo = document.getElementById('no-contact-info');
            if (!hasContactInfo) {
                noContactInfo.classList.remove('hidden');
            } else {
                noContactInfo.classList.add('hidden');
            }
        }

        // Show not found state
        function showNotFound() {
            document.getElementById('loading-state').classList.add('hidden');
            document.getElementById('not-found-state').classList.remove('hidden');
        }

        // Get category name in Arabic
        function getCategoryName(category) {
            const categories = {
                'koshat': 'ÙƒÙˆØ´Ø§Øª',
                'mirr': 'Ù…Ø±Ø§ÙŠØ§',
                'cake': 'ØªÙˆØ±ØªØ§Øª',
                'other': 'Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©',
                'invitations': 'Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª'
            };
            return categories[category] || category;
        }

        // Get subcategory name in Arabic - Updated to match add-product.html exactly
        function getSubcategoryName(subcategory) {
            const subcategories = {
                // ÙƒÙˆØ´Ø§Øª
                'koshat-wedding': 'ÙƒÙˆØ´Ø§Øª Ø²ÙØ§Ù',
                'koshat-engagement': 'ÙƒÙˆØ´Ø§Øª Ø®Ø·ÙˆØ¨Ø©',
                
                // Ù…Ø±Ø§ÙŠØ§
                'mirror-wedding': 'Ù…Ø±Ø¢Ø© Ø²ÙØ§Ù',
                'mirror-engagement': 'Ù…Ø±Ø¢Ø© Ø®Ø·ÙˆØ¨Ø©',
                'mirror-decorative': 'Ù…Ø±Ø¢Ø© Ø¯ÙŠÙƒÙˆØ±',
                'mirror-custom': 'Ù…Ø±Ø¢Ø© Ù…Ø®ØµØµØ©',
                'mirror-classic': 'Ù…Ø±Ø¢Ø© ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©',
                'mirror-modern': 'Ù…Ø±Ø¢Ø© Ø¹ØµØ±ÙŠØ©',
                'mirror-luxury': 'Ù…Ø±Ø¢Ø© ÙØ§Ø®Ø±Ø©',
                
                // ØªÙˆØ±ØªØ©
                'cake-wedding': 'ØªÙˆØ±ØªØ© Ø²ÙØ§Ù',
                'cake-engagement': 'ØªÙˆØ±ØªØ© Ø®Ø·ÙˆØ¨Ø©',
                'cake-birthday': 'ØªÙˆØ±ØªØ© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
                'cake-chocolate': 'ØªÙˆØ±ØªØ© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©',
                'cake-fruit': 'ØªÙˆØ±ØªØ© ÙÙˆØ§ÙƒÙ‡',
                'cake-chocolate-tray': 'ØµÙŠÙ†ÙŠØ© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©',
                
                // Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©
                'other-birthday': 'Ø¯ÙŠÙƒÙˆØ± Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
                'other-hospital': 'Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù…ÙˆÙ„ÙˆØ¯ Ø¨Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰',
                'other-bride': 'Ø¯ÙŠÙƒÙˆØ± Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¹Ø±ÙˆØ³Ø©',
                'other-party': 'Ø¯ÙŠÙƒÙˆØ± Ø­ÙÙ„Ø§Øª Ø¨Ø³ÙŠØ·Ø©',
                
                // Ø¯Ø¹ÙˆØ§Øª
                'invitation-wedding': 'Ø¯Ø¹ÙˆØ© Ø²ÙØ§Ù',
                'invitation-engagement': 'Ø¯Ø¹ÙˆØ© Ø®Ø·ÙˆØ¨Ø©',
                'invitation-chocolate': 'ØªÙˆØ²ÙŠØ¹Ø§Øª Ø¨Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©',
                'invitation-perfumed': 'ØªÙˆØ²ÙŠØ¹Ø§Øª Ø¨Ø§Ù„Ø¨Ø±ÙØ§Ù†',
                'invitation-gift': 'ØªÙˆØ²ÙŠØ¹Ø§Øª Ù…Ø¹ Ù‡Ø¯ÙŠØ© ØµØºÙŠØ±Ø©',
                'invitation-digital': 'Ø¯Ø¹ÙˆØ© Ø±Ù‚Ù…ÙŠØ©',
                'invitation-innovative': 'Ø¯Ø¹ÙˆØ© Ù…Ø¨ØªÙƒØ±Ø©'
            };
            
            // Return Arabic name if found, otherwise return the original value
            return subcategories[subcategory] || subcategory;
        }

        // Get category URL
        function getCategoryUrl(category) {
            const categoryUrls = {
                'koshat': 'category-koshat.html',
                'mirr': 'category-mirr.html',
                'cake': 'category-cake.html',
                'other': 'category-other.html',
                'invitations': 'category-invitations.html'
            };
            return categoryUrls[category] || '#';
        }

        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ar-EG');
        }

        // Load product details on page load
        // Optimized initialization function
        async function initializeServices() {
            console.log('ğŸ”„ Starting optimized initialization...');
            
            // Add styles for governorate display immediately
            if (window.GovernorateDisplay) {
                GovernorateDisplay.addStyles();
            }
            
            // Initialize services in parallel with shorter timeout
            const initPromises = [];
            
            if (window.AuthService && window.AuthService.initialize) {
                initPromises.push(window.AuthService.initialize());
            }
            
            if (window.ProductService && window.ProductService.initialize) {
                initPromises.push(window.ProductService.initialize());
            }
            
            // Wait for all services to initialize with timeout
            try {
                await Promise.race([
                    Promise.all(initPromises),
                    new Promise(resolve => setTimeout(resolve, 500)) // Reduced timeout
                ]);
            } catch (error) {
                console.warn('âš ï¸ Service initialization timeout, continuing...', error);
            }
            
            console.log('âœ… Services initialized, loading product details...');
            
            // Quick check for ProductService
            if (!window.ProductService || typeof window.ProductService.getProductById !== 'function') {
                console.error('âŒ ProductService not available, retrying...');
                // Retry once after a short delay
                setTimeout(() => {
                    if (window.ProductService && typeof window.ProductService.getProductById === 'function') {
                        loadProductDetails();
                    } else {
                        showNotFound();
                    }
                }, 200);
                return;
            }
            
            // Load product details immediately
            loadProductDetails();
            
            // Load recommended products after a short delay
            setTimeout(loadRecommendedProducts, 1000);
        }

        // Start initialization immediately for faster loading
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeServices);
        } else {
            // DOM is already loaded - start immediately
            setTimeout(initializeServices, 0);
        }
        
                 // Ù…Ø³ØªÙ…Ø¹ Ù„ØªØºÙŠÙŠØ±Ø§Øª localStorage Ù„Ø¶Ù…Ø§Ù† ØªØ²Ø§Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
         window.addEventListener('storage', function(e) {
             if (e.key === 'favorites' && currentProduct) {
                 console.log('ğŸ”„ Favorites changed in localStorage, updating favorite status...');
                 checkFavoriteStatus();
             }
             
             // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
             if (e.key === 'favorites') {
                 updateFavoritesCount();
             }
         });
        
                 // Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ø­Ø¯Ø« Ø§Ù„Ù…Ø®ØµØµ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù…Ù†
         window.addEventListener('favoritesChanged', function(e) {
             if (currentProduct) {
                 console.log('ğŸ”„ Favorites changed via custom event, updating favorite status...');
                 checkFavoriteStatus();
             }
             
             // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
             if (currentRecommendedProducts.length > 0) {
                 updateRecommendedProductsFavoriteStatus();
             }
             
             // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
             updateFavoritesCount();
         });
    </script>



    <script>
        // Add Product Button functionality
        const addProductBtn = document.getElementById('add-product-btn');
        
        async function handleAddProduct() {
            // Wait for AuthService to be available
                            if (!window.AuthService) {
                    console.error('âŒ AuthService not available');
                    window.location.href = '../admin/add-info.html';
                    return;
                }
                
                const isLoggedIn = await window.AuthService.isLoggedIn();
                if (isLoggedIn) {
                    window.location.href = '../admin/add-product.html';
                } else {
                    window.location.href = '../admin/add-info.html';
                }
        }
        
        if (addProductBtn) {
            addProductBtn.addEventListener('click', handleAddProduct);
        }
        
        // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
        async function loadRecommendedProducts() {
            try {
                console.log('ğŸ”„ Loading recommended products...');
                
                // Ø§Ù†ØªØ¸Ø§Ø± Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                if (!window.advertisingService) {
                    console.log('â³ Waiting for AdvertisingService...');
                    await new Promise(resolve => {
                        const checkInterval = setInterval(() => {
                            if (window.advertisingService) {
                                clearInterval(checkInterval);
                                resolve();
                            }
                        }, 100);
                        
                        setTimeout(() => {
                            clearInterval(checkInterval);
                            console.error('âŒ AdvertisingService not loaded after 5 seconds');
                            resolve();
                        }, 5000);
                    });
                }
                
                if (!window.advertisingService) {
                    console.error('âŒ AdvertisingService not available');
                    showNoRecommendedMessage();
                    return;
                }
                
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
                const recommendedProducts = await window.advertisingService.getRecommendedProducts(6);
                
                if (recommendedProducts && recommendedProducts.length > 0) {
                    console.log('âœ… Loaded recommended products:', recommendedProducts.length);
                    displayRecommendedProducts(recommendedProducts);
                    
                    // ØªØ³Ø¬ÙŠÙ„ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                    recommendedProducts.forEach(product => {
                        if (product.ad_id) {
                            window.advertisingService.recordImpression(product.ad_id);
                        }
                    });
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    document.getElementById('recommended-loading').classList.add('hidden');
                } else {
                    console.log('â„¹ï¸ No recommended products available');
                    showNoRecommendedMessage();
                }
                
            } catch (error) {
                console.error('âŒ Error loading recommended products:', error);
                showNoRecommendedMessage();
            }
        }
        
                 // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
         function displayRecommendedProducts(products) {
             const grid = document.getElementById('recommended-products-grid');
             if (!grid) return;
             
             // Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø¹Ø§Ù…
             currentRecommendedProducts = products;
             
             grid.innerHTML = '';
             
             products.forEach(product => {
                 const productCard = createProductCard(product);
                 grid.appendChild(productCard);
             });
             
             // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø©
             updateRecommendedProductsFavoriteStatus();
         }
        
        // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù…Ù†ØªØ¬
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'flex-shrink-0 w-64 md:w-80 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 cursor-pointer';
            
            const imageUrl = product.image_urls && product.image_urls.length > 0 ? product.image_urls[0] : '../assets/images/placeholder.jpg';
            const title = product.title || getCategoryName(product.category);
            const price = product.price || 'Ø§Ù„Ø³Ø¹Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨';
            const governorate = product.governorate || '';
            const cities = product.cities || '';
            
            card.innerHTML = `
                <div class="relative">
                    <img src="${imageUrl}" alt="${title}" class="w-full h-48 object-cover object-center product-image">
                    <div class="absolute top-2 right-2">
                        <button onclick="toggleFavoriteFromCard('${product.id}')" class="favorite-btn bg-white rounded-full p-2 shadow-lg hover:bg-pink-50 transition-all duration-200">
                            <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-xl font-bold gold-text">${price}</span>
                    </div>
                    <div class="text-sm text-gray-600 mb-3">
                        <div class="mb-1">
                            <span class="font-medium">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª:</span> ${governorate}
                        </div>
                        ${cities && cities.trim() !== '' && cities !== 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ù†' ? `<div><span class="font-medium">Ø§Ù„Ù…Ù†Ø§Ø·Ù‚:</span> ${cities}</div>` : ''}
                    </div>
                </div>
            `;
            
            // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
            card.addEventListener('click', function(e) {
                // Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©
                if (e.target.closest('.favorite-btn')) {
                    return;
                }
                
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
                window.location.href = `product-details.html?id=${product.id}`;
            });
            
            return card;
        }
        
        // Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
        function showNoRecommendedMessage() {
            document.getElementById('recommended-loading').classList.add('hidden');
            document.getElementById('no-recommended-message').classList.remove('hidden');
        }
        
                          // Ù…ØªØºÙŠØ± Ø¹Ø§Ù… Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
         let currentRecommendedProducts = [];
         
         // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
         function updateRecommendedProductsFavoriteStatus() {
             const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
             
             currentRecommendedProducts.forEach(product => {
                 const favoriteBtn = document.querySelector(`[onclick="toggleFavoriteFromCard('${product.id}')"]`);
                 if (favoriteBtn) {
                     const icon = favoriteBtn.querySelector('svg');
                     const isFavorite = favorites.some(item => item.id === product.id);
                     
                     if (isFavorite) {
                         icon.classList.remove('text-gray-400');
                         icon.classList.add('text-pink-500', 'fill-current');
                         favoriteBtn.classList.add('active');
                     } else {
                         icon.classList.remove('text-pink-500', 'fill-current');
                         icon.classList.add('text-gray-400');
                         favoriteBtn.classList.remove('active');
                     }
                 }
             });
         }
         
         // Ø¯Ø§Ù„Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
         function toggleFavoriteFromCard(productId) {
             // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
             const product = currentRecommendedProducts.find(p => p.id === productId);
             
             if (!product) {
                 console.warn('âš ï¸ Product not found in recommended products:', productId);
                 return;
             }
             
             // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
             const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
             const existingIndex = favorites.findIndex(item => item.id === productId);
             
             if (existingIndex > -1) {
                 // Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©
                 favorites.splice(existingIndex, 1);
                 showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'info');
                 
                 // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
                 const favoriteBtn = event.target.closest('.favorite-btn');
                 if (favoriteBtn) {
                     const icon = favoriteBtn.querySelector('svg');
                     icon.classList.remove('text-pink-500', 'fill-current');
                     icon.classList.add('text-gray-400');
                     favoriteBtn.classList.remove('active');
                 }
             } else {
                 // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©
                 const productData = {
                     id: product.id,
                     title: product.title || getCategoryName(product.category),
                     imageUrl: product.image_urls && product.image_urls.length > 0 ? product.image_urls[0] : '',
                     price: product.price || 0,
                     governorate: product.governorate || '',
                     cities: product.cities || '',
                     subcategories: product.subcategory ? (Array.isArray(product.subcategory) ? product.subcategory : [product.subcategory]) : [],
                     category: product.category || 'other',
                     addedAt: new Date().toISOString()
                 };
                 favorites.push(productData);
                 showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'success');
                 
                 // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
                 const favoriteBtn = event.target.closest('.favorite-btn');
                 if (favoriteBtn) {
                     const icon = favoriteBtn.querySelector('svg');
                     icon.classList.remove('text-gray-400');
                     icon.classList.add('text-pink-500', 'fill-current');
                     favoriteBtn.classList.add('active');
                 }
             }
             
             // Ø­ÙØ¸ ÙÙŠ Local Storage
             localStorage.setItem('favorites', JSON.stringify(favorites));
             
             // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
             updateFavoritesCount();
             
             // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ù…Ø®ØµØµ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
             window.dispatchEvent(new CustomEvent('favoritesChanged', {
                 detail: { favorites: favorites }
             }));
         }
    </script>

    <!-- Ù…Ù„Ù ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± -->
    <script src="../js/scroll-optimization.js?v=2025-08-22-1" defer></script>
    
    <!-- Floating Add Product Button -->
    <div class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50">
        <a href="add-product-request.html" class="inline-flex items-center justify-center text-white px-6 py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 font-semibold text-lg" style="background: #845FCE;">
            <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
            </svg>
            Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ
        </a>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-bold mb-4">Ø²ÙÙŠÙ†ÙØ©</h3>
                    <p class="text-gray-300 text-sm">Ù…Ù†ØµØ© Ù…ØªØ®ØµØµØ© ÙÙŠ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø®Ø·ÙˆØ¨Ø© ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h4>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><a href="../index.html" class="hover:text-white transition-colors">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                        <li><a href="about-us.html" class="hover:text-white transition-colors">Ù…Ù† Ù†Ø­Ù†</a></li>
                        <li><a href="contact-us.html" class="hover:text-white transition-colors">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
                        <li><a href="advertise-with-us.html" class="text-yellow-400 hover:text-yellow-300 font-medium">â­ Ø£Ø¶Ù Ø¥Ø¹Ù„Ø§Ù†Ùƒ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª</h4>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><a href="../legal/privacy-policy.html" class="hover:text-white transition-colors">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a></li>
                        <li><a href="../legal/terms-of-use.html" class="hover:text-white transition-colors">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a></li>
                        <li><a href="../legal/cookies-policy.html" class="hover:text-white transition-colors">Ø³ÙŠØ§Ø³Ø© Ø§Ù„ÙƒÙˆÙƒÙŠØ²</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h4>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><a href="tel:+201016436007" class="hover:text-white transition-colors">ğŸ“ 01016436007</a></li>
                        <li><a href="https://www.facebook.com/share/1BCEhAV89y/?mibextid=wwXIfr" target="_blank" class="hover:text-white transition-colors">ğŸ“˜ ÙÙŠØ³Ø¨ÙˆÙƒ</a></li>
                        <li><a href="https://www.instagram.com/zeina.eg_?igsh=MXg4bzNqd213Z3IyaQ==" target="_blank" class="hover:text-white transition-colors">ğŸ“· Ø¥Ù†Ø³ØªØºØ±Ø§Ù…</a></li>
                        <li><a href="https://wa.me/201016436007" target="_blank" class="hover:text-white transition-colors">ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨</a></li>
                    </ul>
                </div>
            </div>
                         <div class="border-t border-gray-700 mt-8 pt-8">
                 <div class="text-center text-sm text-gray-300 mb-4">
                     <p>&copy; 2024 Ø²ÙÙŠÙ†ÙØ©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
                 </div>
                 <div class="bg-gray-700 rounded-lg p-4 text-center">
                     <p class="text-xs text-gray-400 leading-relaxed">
                         ØªÙ†Ø¨ÙŠÙ‡ Ù‚Ø§Ù†ÙˆÙ†ÙŠ: ÙŠÙ‚ØªØµØ± Ø¯ÙˆØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ±Ø¨Ø· Ø§Ù„Ø£Ø·Ø±Ø§ÙØŒ ÙˆÙ„Ø§ ÙŠØ´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ø¨ÙŠØ¹ Ø£Ùˆ Ø§Ù„Ø¯ÙØ¹ Ø£Ùˆ Ø§Ù„ØªÙˆØµÙŠÙ„. Ù„Ø§ ØªØªØ­Ù…Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£ÙŠ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù† Ø§Ù„Ø§ØªÙØ§Ù‚Ø§Øª Ø£Ùˆ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„ØªÙŠ ØªØªÙ… Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.
                     </p>
                 </div>
             </div>
        </div>
    </footer>
</body>
</html> 