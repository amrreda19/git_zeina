<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø²ÙÙŠÙ†ÙØ©</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" as="script">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/cities-service.js" defer></script>
    <script src="js/product-service.js" defer></script>
    <script src="js/auth-service.js" defer></script>
    <script src="js/admin-security.js" defer></script>
    <script src="js/governorate-filter.js" defer></script>
    <script src="js/enhanced-auto-slideshow.js" defer></script>
    <script src="js/product-requests-service.js" defer></script>
    <script src="js/advertising-service.js" defer></script>
    <script src="js/smooth-scroll.js" defer></script>
    
    <!-- Cities Filter Styles -->
    <style>
        :root {
            --primary-pink: #f8d7e4;
            --primary-green: #d8e9d6;
            --primary-beige: #f5f0e6;
            --gold: #d4af37;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f9f9f9;
        }
        
        .hero-image {
            height: 60vh;
            background-position: center;
            background-size: cover;
            transition: all 0.7s ease-in-out;
            position: relative;
        }
        
        .text-shadow {
            text-shadow: none;
        }
        
        .text-shadow-lg {
            text-shadow: none;
        }
        
        .carousel-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .carousel-indicator.active {
            background: #d4af37;
            border-color: #d4af37;
            transform: scale(1.2);
        }
        
        .product-card {
            transition: all 0.3s ease;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .product-card img {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        
        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…ÙØ¶Ù„Ø© */
        .favorite-btn {
            transition: all 0.2s ease;
            z-index: 10;
        }
        
        .favorite-btn:hover {
            transform: scale(1.1);
        }
        
        .favorite-btn svg {
            transition: all 0.2s ease;
        }
        
        .favorite-btn.favorite svg {
            color: #ef4444;
            fill: currentColor;
        }
        
        .favorite-btn:not(.favorite) svg {
            color: #9ca3af;
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ù…Ø¸Ù‡Ø± Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„Ø£Ø­Ù…Ø± */
        .favorite-btn svg.text-red-500 {
            color: #ef4444 !important;
            fill: currentColor !important;
        }
        
        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .product-image-container {
            position: relative;
            overflow: hidden;
            border-radius: 8px 8px 0 0;
        }
        
        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .slideshow-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            transform: scale(1.05);
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        
        .slideshow-image.active {
            opacity: 1;
            transform: scale(1);
        }
        
        .slideshow-image:hover {
            transform: scale(1.02);
            transition: transform 0.3s ease;
        }
        
        .slideshow-indicators {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
            z-index: 15;
        }
        
        .indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .indicator.active {
            background: #d4af37;
            border-color: #d4af37;
            transform: scale(1.2);
        }
        
        .indicator:hover {
            background: #d4af37;
            border-color: #d4af37;
        }
        
        .multiple-images-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            backdrop-filter: blur(10px);
            z-index: 15;
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .category-card img {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        
        /* ØªØ­Ø³ÙŠÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© */
        .product-card img {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            loading: lazy;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ‚ÙŠ */
        #featured-products-grid {
            scrollbar-width: thin;
            scrollbar-color: #d4af37 #f3f4f6;
        }
        
        #featured-products-grid::-webkit-scrollbar {
            height: 8px;
        }
        
        #featured-products-grid::-webkit-scrollbar-track {
            background: #f3f4f6;
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ */
        .error-message {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø®Ø·Ø§Ø¡ */
        .border-red-500 {
            border-color: #ef4444 !important;
        }
        
        /* Validation Styles */
        .validation-error {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .validation-error::before {
            content: "âš ï¸";
            font-size: 1rem;
        }
        
        .validation-error.show {
            display: flex;
        }
        
        .validation-error.hidden {
            display: none;
        }
        
        .field-error {
            border-color: #dc2626 !important;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1) !important;
        }
        
        .field-error:focus {
            border-color: #dc2626 !important;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1) !important;
        }
        
        .required-field {
            color: #dc2626;
            font-weight: 600;
        }
        
        /* Special error styling for governorate and subcategory sections */
        .simple-governorate-filter.field-error .dropdown-btn {
            border-color: #dc2626 !important;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1) !important;
        }
        
        .simple-governorate-filter.field-error .dropdown-btn:hover {
            border-color: #dc2626 !important;
        }
        
        #request-subcategory-group.field-error {
            border: 2px solid #dc2626;
            border-radius: 8px;
            padding: 1rem;
            background-color: rgba(220, 38, 38, 0.05);
        }
        
        #request-subcategory-options.field-error {
            border: 1px solid #dc2626;
            border-radius: 6px;
            padding: 0.5rem;
            background-color: rgba(220, 38, 38, 0.05);
        }
        
        .field-error {
            border-color: #dc2626 !important;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ dropdown Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø£ */
        #request-governorate-dropdown-btn.border-red-500 {
            border-color: #ef4444 !important;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø£ */
        #request-subcategory-group.border-red-500 {
            border-color: #ef4444 !important;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø£ */
        #request-upload-area.border-red-500 {
            border-color: #ef4444 !important;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
        }
        
        #featured-products-grid::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 4px;
        }
        
        #featured-products-grid::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 4px;
        }
        
        #featured-products-grid::-webkit-scrollbar-thumb:hover {
            background: #b8941f;
        }
        
        .gold-border {
            border: 1px solid var(--gold);
        }
        
        /* Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± Ø§Ù„Ù‡ÙŠØ¯Ø± */
        header {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: sticky !important;
            top: 0 !important;
            z-index: 50 !important;
            background-color: white !important;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø³Ù„Ø³ */
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px; /* ØªØ¹ÙˆÙŠØ¶ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù‡ÙŠØ¯Ø± */
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© */
        @media (max-width: 768px) {
            html {
                scroll-padding-top: 70px;
            }
        }
        
        /* ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù */
        #product-request-section {
            scroll-margin-top: 80px;
        }
        
        @media (max-width: 768px) {
            #product-request-section {
                scroll-margin-top: 70px;
            }
        }
        
        header .container {
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
        }
        
        .gold-text {
            color: var(--gold);
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .hero-image {
                height: 40vh;
            }
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Logo styles */
        .logo-css {
            width: 100%;
            height: 100%;
        }
        

        
        .logo-text {
            font-family: 'Tajawal', sans-serif;
            color: #d4af37;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
        }
        
        /* Fallback logo styles */
        .logo-fallback {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            font-size: 0.875rem;
        }
        
        /* Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, #b8941f 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: #666;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            border-color: #999;
            color: #333;
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--gold) 0%, #b8941f 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
        }
        
        .modal-message {
            color: #666;
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        
        .modal-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        .btn-modal-primary {
            background: linear-gradient(135deg, var(--gold) 0%, #b8941f 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
        }
        
        .btn-modal-secondary {
            background: transparent;
            color: #666;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-secondary:hover {
            border-color: #999;
            color: #333;
        }
        
        /* Custom Modal Styles */
        .custom-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .custom-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .custom-modal-content {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transform: scale(0.8);
            transition: all 0.3s ease;
        }
        
        .custom-modal-overlay.active .custom-modal-content {
            transform: scale(1);
        }
        
        .custom-modal-icon {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 2rem;
        }
        
        .custom-modal-icon.warning {
            background: #fef3c7;
            color: #f59e0b;
        }
        
        .custom-modal-icon.success {
            background: #d1fae5;
            color: #10b981;
        }
        
        .custom-modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        .custom-modal-message {
            color: #6b7280;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .custom-modal-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }
        
        .custom-modal-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }
        
        .custom-modal-btn.cancel {
            background: #f3f4f6;
            color: #6b7280;
        }
        
        .custom-modal-btn.cancel:hover {
            background: #e5e7eb;
            transform: translateY(-1px);
        }
        
        .custom-modal-btn.confirm {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        .custom-modal-btn.confirm:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }
        
        .custom-modal-btn.success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .custom-modal-btn.success:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ø²Ø± "Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ" */
        #add-product-request-btn {
            position: relative;
            overflow: hidden;
        }
        
        #add-product-request-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        #add-product-request-btn:hover::before {
            left: 100%;
        }
        
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø³Ù„Ø³ */
        html {
            scroll-behavior: smooth;
        }
        
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ Ù„Ù„Ù‚Ø³Ù… */
        @keyframes section-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            }
            50% {
                transform: scale(1.02);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            }
        }

        .cities-filter-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            font-family: 'Tajawal', sans-serif;
        }

        .cities-header {
            position: relative;
        }

        .cities-trigger {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 48px;
        }

        .cities-trigger:hover {
            border-color: #d1d5db;
        }

        .cities-trigger.active {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .trigger-content {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .location-icon {
            width: 20px;
            height: 20px;
            color: #6b7280;
            flex-shrink: 0;
        }

        .trigger-text {
            color: #374151;
            font-weight: 500;
            flex: 1;
        }

        .selected-count {
            background: #3b82f6;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        .chevron-icon {
            width: 16px;
            height: 16px;
            color: #6b7280;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .cities-trigger.active .chevron-icon {
            transform: rotate(180deg);
        }

        .cities-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            margin-top: 4px;
            max-height: 400px;
            overflow: hidden;
            display: none;
        }

        .cities-dropdown.show {
            display: block;
        }

        .dropdown-header {
            padding: 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .search-container {
            position: relative;
            margin-bottom: 12px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            color: #9ca3af;
        }

        .search-input {
            width: 100%;
            padding: 8px 12px 8px 36px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 12px;
            color: #374151;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: #e5e7eb;
            border-color: #9ca3af;
        }

        .cities-list {
            max-height: 250px;
            overflow-y: auto;
            padding: 8px 0;
        }

        .city-item {
            padding: 8px 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .city-item:hover {
            background-color: #f9fafb;
        }

        .city-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            width: 100%;
        }

        .city-input {
            width: 16px;
            height: 16px;
            accent-color: #3b82f6;
        }

        .city-name {
            color: #374151;
            font-size: 14px;
            flex: 1;
        }

        .dropdown-footer {
            padding: 12px 16px;
            border-top: 1px solid #e5e7eb;
            background: #f9fafb;
        }

        .apply-btn {
            width: 100%;
            padding: 10px 16px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .apply-btn:hover {
            background: #2563eb;
        }

        .selected-cities {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .selected-city-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: #dbeafe;
            color: #1e40af;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .remove-city {
            background: none;
            border: none;
            color: #1e40af;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            padding: 0;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }

        .remove-city:hover {
            background: rgba(30, 64, 175, 0.1);
        }

        /* Sortable Image Styles */
        .sortable-image {
            cursor: grab;
            transition: all 0.3s ease;
            position: relative;
        }

        .sortable-image:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .sortable-image.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
            z-index: 1000;
            cursor: grabbing;
        }

        .sortable-image.drag-over {
            border: 2px dashed #d4af37;
            background: rgba(212, 175, 55, 0.1);
        }

        .image-drag-handle {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .image-drag-handle:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }

        .image-number {
            position: absolute;
            bottom: 0.5rem;
            left: 0.5rem;
            background: #d4af37;
            color: white;
            border-radius: 50%;
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            z-index: 10;
        }

        .image-sort-instructions {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        /* Simple Governorate Filter Styles */
        .simple-governorate-filter {
            position: relative;
            width: 100%;
        }

        .filter-dropdown {
            position: relative;
        }

        .dropdown-btn {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            color: #374151;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .dropdown-btn:hover {
            border-color: #d4af37;
            background: #fefbf0;
        }
        
        .dropdown-btn:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .dropdown-arrow {
            width: 16px;
            height: 16px;
            transition: transform 0.3s ease;
        }

        .dropdown-btn.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
        }

        .governorate-options {
            padding: 8px;
        }

        .governorate-option {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }

        .governorate-option:hover {
            background-color: #f3f4f6;
        }

        .governorate-checkbox {
            margin-left: 8px;
            width: 16px;
            height: 16px;
            accent-color: #d4af37;
        }

        .dropdown-actions {
            display: flex;
            gap: 8px;
            padding: 8px;
            border-top: 1px solid #e5e7eb;
        }

        .action-btn {
            flex: 1;
            padding: 6px 12px;
            border: 1px solid #d4af37;
            border-radius: 6px;
            background: white;
            color: #d4af37;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: #d4af37;
            color: white;
        }

        .selected-governorates {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-governorate-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: #dbeafe;
            color: #1e40af;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .remove-governorate {
            background: none;
            border: none;
            color: #1e40af;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            padding: 0;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }

        .remove-governorate:hover {
            background: rgba(30, 64, 175, 0.1);
        }

        /* Responsive Design */
        @media (max-width: 640px) {
            .cities-filter-container {
                max-width: 100%;
            }
            
            .cities-trigger {
                padding: 10px 12px;
                min-height: 44px;
            }
            
            .trigger-text {
                font-size: 14px;
            }
            
            .cities-dropdown {
                max-height: 300px;
            }
            
            .cities-list {
                max-height: 200px;
            }
        }
        
        /* Global Error Banner Styles */
        #global-error-banner {
            background-color: #dc2626;
            color: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
            transition: all 0.3s ease-in-out;
        }
        
        #global-error-banner.show {
            opacity: 1;
            transform: scale(1);
        }
        
        #global-error-banner.hidden {
            opacity: 0;
            transform: scale(0.95);
            display: none;
        }
        
        #close-error-banner {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        
        #close-error-banner:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            #global-error-banner .container {
                padding-left: 16px;
                padding-right: 16px;
            }
            
            #global-error-banner h3 {
                font-size: 16px;
            }
            
            #global-error-banner p {
                font-size: 14px;
            }
        }
        

    </style>
</head>
<body class="text-gray-700">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white shadow-sm gold-border" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
        <div class="container mx-auto px-4 py-2 flex items-center justify-between" style="display: flex !important;">
            <!-- Logo -->
            <div class="flex items-center mr-2">
                <span class="logo-text">Ø²ÙÙŠÙ†ÙØ©</span>
            </div>
            
            <!-- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© -->
            <div class="hidden lg:flex items-center space-x-6 space-x-reverse">
                <a href="pages/category-koshat.html" class="text-gray-600 hover:text-yellow-600 transition-colors text-sm font-medium">ÙƒÙˆØ´Ø§Øª</a>
                                        <a href="pages/category-cake.html" class="text-gray-600 hover:text-yellow-600 transition-colors text-sm font-medium">ØªÙˆØ±ØªØ§Øª ÙˆØ´ÙƒÙˆÙ„Ø§ØªØ§Øª</a>
                <a href="pages/category-mirr.html" class="text-gray-600 hover:text-yellow-600 transition-colors text-sm font-medium">Ù…Ø±Ø§ÙŠØ§</a>
                <a href="pages/category-other.html" class="text-gray-600 hover:text-yellow-600 transition-colors text-sm font-medium">Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©</a>
                <a href="pages/category-invitations.html" class="text-gray-600 hover:text-yellow-600 transition-colors text-sm font-medium">Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª</a>
                <span class="text-gray-300">|</span>
                <a href="pages/about-us.html" class="text-gray-600 hover:text-yellow-600 transition-colors text-sm font-medium">Ù…Ù† Ù†Ø­Ù†</a>
                <a href="pages/contact-us.html" class="text-gray-600 hover:text-yellow-600 transition-colors text-sm font-medium">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
            </div>
            
                            <!-- Desktop Action Buttons -->
                <div class="hidden lg:flex items-center space-x-3 space-x-reverse">
                    <!-- Desktop Favorites Button -->
                    <a href="pages/favorites.html" class="text-pink-500 hover:text-pink-600 transition-colors flex items-center space-x-2 space-x-reverse relative">
                        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span id="favorites-count-badge-desktop" class="absolute -top-2 -right-2 bg-yellow-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold hidden">0</span>
                    </a>
                    
                    <!-- Desktop Advertise Button -->
                    <a href="pages/advertise-with-us.html" class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white text-xs px-3 py-2 rounded-lg font-semibold hover:from-yellow-600 hover:to-yellow-700 transform hover:scale-105 transition-all duration-200">
                        <span class="flex items-center space-x-1 space-x-reverse">
                            <span>â­</span>
                            <span>Ø£Ø¹Ù„Ù† Ù…Ø¹Ù†Ø§</span>
                        </span>
                    </a>
                    
                    <!-- Desktop Add Product Request Button -->
                    <a href="javascript:void(0)" class="bg-gradient-to-r from-green-500 to-green-600 text-white text-xs px-3 py-2 rounded-lg font-semibold hover:from-green-600 hover:to-green-700 transform hover:scale-105 transition-all duration-200" id="add-product-request-btn" onclick="scrollToProductRequestSection()">
                        <span class="flex items-center space-x-1 space-x-reverse">
                            <span>â•</span>
                            <span>Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ</span>
                        </span>
                    </a>
                
                <!-- Desktop Admin Dashboard Button (Hidden by default) -->
                <a href="admin/admin-dashboard.html" class="bg-gradient-to-r from-red-500 to-red-600 text-white text-xs px-3 py-2 rounded-lg font-semibold hover:from-red-600 hover:to-red-700 transform hover:scale-105 transition-all duration-200 hidden" id="admin-dashboard-btn-desktop">
                    <span class="flex items-center space-x-1 space-x-reverse">
                        <span>âš™ï¸</span>
                        <span>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</span>
                    </span>
                </a>
            </div>
            
            <!-- ØªÙ… Ø¥Ø²Ø§Ù„Ø© Desktop Auth Buttons -->
            
            <!-- Mobile Menu Button -->
            <div class="lg:hidden flex items-center space-x-2 space-x-reverse">
                <!-- Mobile Favorites Button -->
                <a href="pages/favorites.html" class="text-pink-500 hover:text-pink-600 transition-colors flex items-center space-x-2 space-x-reverse relative">
                    <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    <span id="favorites-count-badge-mobile" class="absolute -top-2 -right-2 bg-yellow-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold hidden">0</span>
                </a>
                

                
                <!-- Mobile Advertise Button -->
                <a href="pages/advertise-with-us.html" class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white text-xs px-2 py-2 rounded-lg font-semibold hover:from-yellow-600 hover:to-yellow-700 transform hover:scale-105 transition-all duration-200 text-center">
                    <span class="flex items-center justify-center space-x-1 space-x-reverse">
                        <span>â­</span>
                        <span>Ø£Ø¹Ù„Ù† Ù…Ø¹Ù†Ø§</span>
                    </span>
                </a>
                
                <!-- Mobile Add Product Request Button -->
                <a href="javascript:void(0)" onclick="scrollToProductRequestSection()" class="bg-gradient-to-r from-green-500 to-green-600 text-white text-xs px-2 py-2 rounded-lg font-semibold hover:from-green-600 hover:to-green-700 transform hover:scale-105 transition-all duration-200 text-center">
                    <span class="flex items-center justify-center space-x-1 space-x-reverse">
                        <span>â•</span>
                        <span>Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ</span>
                    </span>
                </a>
                
                <!-- Mobile Admin Dashboard Button (Hidden by default) -->
                <a href="admin/admin-dashboard.html" class="bg-gradient-to-r from-red-500 to-red-600 text-white text-xs px-2 py-2 rounded-lg font-semibold hover:from-red-600 hover:to-red-700 transform hover:scale-105 transition-all duration-200 text-center hidden" id="admin-dashboard-btn-mobile">
                    <span class="flex items-center justify-center space-x-1 space-x-reverse">
                        <span>âš™ï¸</span>
                        <span>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</span>
                    </span>
                </a>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="p-2 text-gray-600 hover:text-yellow-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="lg:hidden hidden bg-white border-t border-gray-200">
            <div class="px-4 py-2 space-y-2">
                

                
                <!-- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª -->
                <div class="border-b border-gray-200 pb-3">
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</h3>
                    <div class="space-y-2">
                        <a href="pages/category-koshat.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">ÙƒÙˆØ´Ø§Øª</a>
                        <a href="pages/category-cake.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">ØªÙˆØ±ØªØ§Øª ÙˆØ´ÙƒÙˆÙ„Ø§ØªØ§Øª</a>
                        <a href="pages/category-mirr.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">Ù…Ø±Ø§ÙŠØ§</a>
                        <a href="pages/category-other.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©</a>
                        <a href="pages/category-invitations.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª</a>
                    </div>
                </div>
                
                <!-- Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø© -->
                <div class="border-b border-gray-200 pb-3">
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø©</h3>
                    <div class="space-y-2">
                        <a href="pages/about-us.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">Ù…Ù† Ù†Ø­Ù†</a>
                        <a href="pages/contact-us.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
                        <a href="pages/faq.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</a>
                    </div>
                </div>
                

                
                <!-- ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ -->
                <div class="border-b border-gray-200 pb-3">
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
                    
                    <!-- Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ -->
                    <div class="mb-3">
                        <h4 class="text-xs font-medium text-gray-500 mb-2">Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</h4>
                        <div class="space-y-2">
                            <a href="https://facebook.com" target="_blank" class="block py-2 px-3 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 text-sm flex items-center">
                                <span class="mr-2">ğŸ“˜</span>
                                ÙÙŠØ³Ø¨ÙˆÙƒ
                            </a>
                            <a href="https://instagram.com" target="_blank" class="block py-2 px-3 text-gray-600 hover:text-pink-600 hover:bg-pink-50 rounded-lg transition-all duration-200 text-sm flex items-center">
                                <span class="mr-2">ğŸ“·</span>
                                Ø¥Ù†Ø³ØªØºØ±Ø§Ù…
                            </a>
                            <a href="https://wa.me/201234567890" target="_blank" class="block py-2 px-3 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200 text-sm flex items-center">
                                <span class="mr-2">ğŸ“±</span>
                                ÙˆØ§ØªØ³Ø§Ø¨
                            </a>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± -->
                    <div>
                        <h4 class="text-xs font-medium text-gray-500 mb-2">Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</h4>
                        <div class="space-y-2">
                            <a href="tel:+201234567890" class="block py-2 px-3 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 text-sm flex items-center">
                                <span class="mr-2">ğŸ“</span>
                                Ø§ØªØµÙ„ Ø¨Ù†Ø§
                            </a>
                            <a href="pages/contact-us.html" class="block py-2 px-3 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-all duration-200 text-sm flex items-center">
                                <span class="mr-2">ğŸ“§</span>
                                Ø±Ø§Ø³Ù„Ù†Ø§
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© -->
                <div class="border-b border-gray-200 pb-3">
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>
                    <div class="space-y-2">
                        <a href="javascript:void(0)" onclick="scrollToProductRequestSection()" class="block py-2 px-3 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200 text-sm flex items-center">
                            <span class="mr-2">â•</span>
                            Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ
                        </a>
                    </div>
                </div>
                
                <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© (Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹) -->
                <div class="border-b border-gray-200 pb-3 hidden" id="admin-menu-mobile">
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
                    <div class="space-y-2">
                        <a href="admin/admin-dashboard.html" class="block py-2 px-3 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 text-sm flex items-center">
                            <span class="mr-2">âš™ï¸</span>
                            Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
                        </a>
                    </div>
                </div>
                
                <!-- Mobile Auth Buttons -->
                <div class="auth-buttons-mobile border-t border-gray-200 pt-2 mt-2">
                    <!-- Auth buttons will be dynamically updated -->
                </div>
            </div>
        </div>
    </header>

    <!-- Global Error Banner - Will be moved to below the form -->

    <!-- Hero Section -->
    <div class="relative overflow-hidden">
        <div id="hero-carousel" class="hero-image transition-all duration-700 ease-in-out flex items-center justify-center" style="background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);">
            <!-- Carousel content will be dynamically loaded -->
        </div>
        
        <!-- Carousel Indicators -->
        <div id="carousel-indicators" class="absolute bottom-4 left-0 right-0 flex justify-center space-x-2 space-x-reverse">
            <!-- Indicators will be dynamically generated -->
        </div>
    </div>







    <!-- Browse Categories -->
    <section class="container mx-auto px-4 py-12">
        <h2 class="text-3xl font-bold mb-8 text-center gold-text">ØªØµÙØ­ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</h2>
        
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
            <!-- Koshat Category -->
                            <a href="pages/category-koshat.html" class="group">
                <div class="relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                    <img src="assets/images/koshat.jpg" 
                         alt="ÙƒÙˆØ´Ø§Øª" 
                         class="w-full h-48 md:h-80 object-cover object-center group-hover:scale-110 transition-transform duration-300" loading="lazy">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 right-0 p-3 md:p-6 text-white">
                        <h3 class="text-lg md:text-xl font-bold mb-1 md:mb-2">ÙƒÙˆØ´Ø§Øª</h3>
                        <p class="text-xs md:text-sm opacity-90">ØªØµØ§Ù…ÙŠÙ… ÙØ±ÙŠØ¯Ø© Ù„Ø­ÙÙ„Ø§ØªÙƒÙ…</p>
                    </div>
                </div>
            </a>

            <!-- Cake Category -->
                            <a href="pages/category-cake.html" class="group">
                <div class="relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                    <img src="assets/images/cake.jpg" 
                         alt="ØªÙˆØ±ØªØ©" 
                         class="w-full h-48 md:h-80 object-cover object-center group-hover:scale-110 transition-transform duration-300" loading="lazy">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 right-0 p-3 md:p-6 text-white">
                        <h3 class="text-lg md:text-xl font-bold mb-1 md:mb-2">ØªÙˆØ±ØªØ§Øª ÙˆØ´ÙƒÙˆÙ„Ø§ØªØ§Øª</h3>
                        <p class="text-xs md:text-sm opacity-90">ØªÙˆØ±ØªØ§Øª ÙˆØ´ÙƒÙˆÙ„Ø§ØªØ§Øª Ù…Ø®ØµØµØ© ÙˆÙ…Ù…ÙŠØ²Ø©</p>
                    </div>
                </div>
            </a>

            <!-- Mirror Category -->
                            <a href="pages/category-mirr.html" class="group">
                <div class="relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                                          <img src="assets/images/sarah-penney-1Yk6CJyIjE8-unsplash.jpg"  
                         alt="Ù…Ø±Ø§ÙŠØ§ Ø°Ù‡Ø¨ÙŠØ© Ù…Ø²Ø®Ø±ÙØ©" 
                         class="w-full h-48 md:h-80 object-cover object-center group-hover:scale-110 transition-transform duration-300" loading="lazy">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 right-0 p-3 md:p-6 text-white">
                        <h3 class="text-lg md:text-xl font-bold mb-1 md:mb-2">Ù…Ø±Ø§ÙŠØ§</h3>
                        <p class="text-xs md:text-sm opacity-90">Ù…Ø±Ø§ÙŠØ§ Ù…Ø²Ø®Ø±ÙØ© ÙˆØ£Ù†ÙŠÙ‚Ø©</p>
                    </div>
                </div>
            </a>

            <!-- Other Category -->
                            <a href="pages/category-other.html" class="group">
                <div class="relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                    <img src="assets/images/decorations.jpg" 
                         alt="Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©" 
                         class="w-full h-48 md:h-80 object-cover object-center group-hover:scale-110 transition-transform duration-300" loading="lazy">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 right-0 p-3 md:p-6 text-white">
                        <h3 class="text-lg md:text-xl font-bold mb-1 md:mb-2">Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©</h3>
                        <p class="text-xs md:text-sm opacity-90 mb-2">Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø© ÙˆÙ…Ù…ÙŠØ²Ø©</p>
                        <div class="text-xs opacity-80 space-y-1">
                            <div>ğŸˆ Ø¯ÙŠÙƒÙˆØ± Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯</div>
                            <div>ğŸ¥ Ø¯ÙŠÙƒÙˆØ± Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ù…Ø³ØªØ´ÙÙ‰</div>
                            <div>ğŸ‘° Ø¯ÙŠÙƒÙˆØ± Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¹Ø±ÙˆØ³Ø©</div>
                            <div>ğŸ‰ Ø¯ÙŠÙƒÙˆØ± Ø­ÙÙ„Ø§Øª Ø¨Ø³ÙŠØ·Ø©</div>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Invitations Category -->
            <a href="pages/category-invitations.html" class="group">
                <div class="relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                    <img src="assets/images/f.jpg" 
                         alt="Ø¯Ø¹ÙˆØ§Øª Ø§Ù„Ø£ÙØ±Ø§Ø­ ÙˆØ§Ù„Ø®Ø·ÙˆØ¨Ø©" 
                         class="w-full h-48 md:h-80 object-cover object-center group-hover:scale-110 transition-transform duration-300" loading="lazy">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 right-0 p-3 md:p-6 text-white">
                                                    <h3 class="text-lg md:text-xl font-bold mb-1 md:mb-2">Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª</h3>
                        <p class="text-xs md:text-sm opacity-90 mb-2">Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª</p>
                        <div class="text-xs opacity-80 space-y-1">
                            <div>ğŸ’’ Ø¯Ø¹ÙˆØ© Ø²ÙØ§Ù</div>
                            <div>ğŸ’ Ø¯Ø¹ÙˆØ© Ø®Ø·ÙˆØ¨Ø©</div>
                            <div>ğŸ« ØªÙˆØ²ÙŠØ¹Ø§Øª Ø¨Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©</div>
                            <div>ğŸŒ¸ ØªÙˆØ²ÙŠØ¹Ø§Øª Ø¨Ø§Ù„Ø¨Ø±ÙØ§Ù†</div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </section>

    <!-- Featured Products -->
    <section id="featured-products" class="container mx-auto px-4 py-12">
        <h2 class="text-2xl font-bold mb-6 text-center gold-text">Ù…Ù†ØªØ¬Ø§Øª Ù…Ù…ÙŠØ²Ø©</h2>
        
        <!-- Loading Indicator -->
        <div id="products-loading" class="text-center py-8">
            <div class="inline-flex items-center space-x-2 space-x-reverse">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"></div>
                <span class="text-gray-600">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</span>
            </div>
        </div>
        
        <!-- Search Results Count -->
        <div id="search-results-count" class="text-center mb-4 text-gray-600"></div>
        
        <!-- Products Grid -->
        <div id="featured-products-grid" class="flex flex-nowrap overflow-x-auto gap-4 md:gap-6 pb-4">
            <!-- Products will be loaded dynamically -->
        </div>
        
        <!-- No Products Message -->
        <div id="no-products-message" class="text-center py-12 hidden">
            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                </svg>
            </div>
            <h3 class="text-lg font-bold text-gray-700 mb-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ§Ø­Ø©</h3>
            <p class="text-gray-500">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
        </div>

        <!-- Recommended Products Section -->
        <div class="mt-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold mb-4 gold-text">Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø¯ ØªÙØ¹Ø¬Ø¨Ùƒ</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    Ø§ÙƒØªØ´Ù Ù…Ù†ØªØ¬Ø§Øª Ù…Ù…ÙŠØ²Ø© ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡Ø§ Ø®ØµÙŠØµØ§Ù‹ Ù„Ùƒ
                </p>
            </div>
            
            <div id="recommended-products-grid" class="flex flex-nowrap overflow-x-auto gap-4 md:gap-6 pb-4">
                <!-- Recommended products will be loaded dynamically -->
            </div>
            
            <!-- Loading state for recommended products -->
            <div id="recommended-loading" class="text-center py-8">
                <div class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-gray-600">
                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span class="text-gray-600">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§...</span>
                </div>
            </div>
            
            <!-- No recommended products message -->
            <div id="no-recommended-message" class="text-center py-12 hidden">
                <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                </div>
                <h3 class="text-lg font-bold text-gray-700 mb-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                <p class="text-gray-500">Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
            </div>
        </div>
    </section>

    <!-- Advertise Section -->
    <section class="bg-gradient-to-r from-yellow-50 to-pink-50 py-16">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6">Ø£Ø¹Ù„Ù† Ù…Ø¹Ù†Ø§ ÙˆØ²Ø¯ Ù…Ù† Ù…Ø¨ÙŠØ¹Ø§ØªÙƒ</h2>
                <p class="text-xl text-gray-600 mb-8">
                    Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† ØªØ¸Ù‡Ø± Ù…Ù†ØªØ¬Ø§ØªÙƒ ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ø¨Ø§Ø±Ø²Ø©ØŸ Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© ÙˆÙˆØµÙ„ Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯Ø¯
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Ø¸Ù‡ÙˆØ± Ù…Ù…ÙŠØ²</h3>
                        <p class="text-gray-600">ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØµÙØ­Ø§Øª Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</p>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-6 h-6 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Ø¬Ù…Ù‡ÙˆØ± Ø£ÙƒØ¨Ø±</h3>
                        <p class="text-gray-600">ÙˆØµÙ„ Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯Ø¯ ÙˆÙ…Ù‡ØªÙ…ÙŠÙ†</p>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Ù†ØªØ§Ø¦Ø¬ Ù…Ø¶Ù…ÙˆÙ†Ø©</h3>
                        <p class="text-gray-600">Ø²ÙŠØ§Ø¯Ø© ÙÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø¨Ù†Ø³Ø¨Ø© ØªØµÙ„ Ø¥Ù„Ù‰ 300%</p>
                    </div>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="pages/advertise-with-us.html#contact" class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:from-yellow-600 hover:to-yellow-700 transform hover:scale-105 transition-all duration-200">
                        Ø§Ø¨Ø¯Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø¢Ù†
                    </a>
                    <a href="pages/advertise-with-us.html#features" class="bg-white text-gray-700 px-8 py-4 rounded-lg text-lg font-semibold border-2 border-gray-200 hover:border-yellow-500 transition-colors">
                        ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="bg-white py-12">
        <div class="container mx-auto px-4">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold mb-4 gold-text">Ø¹Ù† Ø²ÙÙŠÙ†ÙØ©</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    Ø²ÙÙŠÙ†ÙØ© Ù‡ÙŠ ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø­ÙÙ„Ø§Øª Ø§Ù„Ø®Ø·ÙˆØ¨Ø©. Ù†Ù‚Ø¯Ù… Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ØªÙ†ÙˆØ¹Ø© Ù…Ù† Ø§Ù„ÙƒÙˆØ´Ø§Øª ÙˆØ§Ù„Ø­Ù„ÙˆÙŠØ§Øª ÙˆØ§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø¨Ø£Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-pink-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©</h3>
                    <p class="text-gray-600">Ù†Ø®ØªØ§Ø± Ø£ÙØ¶Ù„ Ø§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ£Ø¬ÙˆØ¯Ù‡Ø§ Ù„Ø¶Ù…Ø§Ù† Ø±Ø¶Ø§Ùƒ Ø§Ù„ØªØ§Ù…</p>
                </div>
                
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2">ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹</h3>
                    <p class="text-gray-600">Ù†Ø¶Ù…Ù† ÙˆØµÙˆÙ„ Ø·Ù„Ø¨Ùƒ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙˆØ¨Ø£ÙØ¶Ù„ Ø­Ø§Ù„Ø©</p>
                </div>
                
                <div class="text-center">
                    <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                        </svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Ø®Ø¯Ù…Ø© Ù…ØªÙ…ÙŠØ²Ø©</h3>
                    <p class="text-gray-600">ÙØ±ÙŠÙ‚ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…ØªØ§Ø­ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Request Section -->
    <section id="product-request-section" class="bg-gray-50 py-12">
        <div class="container mx-auto px-4">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold mb-4 gold-text">Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ù…Ù†ØªØ¬Ø§Øª Ø¬Ù…ÙŠÙ„Ø© ØªØ±ÙŠØ¯ Ø¹Ø±Ø¶Ù‡Ø§ØŸ Ø£Ø±Ø³Ù„ Ù„Ù†Ø§ Ø·Ù„Ø¨ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ÙˆØ³Ù†Ù‚ÙˆÙ… Ø¨Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ ÙˆØ¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ù…ÙˆÙ‚Ø¹
                </p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <form id="product-request-form" class="bg-white rounded-2xl shadow-xl p-8" novalidate>
                    <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ -->
                    <div class="mb-8">
                        <h3 class="text-xl font-bold mb-4 text-gray-800">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="request-description" class="block text-sm font-medium text-gray-700 mb-2">ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬ <span class="text-red-500">*</span></label>
                                <textarea id="request-description" name="description" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" rows="4" placeholder="Ø§ÙƒØªØ¨ ÙˆØµÙØ§Ù‹ Ù…ÙØµÙ„Ø§Ù‹ Ù„Ù„Ù…Ù†ØªØ¬..."></textarea>
                                <div id="request-description-error" class="validation-error hidden"></div>
                            </div>
                            
                            <div>
                                <label for="request-price" class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø³Ø¹Ø± (Ø¬.Ù…)</label>
                                <input type="number" id="request-price" name="price" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="0" min="0" step="0.01">
                                <p class="text-xs text-gray-500 mt-1">Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¹Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨</p>
                            </div>
                        </div>
                        
                                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                                    <div>
                                        <label for="request-category" class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ <span class="text-red-500">*</span></label>
                                        <select id="request-category" name="category" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                                            <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ</option>
                                            <option value="koshat">ÙƒÙˆØ´Ø§Øª</option>
                                            <option value="mirr">Ù…Ø±Ø§ÙŠØ§</option>
                                            <option value="cake">ØªÙˆØ±ØªØ§Øª ÙˆØ´ÙƒÙˆÙ„Ø§ØªØ§Øª</option>
                                            <option value="other">Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©</option>
                                            <option value="invitations">Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª</option>
                                        </select>
                                        <div id="request-category-error" class="validation-error hidden"></div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø© <span class="text-red-500">*</span></label>
                                        <div class="simple-governorate-filter">
                                            <div class="filter-dropdown">
                                                <button type="button" id="request-governorate-dropdown-btn" class="dropdown-btn">
                                                    <span id="request-governorate-placeholder">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª</span>
                                                    <svg class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                        <polyline points="6,9 12,15 18,9"></polyline>
                                                    </svg>
                                                </button>
                                                <div id="request-governorate-dropdown-content" class="dropdown-content hidden">
                                                    <div class="governorate-options">
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ø¬ÙŠØ²Ø©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ø¬ÙŠØ²Ø©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ø´Ø±Ù‚ÙŠØ©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„ØºØ±Ø¨ÙŠØ©" class="governorate-checkbox">
                                                            <span>Ø§Ù„ØºØ±Ø¨ÙŠØ©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ø¨Ø­ÙŠØ±Ø©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ø¨Ø­ÙŠØ±Ø©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®" class="governorate-checkbox">
                                                            <span>ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø¯Ù…ÙŠØ§Ø·" class="governorate-checkbox">
                                                            <span>Ø¯Ù…ÙŠØ§Ø·</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ù…Ù†ÙŠØ§" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ù…Ù†ÙŠØ§</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø£Ø³ÙŠÙˆØ·" class="governorate-checkbox">
                                                            <span>Ø£Ø³ÙŠÙˆØ·</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø³ÙˆÙ‡Ø§Ø¬" class="governorate-checkbox">
                                                            <span>Ø³ÙˆÙ‡Ø§Ø¬</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ù‚Ù†Ø§" class="governorate-checkbox">
                                                            <span>Ù‚Ù†Ø§</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ø£Ù‚ØµØ±" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ø£Ù‚ØµØ±</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø£Ø³ÙˆØ§Ù†" class="governorate-checkbox">
                                                            <span>Ø£Ø³ÙˆØ§Ù†</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ" class="governorate-checkbox">
                                                            <span>Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„ÙÙŠÙˆÙ…" class="governorate-checkbox">
                                                            <span>Ø§Ù„ÙÙŠÙˆÙ…</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯" class="governorate-checkbox">
                                                            <span>Ø§Ù„ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ù…Ø·Ø±ÙˆØ­" class="governorate-checkbox">
                                                            <span>Ù…Ø·Ø±ÙˆØ­</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡" class="governorate-checkbox">
                                                            <span>Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡" class="governorate-checkbox">
                                                            <span>Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡</span>
                                                        </label>
                                                        <label class="governorate-option">
                                                            <input type="checkbox" value="Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±" class="governorate-checkbox">
                                                            <span>Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±</span>
                                                        </label>
                                                    </div>
                                                    <div class="dropdown-actions">
                                                        <button type="button" id="request-select-all-governorates" class="action-btn">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
                                                        <button type="button" id="request-clear-all-governorates" class="action-btn">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙ„</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="request-selected-governorates" class="selected-governorates mt-2"></div>
                                            <div id="request-governorate-error" class="validation-error hidden"></div>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø­Ø§ÙØ¸Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ù…ØªÙˆÙØ± ÙÙŠ Ø¹Ø¯Ø© Ù…Ø­Ø§ÙØ¸Ø§Øª</p>
                                    </div>
                                </div>
                                
                                <!-- Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ -->
                                <div class="mt-6" id="request-subcategory-group" style="display: none;">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ <span class="text-red-500">*</span></label>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3" id="request-subcategory-options">
                                        <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                    </div>
                                    <div id="request-subcategory-error" class="validation-error hidden"></div>
                                    <p class="text-xs text-gray-500 mt-1">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨</p>
                                </div>
                                
                                <!-- Ø§Ù„Ù…Ù†Ø§Ø·Ù‚/Ø§Ù„Ù…Ø¯Ù† -->
                                <div class="mt-6" id="request-cities-group" style="display: none;">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ù…Ù†Ø§Ø·Ù‚/Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…ØªÙˆÙØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                                    <div id="request-cities-container">
                                        <div class="cities-filter-container">
                                            <div class="cities-header">
                                                <div class="cities-trigger" id="request-cities-trigger">
                                                    <div class="trigger-content">
                                                        <svg class="location-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                                            <circle cx="12" cy="10" r="3"></circle>
                                                        </svg>
                                                        <span class="trigger-text">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø§Ø·Ù‚/Ø§Ù„Ù…Ø¯Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</span>
                                                        <span class="selected-count" id="request-cities-selected-count"></span>
                                                    </div>
                                                    <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                        <polyline points="6,9 12,15 18,9"></polyline>
                                                    </svg>
                                                </div>
                                            </div>
                                            
                                            <div class="cities-dropdown" id="request-cities-dropdown">
                                                <div class="dropdown-header">
                                                    <div class="search-container">
                                                        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <circle cx="11" cy="11" r="8"></circle>
                                                            <path d="m21 21-4.35-4.35"></path>
                                                        </svg>
                                                        <input type="text" id="request-cities-search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†Ø·Ù‚Ø©..." class="search-input">
                                                    </div>
                                                    <div class="actions">
                                                        <button type="button" id="request-select-all-cities-btn" class="action-btn">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
                                                        <button type="button" id="request-clear-all-cities-btn" class="action-btn">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙ„</button>
                                                    </div>
                                                </div>
                                                
                                                <div class="cities-list" id="request-cities-list">
                                                    <!-- Ø§Ù„Ù…Ø¯Ù† Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                                </div>
                                                
                                                <div class="dropdown-footer">
                                                    <button type="button" id="request-apply-cities-filter" class="apply-btn">
                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <polyline points="20,6 9,17 4,12"></polyline>
                                                        </svg>
                                                        ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="request-selected-cities" class="selected-cities"></div>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø£Ùˆ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…ØªÙˆÙØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - ÙŠÙ…ÙƒÙ†Ùƒ ØªØ®Ø·ÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„)</p>
                                </div>
                    </div>
                    
                    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ -->
                    <div class="mb-8">
                        <h3 class="text-xl font-bold mb-4 text-gray-800">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ <span class="text-red-500">*</span></label>
                            <p class="text-sm text-gray-500 mb-3">ÙŠØ¬Ø¨ Ù…Ù„Ø¡ Ø­Ù‚Ù„ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label for="request-whatsapp" class="block text-sm font-medium text-gray-600 mb-2">Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</label>
                                    <input type="tel" id="request-whatsapp" name="whatsapp" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="+20 123 456 7890">
                                    <div id="request-whatsapp-error" class="validation-error hidden"></div>
                                </div>
                                
                                <div>
                                                                    <label for="request-facebook" class="block text-sm font-medium text-gray-600 mb-2">Ø±Ø§Ø¨Ø· ÙÙŠØ³Ø¨ÙˆÙƒ</label>
                                <input type="url" id="request-facebook" name="facebook" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="https://facebook.com/username">
                                <p class="text-xs text-gray-500 mt-1">ÙŠÙ‚Ø¨Ù„ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙÙŠØ³ Ø¨ÙˆÙƒ: ØµÙØ­Ø§ØªØŒ Ù…Ø¬Ù…ÙˆØ¹Ø§ØªØŒ Ø£Ø­Ø¯Ø§Ø«ØŒ Ù…Ù†Ø´ÙˆØ±Ø§ØªØŒ ØµÙˆØ±ØŒ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŒ hashtagsØŒ Ø±ÙˆØ§Ø¨Ø· Ù‚ØµÙŠØ±Ø© (fb.me)</p>
                                <div id="request-facebook-error" class="validation-error hidden"></div>
                                </div>
                                
                                <div>
                                    <label for="request-instagram" class="block text-sm font-medium text-gray-600 mb-2">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</label>
                                    <input type="text" id="request-instagram" name="instagram" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="username">
                                    <div id="request-instagram-error" class="validation-error hidden"></div>
                                </div>
                            </div>
                            
                            <div id="social-media-error" class="validation-error hidden mt-2">
                                ÙŠØ¬Ø¨ Ù…Ù„Ø¡ Ø­Ù‚Ù„ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ù† ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ
                            </div>
                        </div>
                    </div>
                    
                                                    <!-- Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± -->
                                <div class="mb-8">
                                    <h3 class="text-xl font-bold mb-4 text-gray-800">ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬</h3>
                                    
                                    <!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙˆØ± -->
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-sm text-gray-600">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©:</span>
                                        <span id="image-counter" class="text-sm font-semibold text-green-500">0/3</span>
                                    </div>
                                    
                                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-yellow-500 transition-colors" id="request-upload-area">
                                        <input type="file" id="request-image-upload" multiple accept="image/*" class="hidden">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                        </svg>
                                        <p class="text-lg font-medium text-gray-600 mb-2">Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø¶ØºØ· Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</p>
                                        <p class="text-sm text-gray-500">ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ 3 ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰ - Ø³ÙŠØªÙ… Ø¶ØºØ· Ø§Ù„ØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø­Ø©</p>
                                    </div>
                                    
                                    <div id="request-image-preview" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
                                        <div class="image-sort-instructions mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg col-span-2 md:col-span-4">
                                            <div class="flex items-center text-blue-700">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4" />
                                                </svg>
                                                <span class="text-sm font-medium">Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ù„ØªØ±ØªÙŠØ¨Ù‡Ø§ - Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø³ØªÙƒÙˆÙ† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                                            </div>
                                        </div>
                                        <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ± Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                                        </div>
                </div>
                    
                    <!-- Global Error Banner - Below the form, above submit button -->
                    <div id="global-error-banner" class="hidden mb-6 bg-red-600 text-white rounded-lg shadow-lg">
                        <div class="p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <svg class="w-6 h-6 text-white flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                    </svg>
                                    <div>
                                        <h3 class="font-semibold text-lg">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</h3>
                                        <p class="text-sm opacity-90">Ù‡Ù†Ø§Ùƒ Ø­Ù‚ÙˆÙ„ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡. ÙŠÙØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ø³ÙÙ„ ÙƒÙ„ Ø­Ù‚Ù„.</p>
                                    </div>
                                </div>
                                <button id="close-error-banner" class="text-white hover:text-red-200 transition-colors p-2 rounded-lg hover:bg-red-700">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    
                    <!-- Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ -->
                    <div class="text-center">
                        <button type="submit" class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:from-yellow-600 hover:to-yellow-700 transform hover:scale-105 transition-all duration-200">
                            Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="font-bold text-lg mb-4">Ø²ÙÙŠÙ†ÙØ©</h3>
                    <p class="text-gray-300">ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø­ÙÙ„Ø§Øª Ø§Ù„Ø®Ø·ÙˆØ¨Ø©</p>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-300 hover:text-white">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                        <li><a href="pages/about-us.html" class="text-gray-300 hover:text-white">Ù…Ù† Ù†Ø­Ù†</a></li>
                        <li><a href="pages/contact-us.html" class="text-gray-300 hover:text-white">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
                        <li><a href="pages/advertise-with-us.html" class="text-yellow-400 hover:text-yellow-300 font-medium">â­ Ø£Ø¹Ù„Ù† Ù…Ø¹Ù†Ø§</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Ø§Ù„ÙØ¦Ø§Øª</h4>
                    <ul class="space-y-2">
                        <li><a href="pages/category-koshat.html" class="text-gray-300 hover:text-white">ÙƒÙˆØ´Ø§Øª</a></li>
                        <li><a href="pages/category-mirr.html" class="text-gray-300 hover:text-white">Ù…Ø±Ø§ÙŠØ§</a></li>
                        <li><a href="pages/category-cake.html" class="text-gray-300 hover:text-white">ØªÙˆØ±ØªØ§Øª ÙˆØ´ÙƒÙˆÙ„Ø§ØªØ§Øª</a></li>
                        <li><a href="pages/category-other.html" class="text-gray-300 hover:text-white">Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©</a></li>
                        <li><a href="pages/category-invitations.html" class="text-gray-300 hover:text-white">Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª</h4>
                    <ul class="space-y-2">
                        <li><a href="legal/privacy-policy.html" class="text-gray-300 hover:text-white">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a></li>
                        <li><a href="legal/terms-of-use.html" class="text-gray-300 hover:text-white">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a></li>
                        <li><a href="legal/cookies-policy.html" class="text-gray-300 hover:text-white">Ø³ÙŠØ§Ø³Ø© Ø§Ù„ÙƒÙˆÙƒÙŠØ²</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h4>
                    <div class="space-y-2">
                        <p class="text-gray-300">Ø§Ù„Ù‡Ø§ØªÙ: 01016436007</p>
                        <p class="text-gray-300">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: amrreda1945@outlook.sa</p>
                        <div class="flex space-x-4 space-x-reverse mt-4">
                            <a href="#" class="text-gray-300 hover:text-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                                </svg>
                            </a>
                            <a href="#" class="text-gray-300 hover:text-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                                </svg>
                            </a>
                            <a href="#" class="text-gray-300 hover:text-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-300">&copy; 2024 Ø²ÙÙŠÙ†ÙØ©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
            </div>
        </div>
    </footer>

    <!-- Custom Sign Out Confirmation Modal -->
    <div id="signout-confirm-modal" class="custom-modal-overlay">
        <div class="custom-modal-content">
            <div class="custom-modal-icon warning">
                âš ï¸
            </div>
            <h3 class="custom-modal-title">ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</h3>
            <p class="custom-modal-message">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ Ø³ÙŠØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø¬Ù„Ø³ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©.</p>
            <div class="custom-modal-buttons">
                <button class="custom-modal-btn cancel" onclick="closeSignOutModal()">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="custom-modal-btn confirm" onclick="proceedSignOut()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </div>

    <!-- Custom Success Modal -->
    <div id="signout-success-modal" class="custom-modal-overlay">
        <div class="custom-modal-content">
            <div class="custom-modal-icon success">
                âœ…
            </div>
            <h3 class="custom-modal-title">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­</h3>
            <p class="custom-modal-message">Ø³ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©...</p>
            <div class="custom-modal-buttons">
                <button class="custom-modal-btn success" onclick="redirectToHome()">Ø­Ø³Ù†Ø§Ù‹</button>
            </div>
        </div>
    </div>



            <script>
            // Global variables
            let allProducts = [];
            let currentFilter = 'all';
            
            // UI Helper for managing navigation and UI updates
            const UIHelper = {
                // Update navigation based on user authentication and admin status
                async updateNavigation() {
                    try {
                        // Wait for AuthService to be available
                        if (!window.AuthService) {
                            console.log('â³ Waiting for AuthService to load...');
                            await new Promise((resolve) => {
                                const checkInterval = setInterval(() => {
                                    if (window.AuthService) {
                                        clearInterval(checkInterval);
                                        console.log('âœ… AuthService loaded');
                                        resolve();
                                    }
                                }, 100);
                                
                                setTimeout(() => {
                                    clearInterval(checkInterval);
                                    console.error('âŒ AuthService not loaded after 5 seconds');
                                    resolve();
                                }, 5000);
                            });
                        }
                        
                        if (!window.AuthService) {
                            console.error('âŒ AuthService not available');
                            return;
                        }
                        
                        const isLoggedIn = await window.AuthService.isLoggedIn();
                        const user = await window.AuthService.getCurrentUser();
                        
                        // Check if user is admin
                        let isAdmin = false;
                        if (isLoggedIn && user) {
                            try {
                                // Check user role from database
                                const { data: userProfile, error } = await window.supabaseClient
                                    .from('users')
                                    .select('role')
                                    .eq('id', user.id)
                                    .single();
                                
                                if (!error && userProfile) {
                                    isAdmin = userProfile.role === 'admin';
                                }
                            } catch (error) {
                                console.error('Error checking admin status:', error);
                            }
                        }
                        
                        // Update desktop navigation - Show admin dashboard button in header
                        const adminDashboardBtnDesktop = document.getElementById('admin-dashboard-btn-desktop');
                        if (adminDashboardBtnDesktop) {
                            if (isAdmin) {
                                adminDashboardBtnDesktop.classList.remove('hidden');
                                console.log('âœ… Admin dashboard button shown in desktop header');
                            } else {
                                adminDashboardBtnDesktop.classList.add('hidden');
                            }
                        }
                        
                        // Update mobile navigation - Show admin dashboard button in header
                        const adminDashboardBtnMobile = document.getElementById('admin-dashboard-btn-mobile');
                        if (adminDashboardBtnMobile) {
                            if (isAdmin) {
                                adminDashboardBtnMobile.classList.remove('hidden');
                                console.log('âœ… Admin dashboard button shown in mobile header');
                            } else {
                                adminDashboardBtnMobile.classList.add('hidden');
                            }
                        }
                        
                        // Update mobile menu - Show admin section
                        const adminMenuMobile = document.getElementById('admin-menu-mobile');
                        if (adminMenuMobile) {
                            if (isAdmin) {
                                adminMenuMobile.classList.remove('hidden');
                                console.log('âœ… Admin menu shown in mobile menu');
                            } else {
                                adminMenuMobile.classList.add('hidden');
                            }
                        }
                        
                        // Mobile navigation is now handled by the buttons in header
                        
                        console.log('âœ… Navigation updated successfully');
                    } catch (error) {
                        console.error('âŒ Error updating navigation:', error);
                    }
                },
                
                // Show success message
                showSuccess(message) {
                    console.log('âœ… Success:', message);
                    
                    // Create success notification
                    const successDiv = document.createElement('div');
                    successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                    successDiv.innerHTML = `
                        <div class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                            ${message}
                        </div>
                    `;
                    document.body.appendChild(successDiv);
                    
                    // Remove after 3 seconds
                    setTimeout(() => {
                        successDiv.remove();
                    }, 3000);
                }
            };
            

        

            
            // Confirm sign out function
            function confirmSignOut() {
                document.getElementById('signout-confirm-modal').classList.add('active');
            }
            
            // Close sign out confirmation modal
            function closeSignOutModal() {
                document.getElementById('signout-confirm-modal').classList.remove('active');
            }
            
            // Proceed with sign out
            async function proceedSignOut() {
                closeSignOutModal();
                await handleSignOut();
            }
            
            // Show success modal and redirect
            function showSignOutSuccess() {
                document.getElementById('signout-success-modal').classList.add('active');
            }
            
            // Redirect to home page
            function redirectToHome() {
                window.location.href = 'index.html';
            }
            
            // Global sign out function
            async function handleSignOut() {
                try {
                    // Wait for AuthService to be available
                    if (!window.AuthService) {
                        console.error('âŒ AuthService not available');
                        alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©');
                        return;
                    }
                    
                    const result = await window.AuthService.signOut();
                    if (result.success) {
                        showSignOutSuccess();
                        // Redirect after 2 seconds
                        setTimeout(() => {
                            redirectToHome();
                        }, 2000);
                    } else {
                        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬: ' + (result.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));
                    }
                } catch (error) {
                    console.error('Sign out error:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬: ' + error.message);
                }
            }
            
        // Update favorites count badge
        function updateFavoritesCountBadge() {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const count = favorites.length;
            
            console.log('ğŸ”„ Updating favorites count badge:', count);
            console.log('ğŸ“‹ Favorites:', favorites);
            
            // Update all badges
            const badges = [
                'favorites-count-badge',
                'favorites-count-badge-mobile',
                'favorites-count-badge-auth',
                'favorites-count-badge-mobile-auth',
                'favorites-count-badge-desktop'
            ];
            
            badges.forEach(badgeId => {
                const badge = document.getElementById(badgeId);
                if (badge) {
                    console.log(`âœ… Found badge: ${badgeId}`);
                    if (count > 0) {
                        badge.textContent = count;
                        badge.classList.remove('hidden');
                        console.log(`ğŸ“Š Updated ${badgeId} to show: ${count}`);
                    } else {
                        badge.classList.add('hidden');
                        console.log(`ğŸ“Š Hidden ${badgeId} (count: 0)`);
                    }
                } else {
                    console.log(`âŒ Badge not found: ${badgeId}`);
                }
            });
        }

        // Update auth buttons (mobile and desktop)
        async function updateMobileAuthButtons() {
                // Wait for AuthService to be available
                if (!window.AuthService) {
                    console.log('â³ Waiting for AuthService to load...');
                    await new Promise((resolve) => {
                        const checkInterval = setInterval(() => {
                            if (window.AuthService) {
                                clearInterval(checkInterval);
                                console.log('âœ… AuthService loaded');
                                resolve();
                            }
                        }, 100);
                        
                        setTimeout(() => {
                            clearInterval(checkInterval);
                            console.error('âŒ AuthService not loaded after 5 seconds');
                            resolve();
                        }, 5000);
                    });
                }
                
                if (!window.AuthService) {
                    console.error('âŒ AuthService not available');
                    return;
                }
                
                const isLoggedIn = await window.AuthService.isLoggedIn();
                const user = await window.AuthService.getCurrentUser();
                const mobileAuthButtons = document.querySelector('.auth-buttons-mobile');
                const desktopAuthButtons = document.querySelector('.auth-buttons');
                
                
                // Update mobile auth buttons
                if (mobileAuthButtons) {
                    if (isLoggedIn) {
                        mobileAuthButtons.innerHTML = `
                            <span class="block py-2 text-gray-700">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${user?.user_metadata?.full_name || user?.email}</span>
                            <button onclick="confirmSignOut()" class="block py-2 text-red-600 font-medium">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
                        `;
            
                    } else {
                        mobileAuthButtons.innerHTML = `
                            <!-- ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„Ø£Ù†Ù‡Ø§ Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± -->
                        `;
            
                    }
                }
                
                // Update desktop auth buttons
                if (desktopAuthButtons) {
                    if (isLoggedIn) {
                        desktopAuthButtons.innerHTML = `
                            <span class="text-gray-700 mr-2">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${user?.user_metadata?.full_name || user?.email}</span>
                            <button onclick="confirmSignOut()" class="px-6 py-2 text-red-600 border-2 border-red-600 rounded-full font-medium hover:bg-red-600 hover:text-white transition-all">
                                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                            </button>
                        `;
            
                    } else {
                        desktopAuthButtons.innerHTML = `
                            <!-- ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
                        `;
            
                    }
                }
                
                // Update navigation (including admin button)
                await UIHelper.updateNavigation();
                
                // Update favorites count badge
                updateFavoritesCountBadge();
            }
            
            // Load and display products
            async function loadProducts() {
                try {
                    console.log('ğŸ¯ loadProducts() called - Starting to load featured advertisements...');
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    const loadingIndicator = document.getElementById('products-loading');
                    const productsGrid = document.getElementById('featured-products-grid');
                    const noProductsMessage = document.getElementById('no-products-message');
                    
                    if (loadingIndicator) {
                        loadingIndicator.style.display = 'block';
                        console.log('ğŸ“± Loading indicator shown');
                    }
                    if (productsGrid) {
                        productsGrid.style.display = 'none';
                        console.log('ğŸ“± Products grid hidden');
                    }
                    if (noProductsMessage) {
                        noProductsMessage.style.display = 'none';
                        console.log('ğŸ“± No products message hidden');
                    }
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                    if (!window.advertisingService) {
                        console.error('âŒ AdvertisingService not available!');
                        throw new Error('AdvertisingService not available');
                    }
                    
                    console.log('âœ… AdvertisingService is available, proceeding...');
                    
                    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©
                    console.log('ğŸ” Calling advertisingService.getFeaturedProducts(8)...');
                    const featuredAds = await window.advertisingService.getFeaturedProducts(8);
                    console.log('ğŸ“Š Featured advertisements result:', featuredAds);
                    console.log('ğŸ“Š Featured advertisements length:', featuredAds ? featuredAds.length : 'null');
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    if (loadingIndicator) {
                        loadingIndicator.style.display = 'none';
                        console.log('ğŸ“± Loading indicator hidden');
                    }
                    
                    if (featuredAds && featuredAds.length > 0) {
                        console.log(`âœ… Successfully loaded ${featuredAds.length} featured advertisements`);
                        
                        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                        allProducts = featuredAds;
                        console.log('ğŸ“¦ allProducts set to:', allProducts);
                        
                        // Ø®Ù„Ø· Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
                        shuffleProducts();
                        console.log(`ğŸ”„ After shuffle: ${allProducts.length} products`);
                        
                        // Ø¬Ø¹Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹ Ù„Ù„Ù†Ø¸Ø§Ù…
                        window.allProducts = allProducts;
                        console.log('ğŸŒ window.allProducts set');
                        
                        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±
                        applyFilter(currentFilter);
                        console.log('ğŸ” Filter applied');
                        
                        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø¨ÙƒØ©
                        if (productsGrid) {
                            productsGrid.style.display = 'flex';
                            console.log('ğŸ“± Products grid shown');
                        }
                        
                        // ØªØ³Ø¬ÙŠÙ„ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                        featuredAds.forEach(product => {
                            if (product.ad_id) {
                                console.log(`ğŸ“Š Recording impression for ad: ${product.ad_id}`);
                                window.advertisingService.recordImpression(product.ad_id);
                            }
                        });
                        
                    } else {
                        console.log('âš ï¸ No featured advertisements found, trying regular products...');
                        // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§ØªØŒ Ø¬Ø±Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
                        if (window.ProductService) {
                            const featuredResult = await window.ProductService.getFeaturedProducts(4);
                            if (featuredResult.success) {
                                allProducts = featuredResult.data;
                                shuffleProducts();
                                window.allProducts = allProducts;
                                applyFilter(currentFilter);
                                
                                if (productsGrid) {
                                    productsGrid.style.display = 'flex';
                                }
                            }
                        } else {
                            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ù†ØªØ¬Ø§Øª
                            if (noProductsMessage) {
                                noProductsMessage.style.display = 'block';
                                console.log('ğŸ“± No products message shown');
                            }
                        }
                    }
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©:', error);
                    // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    const loadingIndicator = document.getElementById('products-loading');
                    if (loadingIndicator) {
                        loadingIndicator.style.display = 'none';
                        console.log('ğŸ“± Loading indicator hidden due to error');
                    }
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
                    const noProductsMessage = document.getElementById('no-products-message');
                    if (noProductsMessage) {
                        noProductsMessage.querySelector('h3').textContent = 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª';
                        noProductsMessage.querySelector('p').textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                        noProductsMessage.style.display = 'block';
                        console.log('ğŸ“± Error message shown');
                    }
                }
            }
            
            // Ø®Ù„Ø· Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª)
            function shuffleProducts() {
                console.log('ğŸ”„ Starting shuffleProducts, initial count:', allProducts ? allProducts.length : 0);
                
                if (allProducts && allProducts.length > 1) {
                    // Ø®Ù„Ø· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
                    const shuffled = [...allProducts];
                    for (let i = shuffled.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                    }
                    allProducts = shuffled;
                    console.log('ğŸ”„ ØªÙ… Ø®Ù„Ø· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹');
                } else {
                    console.log('âš ï¸ No products to shuffle or only one product');
                }
            }
            
            // Display products in grid
            function displayProducts(products, containerId) {
                console.log('ğŸ¨ Displaying products:', products ? products.length : 0, 'in container:', containerId);
                console.log('ğŸ“‹ Products data:', products);
                
                const container = document.getElementById(containerId);
                let noProductsMessage;
                
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
                if (containerId === 'recommended-products-grid') {
                    noProductsMessage = document.getElementById('no-recommended-message');
                } else {
                    noProductsMessage = document.getElementById('no-products-message');
                }
                
                if (!container) {
                    console.error('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§ÙˆÙŠØ©:', containerId);
                    return;
                }
                
                console.log('ğŸ“¦ Container found:', container);
                
                if (!products || products.length === 0) {
                    console.log('âš ï¸ No products to display');
                    container.style.display = 'none';
                    if (noProductsMessage) {
                        noProductsMessage.style.display = 'block';
                    }
                    return;
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ù†ØªØ¬Ø§Øª
                container.style.display = 'flex';
                if (noProductsMessage) {
                    noProductsMessage.style.display = 'none';
                }
                
                container.innerHTML = products.map(product => {
                    console.log('ğŸ¯ Processing product:', product);
                    console.log('ğŸ“¢ Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:', product.ad_id);
                    console.log('ğŸ†” Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬:', product.product_id || product.id);
                    
                    // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
                    let imageUrls, mainImageUrl, hasMultipleImages, productName, productPrice;
                    
                    if (product.ad_id) {
                        // Ù‡Ø°Ø§ Ø¥Ø¹Ù„Ø§Ù†
                        console.log('âœ… Ù‡Ø°Ø§ Ù…Ù†ØªØ¬ Ø¥Ø¹Ù„Ø§Ù†ÙŠ Ù…Ø¹ Ù…Ø¹Ø±Ù:', product.ad_id);
                        imageUrls = product.image_url ? [product.image_url] : ['https://placehold.co/300x200/EEE/31343C?text=Ù„Ø§+ØªÙˆØ¬Ø¯+ØµÙˆØ±Ø©'];
                        mainImageUrl = imageUrls[0];
                        hasMultipleImages = false;
                        productName = product.name || product.description || 'Ù…Ù†ØªØ¬ Ù…Ù…ÙŠØ²';
                        productPrice = product.price || 0;
                    } else {
                        // Ù‡Ø°Ø§ Ù…Ù†ØªØ¬ Ø¹Ø§Ø¯ÙŠ
                        console.log('â„¹ï¸ Ù‡Ø°Ø§ Ù…Ù†ØªØ¬ Ø¹Ø§Ø¯ÙŠ Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ù„Ø§Ù†');
                        imageUrls = product.image_urls && product.image_urls.length > 0 
                            ? product.image_urls 
                            : ['https://placehold.co/300x200/EEE/31343C?text=Ù„Ø§+ØªÙˆØ¬Ø¯+ØµÙˆØ±Ø©'];
                        mainImageUrl = imageUrls[0];
                        hasMultipleImages = imageUrls.length > 1;
                        productName = product.description || 'Ù…Ù†ØªØ¬';
                        productPrice = product.price || 0;
                    }
                    
                    return `
                    <div class="product-card bg-white rounded-lg overflow-hidden ${product.product_id ? 'cursor-pointer' : 'cursor-default'} flex-shrink-0 w-80" data-product-id="${product.product_id || product.id}" data-ad-id="${product.ad_id || ''}" ${product.product_id ? `onclick="openProductDetails('${product.product_id}', '${product.ad_id || ''}')"` : ''}>
                        <div class="relative product-image-container" style="height: 192px;">
                            <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± -->
                            <div class="slideshow-container" data-product-id="${product.product_id || product.id}" data-images='${JSON.stringify(imageUrls)}'>
                                ${imageUrls.map((url, index) => `
                                    <img src="${url}" 
                                         alt="${productName}" 
                                         class="slideshow-image ${index === 0 ? 'active' : ''}"
                                         loading="lazy"
                                         decoding="async">
                                `).join('')}
                                
                                <!-- Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„ØµÙˆØ± -->
                                ${imageUrls.length > 1 ? `
                                    <div class="slideshow-indicators">
                                        ${imageUrls.map((_, index) => `
                                            <span class="indicator ${index === 0 ? 'active' : ''}" data-slide="${index}"></span>
                                        `).join('')}
                                    </div>
                                ` : ''}
                                
                                <!-- Ø´Ø§Ø±Ø© Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± -->
                                ${imageUrls.length > 1 ? `
                                    <div class="multiple-images-badge">
                                        ${imageUrls.length} ØµÙˆØ±
                                    </div>
                                ` : ''}
                            </div>
                            
                            <div class="absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full">Ù…ØªØ§Ø­</div>
                            ${product.is_paid_ad ? '<div class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold">Ù…Ø¯ÙÙˆØ¹</div>' : (product.ad_id ? '<div class="absolute top-2 right-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">Ù…Ù…ÙŠØ²</div>' : '')}
                            
                            <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© -->
                            <div class="absolute bottom-2 right-2" style="z-index: 20;">
                                <button class="favorite-btn bg-white rounded-full p-2 shadow-lg hover:bg-pink-50 transition-all duration-200" 
                                        data-product-id="${product.product_id || product.id}"
                                        data-product-name="${productName}"
                                        data-product-image="${mainImageUrl}"
                                        data-product-price="${productPrice}"
                                        data-product-governorate="${product.governorate || ''}"
                                        data-product-cities="${product.cities || ''}"
                                        data-product-subcategory="${JSON.stringify(product.subcategory || [])}">
                                    <svg class="w-5 h-5 ${isFavorite(product.product_id || product.id) ? 'text-red-500 fill-current' : 'text-gray-400'}" viewBox="0 0 24 24">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="p-4">
                            <div class="mb-2">
                                <span class="text-gray-500 text-sm">${getCategoryName(product.category)}</span>
                            </div>
                            <div class="mb-2">
                                ${(() => {
                                    if (product.subcategory) {
                                        let subcategoryValue = null;
                                        
                                        // Handle different formats of subcategory
                                        if (Array.isArray(product.subcategory) && product.subcategory.length > 0) {
                                            subcategoryValue = product.subcategory[0];
                                        } else if (typeof product.subcategory === 'string') {
                                            // Try to parse JSON string
                                            try {
                                                const parsed = JSON.parse(product.subcategory);
                                                if (Array.isArray(parsed) && parsed.length > 0) {
                                                    subcategoryValue = parsed[0];
                                                } else if (typeof parsed === 'string') {
                                                    subcategoryValue = parsed;
                                                }
                                            } catch (e) {
                                                // If not JSON, treat as regular string
                                                if (product.subcategory.trim() !== '') {
                                                    subcategoryValue = product.subcategory;
                                                }
                                            }
                                        }
                                        
                                        if (subcategoryValue) {
                                            return `<span class='inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1'>${getSubcategoryName(subcategoryValue)}</span>`;
                                        }
                                    }
                                    return '';
                                })()}
                            </div>

                            <div class="mb-2">
                                <span class="font-bold gold-text">${productPrice > 0 ? productPrice + ' Ø¬Ù†ÙŠÙ‡' : 'Ø§Ù„Ø³Ø¹Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨'}</span>
                            </div>
                            <div class="mb-2">
                                <div class="flex flex-wrap gap-1">
                                    ${product.governorate ? `<span class="inline-flex items-center bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full whitespace-nowrap">${product.governorate}</span>` : ''}
                                    ${product.cities ? `<span class="inline-flex items-center bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full whitespace-nowrap">${product.cities.split(',')[0].trim()}</span>` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                }).join('');
                
                // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ­Ø±Ùƒ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„Ù…Ø­Ø³Ù† Ù„Ù„ØµÙˆØ± Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                setTimeout(() => {
                    if (window.enhancedAutoSlideshow) {
                        window.enhancedAutoSlideshow.setupSlideshows();
                    }
                }, 100); // Reduced timeout for faster initialization
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø³Ù„Ø§ÙŠØ¯Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯
                setTimeout(() => {
                    setupProductSlideshows();
                }, 150);
                
                // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                setTimeout(() => {
                    updateAllFavoriteIcons();
                    setupFavoriteButtons();
                }, 200);

            }

        // ===== ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© =====
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø³Ù„Ø§ÙŠØ¯Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        function setupProductSlideshows() {
            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
            const oldSlideshows = document.querySelectorAll('.slideshow-container[data-initialized="true"]');
            oldSlideshows.forEach(container => {
                const interval = container.dataset.slideInterval;
                if (interval) {
                    clearInterval(parseInt(interval));
                }
                container.removeEventListener('mouseenter', container._stopAutoSlide);
                container.removeEventListener('mouseleave', container._startAutoSlide);
                delete container.dataset.initialized;
                delete container.dataset.slideInterval;
                delete container._stopAutoSlide;
                delete container._startAutoSlide;
            });
            
            const slideshowContainers = document.querySelectorAll('.slideshow-container:not([data-initialized="true"])');
            console.log('ğŸ–¼ï¸ Setting up product slideshows:', slideshowContainers.length);
            
            slideshowContainers.forEach((container, index) => {
                const images = container.querySelectorAll('.slideshow-image');
                const indicators = container.querySelectorAll('.indicator');
                
                if (images.length <= 1) return;
                
                let currentSlide = 0;
                let slideInterval;
                
                // Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± ØµÙˆØ±Ø© Ù…Ø¹ÙŠÙ†Ø©
                const showSlide = (slideIndex) => {
                    // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ±
                    images.forEach(img => img.classList.remove('active'));
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
                    if (images[slideIndex]) {
                        images[slideIndex].classList.add('active');
                    }
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
                    indicators.forEach(ind => ind.classList.remove('active'));
                    if (indicators[slideIndex]) {
                        indicators[slideIndex].classList.add('active');
                    }
                    
                    currentSlide = slideIndex;
                };
                
                // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
                const nextSlide = () => {
                    const next = (currentSlide + 1) % images.length;
                    showSlide(next);
                };
                
                // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
                const startAutoSlide = () => {
                    slideInterval = setInterval(nextSlide, 3000); // 3 Ø«ÙˆØ§Ù†ÙŠ
                    container.dataset.slideInterval = slideInterval;
                };
                
                // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
                const stopAutoSlide = () => {
                    if (slideInterval) {
                        clearInterval(slideInterval);
                    }
                };
                
                // Ø­ÙØ¸ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„ØªÙ†Ø¸ÙŠÙ Ù„Ø§Ø­Ù‚Ø§Ù‹
                container._startAutoSlide = startAutoSlide;
                container._stopAutoSlide = stopAutoSlide;
                
                // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
                indicators.forEach((indicator, indIndex) => {
                    indicator.addEventListener('click', () => {
                        showSlide(indIndex);
                        stopAutoSlide();
                        startAutoSlide(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„
                    });
                });
                
                // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªÙ…Ø±ÙŠØ±
                container.addEventListener('mouseenter', stopAutoSlide);
                container.addEventListener('mouseleave', startAutoSlide);
                
                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù„Ù„ØµÙˆØ±
                images.forEach((img, imgIndex) => {
                    img.addEventListener('error', () => {
                        console.warn(`âš ï¸ Image ${imgIndex + 1} failed to load in slideshow ${index + 1}`);
                        img.src = 'https://placehold.co/300x200/EEE/31343C?text=Ø®Ø·Ø£+ÙÙŠ+ØªØ­Ù…ÙŠÙ„+Ø§Ù„ØµÙˆØ±Ø©';
                    });
                    
                    img.addEventListener('load', () => {
                        console.log(`âœ… Image ${imgIndex + 1} loaded successfully in slideshow ${index + 1}`);
                    });
                });
                
                // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
                startAutoSlide();
                
                // ØªØ­Ø¯ÙŠØ¯ Ø£Ù† Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ØªÙ… ØªÙ‡ÙŠØ¦ØªÙ‡
                container.dataset.initialized = "true";
                
                console.log(`âœ… Slideshow ${index + 1} setup complete with ${images.length} images`);
            });
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function setupFavoriteButtons() {
            const favoriteButtons = document.querySelectorAll('.favorite-btn');
            console.log('ğŸ”˜ Setting up favorite buttons:', favoriteButtons.length);
            
            favoriteButtons.forEach(button => {
                // Ø¥Ø²Ø§Ù„Ø© event listeners Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±
                button.removeEventListener('click', handleFavoriteClick);
                
                // Ø¥Ø¶Ø§ÙØ© event listener Ø¬Ø¯ÙŠØ¯
                button.addEventListener('click', handleFavoriteClick);
            });
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function handleFavoriteClick(event) {
            event.stopPropagation(); // Ù…Ù†Ø¹ Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ø­Ø¯Ø« Ù„Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø£Ø¨
            event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
            
            console.log('â¤ï¸ Favorite button clicked!');
            
            const button = event.currentTarget;
            const productId = button.getAttribute('data-product-id');
            const productName = button.getAttribute('data-product-name');
            const productImage = button.getAttribute('data-product-image');
            const productPrice = parseInt(button.getAttribute('data-product-price')) || 0;
            const productGovernorate = button.getAttribute('data-product-governorate');
            const productCities = button.getAttribute('data-product-cities');
            const productSubcategory = button.getAttribute('data-product-subcategory');
            
            console.log('â¤ï¸ Product data:', {
                id: productId,
                name: productName,
                image: productImage,
                price: productPrice,
                governorate: productGovernorate,
                cities: productCities,
                subcategory: productSubcategory
            });
            
            if (!productId) {
                console.error('âŒ No product ID found!');
                showNotification('Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬', 'error');
                return;
            }
            
            toggleFavorite(event, productId, productName, productImage, productPrice, productGovernorate, productCities, productSubcategory);
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function isFavorite(productId) {
            if (!productId) return false;
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            return favorites.some(item => item.id === productId);
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© (Ø¥Ø¶Ø§ÙØ©/Ø¥Ø²Ø§Ù„Ø©)
        function toggleFavorite(event, productId, title, imageUrl, price, governorate, cities, subcategories) {
            console.log('ğŸ”„ toggleFavorite called!');
            console.log('ğŸ”„ Toggle favorite for product:', {
                id: productId,
                title: title,
                imageUrl: imageUrl,
                price: price,
                governorate: governorate,
                cities: cities,
                subcategories: subcategories
            });
            
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            console.log('ğŸ“‹ Current favorites before toggle:', favorites);
            
            const existingIndex = favorites.findIndex(item => item.id === productId);
            console.log('ğŸ” Existing index:', existingIndex);
            
            if (existingIndex > -1) {
                // Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©
                favorites.splice(existingIndex, 1);
                showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'info');
                console.log('âŒ Removed from favorites');
            } else {
                // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©
                const productData = {
                    id: productId,
                    title: title || 'Ù…Ù†ØªØ¬',
                    imageUrl: imageUrl,
                    price: price || 0,
                    governorate: governorate || '',
                    cities: cities || '',
                    subcategories: subcategories || '',
                    addedAt: new Date().toISOString()
                };
                favorites.push(productData);
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'success');
                console.log('âœ… Added to favorites:', productData);
            }
            
            // Ø­ÙØ¸ ÙÙŠ Local Storage
            localStorage.setItem('favorites', JSON.stringify(favorites));
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ù…Ø®ØµØµ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù…Ù† Ù…Ø¹ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
            window.dispatchEvent(new CustomEvent('favoritesChanged', {
                detail: { favorites: favorites }
            }));
            console.log('ğŸ’¾ Saved to localStorage, total favorites:', favorites.length);
            console.log('ğŸ’¾ Current localStorage favorites:', JSON.parse(localStorage.getItem('favorites')));
            
            // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù‚Ù„Ø¨
            updateFavoriteIcon(productId);
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø©
            console.log('ğŸ”„ Calling updateFavoritesCountBadge from toggleFavorite');
            updateFavoritesCountBadge();
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£ÙƒÙŠØ¯ Ø¥Ø¶Ø§ÙÙŠ
            setTimeout(() => {
                const storedFavorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                console.log('ğŸ” Verification - Stored favorites after 100ms:', storedFavorites);
                console.log('ğŸ”„ Calling updateFavoritesCountBadge again after delay');
                updateFavoritesCountBadge();
            }, 100);
        }

        // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù‚Ù„Ø¨
        function updateFavoriteIcon(productId) {
            const favoriteBtn = document.querySelector(`[data-product-id="${productId}"] .favorite-btn svg`);
            if (favoriteBtn) {
                if (isFavorite(productId)) {
                    favoriteBtn.classList.remove('text-gray-400');
                    favoriteBtn.classList.add('text-red-500', 'fill-current');
                    console.log(`âœ… Updated favorite icon for product ${productId}: FAVORITE (RED)`);
                } else {
                    favoriteBtn.classList.remove('text-red-500', 'fill-current');
                    favoriteBtn.classList.add('text-gray-400');
                    console.log(`âœ… Updated favorite icon for product ${productId}: NOT_FAVORITE (GRAY)`);
                }
            } else {
                console.log(`âš ï¸ Favorite button not found for product: ${productId}`);
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function updateAllFavoriteIcons() {
            const productCards = document.querySelectorAll('.product-card');
            console.log('ğŸ”„ Updating favorite icons for', productCards.length, 'product cards');
            
            productCards.forEach(card => {
                const productId = card.getAttribute('data-product-id');
                if (productId) {
                    updateFavoriteIcon(productId);
                    console.log('âœ… Updated icon for product:', productId);
                } else {
                    console.log('âš ï¸ No product ID found for card:', card);
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø£ÙŠØ¶Ø§Ù‹
            updateFavoritesCountBadge();
        }

        // Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø±
        function showNotification(message, type = 'info') {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            const notification = document.createElement('div');
            notification.className = `notification fixed top-4 left-4 z-50 px-4 py-2 rounded-lg shadow-lg text-white text-sm font-medium transform transition-all duration-300 translate-x-0`;
            
            // ØªØ­Ø¯ÙŠØ¯ Ù„ÙˆÙ† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            if (type === 'success') {
                notification.style.backgroundColor = '#10b981'; // Ø£Ø®Ø¶Ø±
            } else if (type === 'error') {
                notification.style.backgroundColor = '#ef4444'; // Ø£Ø­Ù…Ø±
            } else {
                notification.style.backgroundColor = '#3b82f6'; // Ø£Ø²Ø±Ù‚
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
            setTimeout(() => {
                notification.style.transform = 'translateX(-100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Get category name in Arabic
        function getCategoryName(category) {
                const categories = {
                    'koshat': 'ÙƒÙˆØ´Ø§Øª',
                    'mirr': 'Ù…Ø±Ø§ÙŠØ§',
                    'cake': 'ØªÙˆØ±ØªØ§Øª',
                    'other': 'Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©',
                    'invitations': 'Ø¯Ø¹ÙˆØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ø§Øª'
                };
                return categories[category] || category;
            }
            
            // Get subcategory name in Arabic
            function getSubcategoryName(subcategory) {
                const subcategories = {
                    // ÙƒÙˆØ´Ø§Øª
                    'koshat-wedding': 'ÙƒÙˆØ´Ø§Øª Ø²ÙØ§Ù',
                    'koshat-engagement': 'ÙƒÙˆØ´Ø§Øª Ø®Ø·ÙˆØ¨Ø©',
                    'koshat-birthday': 'ÙƒÙˆØ´Ø§Øª Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
                    'koshat-party': 'ÙƒÙˆØ´Ø§Øª Ø­ÙÙ„Ø§Øª',
                    'koshat-corporate': 'ÙƒÙˆØ´Ø§Øª Ø´Ø±ÙƒØ§Øª',
                    
                    // Ù…Ø±Ø§ÙŠØ§
                    'mirr-wedding': 'Ù…Ø±Ø§ÙŠØ§ Ø²ÙØ§Ù',
                    'mirr-engagement': 'Ù…Ø±Ø§ÙŠØ§ Ø®Ø·ÙˆØ¨Ø©',
                    'mirr-birthday': 'Ù…Ø±Ø§ÙŠØ§ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
                    'mirr-decorative': 'Ù…Ø±Ø§ÙŠØ§ Ø¯ÙŠÙƒÙˆØ±',
                    'mirr-custom': 'Ù…Ø±Ø§ÙŠØ§ Ù…Ø®ØµØµØ©',
                    
                    // ØªÙˆØ±ØªØ©
                    'cake-wedding': 'ØªÙˆØ±ØªØ© Ø²ÙØ§Ù',
                    'cake-engagement': 'ØªÙˆØ±ØªØ© Ø®Ø·ÙˆØ¨Ø©',
                    'cake-birthday': 'ØªÙˆØ±ØªØ© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
                    'cake-chocolate': 'ØªÙˆØ±ØªØ© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©',
                    'cake-fruit': 'ØªÙˆØ±ØªØ© ÙÙˆØ§ÙƒÙ‡',
                    'cake-custom': 'ØªÙˆØ±ØªØ© Ù…Ø®ØµØµØ©',
                    
                    // Ø¯ÙŠÙƒÙˆØ±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©
                    'other-birthday': 'Ø¯ÙŠÙƒÙˆØ± Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
                    'other-hospital': 'Ø¯ÙŠÙƒÙˆØ± Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ù…Ø³ØªØ´ÙÙ‰',
                    'other-bride': 'Ø¯ÙŠÙƒÙˆØ± Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¹Ø±ÙˆØ³Ø©',
                    'other-party': 'Ø¯ÙŠÙƒÙˆØ± Ø­ÙÙ„Ø§Øª Ø¨Ø³ÙŠØ·Ø©',
                    'other-balloons': 'Ø¨Ø§Ù„ÙˆÙ†Ø§Øª ÙˆÙ‡Ø¯Ø§ÙŠØ§',
                    'other-flowers': 'Ø²Ù‡ÙˆØ± ÙˆØ£Ø²Ù‡Ø§Ø±',
                    'other-lights': 'Ø¥Ø¶Ø§Ø¡Ø§Øª Ø¯ÙŠÙƒÙˆØ±',
                    
                    // Ø¯Ø¹ÙˆØ§Øª
                    'invitation-wedding': 'Ø¯Ø¹ÙˆØ© Ø²ÙØ§Ù',
                    'invitation-engagement': 'Ø¯Ø¹ÙˆØ© Ø®Ø·ÙˆØ¨Ø©',
                    'invitation-birthday': 'Ø¯Ø¹ÙˆØ© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯',
                    'invitation-party': 'Ø¯Ø¹ÙˆØ© Ø­ÙÙ„Ø©',
                    'invitation-corporate': 'Ø¯Ø¹ÙˆØ© Ø´Ø±ÙƒØ©'
                };
                return subcategories[subcategory] || subcategory;
        }
            
            // Format date
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('ar-EG');
            }
            
            // Open product details page
            function openProductDetails(productId, adId = null) {
                console.log('ğŸ–±ï¸ ØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬:', productId);
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
                if (adId && window.advertisingService) {
                    console.log('ğŸ“¢ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:', adId);
                    try {
                        window.advertisingService.recordClick(adId);
                        console.log('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¨Ù†Ø¬Ø§Ø­!');
                    } catch (error) {
                        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø±:', error);
                    }
                } else {
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù…Ù† Ø§Ù„Ø¹Ù†ØµØ±
                    const productElement = document.querySelector(`[data-product-id="${productId}"]`);
                    if (productElement) {
                        const elementAdId = productElement.getAttribute('data-ad-id');
                        if (elementAdId && window.advertisingService) {
                            console.log('ğŸ“¢ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù…Ù† Ø§Ù„Ø¹Ù†ØµØ±:', elementAdId);
                            try {
                                window.advertisingService.recordClick(elementAdId);
                                console.log('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¨Ù†Ø¬Ø§Ø­!');
                            } catch (error) {
                                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø±:', error);
                            }
                        }
                    }
                }
                
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
                window.location.href = `pages/product-details.html?id=${productId}`;
            }

            // Filter products by category
            function filterProducts(category) {
                if (category === 'all') {
                    return allProducts;
                }
                
                // Map Arabic category names to database values
                const categoryMap = {
                    'koshat': 'koshat',
                    'cake': 'cake',
                    'decor': 'mirr', // Assuming 'decor' maps to 'mirr' (mirrors)
                    'other': 'other'
                };
                
                const dbCategory = categoryMap[category];
                return allProducts.filter(product => product.category === dbCategory);
            }

            // Apply filter and update display
            function applyFilter(category) {
                console.log('ğŸ” Applying filter:', category);
                console.log('ğŸ“Š All products count:', allProducts ? allProducts.length : 0);
                
                currentFilter = category;
                
                // Filter and display products
                const filteredProducts = filterProducts(category);
                console.log('ğŸ“Š Filtered products count:', filteredProducts ? filteredProducts.length : 0);
                
                displayProducts(filteredProducts, 'featured-products-grid');
            }
            
            // Make loadProducts available globally
            window.loadProducts = loadProducts;

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© ÙˆØ§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
            async function loadFeaturedAndRecommendedProducts() {
                try {
                    console.log('ğŸ”„ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© ÙˆØ§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§...');
                    
                    // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                    let attempts = 0;
                    while (!window.advertisingService && attempts < 100) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                        attempts++;
                        if (attempts % 10 === 0) {
                            console.log(`â³ Ø§Ù†ØªØ¸Ø§Ø± Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª... (Ù…Ø­Ø§ÙˆÙ„Ø© ${attempts}/100)`);
                        }
                    }
                    
                    if (!window.advertisingService) {
                        console.error('âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø¹Ø¯ 100 Ù…Ø­Ø§ÙˆÙ„Ø©');
                        return;
                    }
                    
                    console.log('âœ… Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…ØªÙˆÙØ±Ø©:', window.advertisingService);

                    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©
                    const featuredProducts = await window.advertisingService.getFeaturedProducts(8);
                    if (featuredProducts && featuredProducts.length > 0) {
                        displayProducts(featuredProducts, 'featured-products-grid');
                        // ØªØ³Ø¬ÙŠÙ„ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                        featuredProducts.forEach(product => {
                            if (product.ad_id) {
                                window.advertisingService.recordImpression(product.ad_id);
                            }
                        });
                    }

                    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
                    console.log('ğŸ”„ Loading recommended products...');
                    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ (5 Ù…Ù†ØªØ¬Ø§Øª: 1 Ø¥Ø¹Ù„Ø§Ù† Ù…Ø¯ÙÙˆØ¹ + 4 Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©)
                    const recommendedProducts = await window.advertisingService.getRecommendedProducts(5);
                    console.log('ğŸ“Š Recommended products loaded:', recommendedProducts);
                    
                    if (recommendedProducts && recommendedProducts.length > 0) {
                        console.log('âœ… Found recommended products, displaying...');
                        displayProducts(recommendedProducts, 'recommended-products-grid');
                        
                        // ØªØ³Ø¬ÙŠÙ„ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                        recommendedProducts.forEach(product => {
                            if (product.ad_id) {
                                window.advertisingService.recordImpression(product.ad_id);
                            }
                        });
                        
                                            // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    document.getElementById('recommended-loading').classList.add('hidden');
                    
                    // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    setTimeout(() => {
                        updateAllFavoriteIcons();
                        setupFavoriteButtons();
                        setupProductSlideshows();
                    }, 300);
                } else {
                    console.log('â„¹ï¸ No recommended products available');
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
                    document.getElementById('recommended-loading').classList.add('hidden');
                    document.getElementById('no-recommended-message').classList.remove('hidden');
                }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© ÙˆØ§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§:', error);
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
                    document.getElementById('recommended-loading').classList.add('hidden');
                    document.getElementById('no-recommended-message').classList.remove('hidden');
                } finally {
                    // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª
                    setTimeout(() => {
                        updateAllFavoriteIcons();
                        setupFavoriteButtons();
                        setupProductSlideshows();
                    }, 500);
                }
            }

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            document.addEventListener('DOMContentLoaded', function() {
                console.log('ğŸš€ DOM Content Loaded - Starting to load products...');
                
                // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø«Ù… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                waitForAdvertisingService();
                

            });
            
            // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
            async function waitForAdvertisingService() {
                try {
                    console.log('â³ Waiting for AdvertisingService...');
                    
                    // Ø§Ù†ØªØ¸Ø§Ø± Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
                    while (!window.advertisingService) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                        console.log('â³ Still waiting for AdvertisingService...');
                    }
                    
                    console.log('âœ… AdvertisingService loaded, now loading products...');
                    
                    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© (Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª)
                    await loadProducts();
                    
                    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§
                    setTimeout(loadFeaturedAndRecommendedProducts, 500);
                    
                } catch (error) {
                    console.error('âŒ Error waiting for AdvertisingService:', error);
                }
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
            function addTestButton() {
                const container = document.querySelector('.container');
                if (container) {
                    const testButton = document.createElement('button');
                    testButton.innerHTML = 'ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª';
                    testButton.className = 'fixed bottom-4 right-4 bg-yellow-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                    testButton.onclick = async function() {
                        try {
                            if (window.advertisingService) {
                                const result = await window.advertisingService.debugGetAllAdvertisements();
                                if (result) {
                                    alert(`Ù†ØªØ§Ø¦Ø¬ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª:\n\nğŸ“Š Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª: ${result.all?.length || 0}\nâœ… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${result.active?.length || 0}\nğŸ“… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ù…ÙˆØ§Ø¹ÙŠØ¯ ØµØ­ÙŠØ­Ø©: ${result.validDates?.length || 0}`);
                                }
                            } else {
                                alert('Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©');
                            }
                        } catch (error) {
                            alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª: ' + error.message);
                        }
                    };
                    document.body.appendChild(testButton);
                    
                    // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    const reloadButton = document.createElement('button');
                    reloadButton.innerHTML = 'ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„';
                    reloadButton.className = 'fixed bottom-4 right-32 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                    reloadButton.onclick = async function() {
                        try {
                            console.log('ğŸ”„ Manual reload triggered...');
                            await loadProducts();
                        } catch (error) {
                            console.error('âŒ Error in manual reload:', error);
                            alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„: ' + error.message);
                        }
                    };
                    document.body.appendChild(reloadButton);

                    // Ø¥Ø¶Ø§ÙØ© Ø²Ø± ØªÙ†Ø¸ÙŠÙ ÙÙˆØ±ÙŠ
                    const cleanupButton = document.createElement('button');
                    cleanupButton.innerHTML = 'ğŸ§¹ ØªÙ†Ø¸ÙŠÙ ÙÙˆØ±ÙŠ';
                    cleanupButton.className = 'fixed bottom-4 right-60 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                    cleanupButton.onclick = async function() {
                        try {
                            if (window.advertisingService) {
                                console.log('ğŸ§¹ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙÙˆØ±ÙŠ...');
                                await window.advertisingService.autoCleanup();
                                alert('ØªÙ… Ø§Ù„ØªÙ†Ø¸ÙŠÙ! Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹');
                                setTimeout(() => location.reload(), 2000);
                            } else {
                                alert('Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©');
                            }
                        } catch (error) {
                            console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø¸ÙŠÙ:', error);
                            alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ø¸ÙŠÙ: ' + error.message);
                        }
                    };
                    document.body.appendChild(cleanupButton);
                }
            }
        
        // Hero Carousel JavaScript
        class HeroCarousel {
            constructor() {
                this.currentSlide = 0;
                this.slides = [
                    {
                        title: 'Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø²ÙŠÙ†Ø©',
                        description: 'Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø£ÙˆÙ„ Ù„Ø§Ø®ØªÙŠØ§Ø± ÙƒÙ„ Ù…Ø§ ÙŠØ®Øµ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª ÙˆØ§Ù„Ø£ÙØ±Ø§Ø­. ÙƒÙˆØ´Ø§ØªØŒ ØªÙˆØ±ØªØ§ØªØŒ Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©ØŒ Ø¯Ø¹ÙˆØ§Øª ÙˆØ¯ÙŠÙƒÙˆØ±Ø§Øª.. ÙƒÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ Ù„ØªØ¬Ø¹Ù„ ÙŠÙˆÙ…Ùƒ Ù…Ù…ÙŠØ²Ù‹Ø§ ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯.',
                        buttonText: 'Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ',
                        buttonLink: '#featured-products'
                    },
                    {
                        title: 'ØªÙ†ÙˆØ¹ ÙŠÙ„Ø¨ÙŠ ÙƒÙ„ Ø§Ù„Ø£Ø°ÙˆØ§Ù‚',
                        description: 'Ù…Ù† Ø§Ù„ÙƒÙˆØ´Ø§Øª Ø§Ù„ÙØ®Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±Ø§ÙŠØ§ ÙˆØ§Ù„Ø¯Ø¹ÙˆØ§Øª Ø§Ù„Ø£Ù†ÙŠÙ‚Ø©ØŒ Ù†ÙˆÙØ± Ù„Ùƒ Ø®ÙŠØ§Ø±Ø§Øª ÙˆØ§Ø³Ø¹Ø© ØªÙ†Ø§Ø³Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø°ÙˆØ§Ù‚ ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª.',
                        buttonText: 'ØªØµÙØ­ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª',
                        buttonLink: '#categories'
                    },
                    {
                        title: 'Ù„Ø£Ù† Ù„Ø­Ø¸Ø§ØªÙƒ ØªØ³ØªØ­Ù‚ Ø§Ù„Ø£ÙØ¶Ù„',
                        description: 'ÙÙŠ Ø²ÙŠÙ†Ø© Ù†Ù‡ØªÙ… Ø¨Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„ØŒ Ù„ØªØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ØªØ¹ÙƒØ³ Ø´Ø®ØµÙŠØªÙƒ ÙˆØªØªØ±Ùƒ Ø£Ø«Ø±Ù‹Ø§ Ù„Ø§ ÙŠÙÙ†Ø³Ù‰ ÙÙŠ Ù…Ù†Ø§Ø³Ø¨ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©.',
                        buttonText: 'Ø§ÙƒØªØ´Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
                        buttonLink: '#featured-products'
                    },
                    {
                        title: 'Ø²ÙŠÙ†Ø©.. Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª ØªØ¨Ù‚Ù‰ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©',
                        description: 'Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ø¢Ù† Ù…Ø¹ Ø²ÙŠÙ†Ø©ØŒ ÙˆØ§Ø®ØªØ± Ù…Ù† Ø¨ÙŠÙ† Ø£Ø¬Ù…Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ØªØµÙ†Ø¹ Ù„Ø­Ø¸Ø§ØªÙƒ Ø§Ù„Ù…Ù…ÙŠØ²Ø©.',
                        buttonText: 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†',
                        buttonLink: '#featured-products'
                    }
                ];
                
                this.carousel = document.getElementById('hero-carousel');
                this.indicatorsContainer = document.getElementById('carousel-indicators');
                
                this.init();
            }
            
            init() {
                this.createIndicators();
                this.showSlide(0);
                this.setupEventListeners();
                this.startAutoPlay();
            }
            
            createIndicators() {
                this.indicatorsContainer.innerHTML = '';
                this.slides.forEach((_, index) => {
                    const indicator = document.createElement('button');
                    indicator.className = 'carousel-indicator';
                    indicator.addEventListener('click', () => this.showSlide(index));
                    this.indicatorsContainer.appendChild(indicator);
                });
            }
            
            showSlide(index) {
                this.currentSlide = index;
                const slide = this.slides[index];
                
                // Update indicators
                const indicators = this.indicatorsContainer.querySelectorAll('.carousel-indicator');
                indicators.forEach((indicator, i) => {
                    indicator.classList.toggle('active', i === index);
                });
                
                // Update content
                this.carousel.innerHTML = `
                    <div class="flex items-center justify-center h-full">
                        <!-- Content -->
                        <div class="text-center text-gray-800 px-8 max-w-4xl">
                            <h1 class="text-3xl md:text-5xl lg:text-6xl font-bold mb-6 text-shadow-lg leading-tight">${slide.title}</h1>
                            <p class="text-lg md:text-xl lg:text-2xl text-shadow max-w-3xl mx-auto leading-relaxed opacity-90">${slide.description}</p>
                        </div>
                    </div>
                `;
            }
            
            nextSlide() {
                const nextIndex = (this.currentSlide + 1) % this.slides.length;
                this.showSlide(nextIndex);
            }
            
            prevSlide() {
                const prevIndex = (this.currentSlide - 1 + this.slides.length) % this.slides.length;
                this.showSlide(prevIndex);
            }
            
            setupEventListeners() {
                // Keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') {
                        this.prevSlide();
                    } else if (e.key === 'ArrowRight') {
                        this.nextSlide();
                    }
                });
            }
            
            startAutoPlay() {
                setInterval(() => {
                    this.nextSlide();
                }, 4000); // Change slide every 4 seconds
            }
        }

        // Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        if (window.location.hash) {
            // Ø¥Ø²Ø§Ù„Ø© hash Ù…Ù† URL Ø¨Ø¯ÙˆÙ† ØªÙ…Ø±ÙŠØ±
            history.replaceState(null, null, window.location.pathname);
        }
        
        // Simple JavaScript for basic interactions
        document.addEventListener('DOMContentLoaded', async function() {
            // Add styles for governorate display
            GovernorateDisplay.addStyles();
            
            // Initialize hero carousel
            const heroCarousel = new HeroCarousel();
            window.heroCarousel = heroCarousel; // Make it globally accessible
            
            // Update mobile auth buttons and navigation
            await updateMobileAuthButtons();
            
            // Load products immediately for better performance
            loadProducts().catch(error => {
                console.error('Error loading products:', error);
            });
            
                    // Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± Ø§Ù„Ù‡ÙŠØ¯Ø±
        function ensureHeaderVisibility() {
            const header = document.querySelector('header');
            if (header) {
                header.style.display = 'block';
                header.style.visibility = 'visible';
                header.style.opacity = '1';
                header.style.position = 'sticky';
                header.style.top = '0';
                header.style.zIndex = '50';
                header.style.backgroundColor = 'white';
                console.log('âœ… ØªÙ… Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± Ø§Ù„Ù‡ÙŠØ¯Ø±');
            }
        }
        
        // Mobile menu functionality
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        
        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
        }
        
        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± Ø§Ù„Ù‡ÙŠØ¯Ø± Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', ensureHeaderVisibility);
        window.addEventListener('load', ensureHeaderVisibility);
        // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£ÙƒØ¯ Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø©
        setTimeout(ensureHeaderVisibility, 100);
        setTimeout(ensureHeaderVisibility, 500);
        setTimeout(ensureHeaderVisibility, 1000);
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ hash
        window.addEventListener('hashchange', function() {
            if (window.location.hash === '#product-request-section') {
                // Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± hashØŒ Ù†ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù…
                setTimeout(() => {
                    const productRequestSection = document.getElementById('product-request-section');
                    if (productRequestSection) {
                        const header = document.querySelector('header.sticky');
                        const headerHeight = header ? header.offsetHeight : 0;
                        const sectionTop = productRequestSection.offsetTop;
                        const targetScrollPosition = sectionTop - headerHeight - 20;
                        
                        window.scrollTo({
                            top: targetScrollPosition,
                            behavior: 'smooth'
                        });
                    }
                }, 100);
            }
        });
            

            

            

            

            

            
            // Add search event listeners

            

            

            


            
            // Product card click handlers - Removed as cards now have onclick handlers
            

            

            
            // Make functions available globally
            window.handleSignOut = handleSignOut;
            window.confirmSignOut = confirmSignOut;
            window.closeSignOutModal = closeSignOutModal;
            window.proceedSignOut = proceedSignOut;
            window.showSignOutSuccess = showSignOutSuccess;
            window.redirectToHome = redirectToHome;
            
            // Close custom modals when clicking outside
            document.addEventListener('click', function(e) {
                const signoutConfirmModal = document.getElementById('signout-confirm-modal');
                const signoutSuccessModal = document.getElementById('signout-success-modal');
                
                if (signoutConfirmModal && e.target === signoutConfirmModal) {
                    closeSignOutModal();
                }
                
                if (signoutSuccessModal && e.target === signoutSuccessModal) {
                    redirectToHome();
                }
            });
            
            // Close modals with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeSignOutModal();
                }
            });
            
            // Listen for auth state changes
            if (window.AuthService) {
                window.AuthService.onAuthStateChange(async (event, session) => {
                    if (event === 'SIGNED_IN') {
                        await UIHelper.updateNavigation();
                        await updateMobileAuthButtons();
                        await loadProducts(); // Reload products to show user's products
                        UIHelper.showSuccess('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!');
                    } else if (event === 'SIGNED_OUT') {
                        await UIHelper.updateNavigation();
                        await updateMobileAuthButtons();
                        await loadProducts(); // Reload products to hide user's products
                        UIHelper.showSuccess('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­!');
                    }
                });
            }
            
            // Update favorites count badge on page load
            updateFavoritesCountBadge();
            
            // Force update after a short delay to ensure DOM is ready
            setTimeout(() => {
                updateFavoritesCountBadge();
                console.log('ğŸ”„ Force update after delay');
            }, 500);
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            setTimeout(() => {
                updateAllFavoriteIcons();
                setupFavoriteButtons();
                setupProductSlideshows();
                console.log('ğŸ”„ Initializing favorite icons, buttons and slideshows after page load');
            }, 1000);
            
            // Listen for changes in localStorage (favorites)
            window.addEventListener('storage', function(e) {
                if (e.key === 'favorites') {
                    updateFavoritesCountBadge();
                }
            });
            
            // Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ø­Ø¯Ø« Ø§Ù„Ù…Ø®ØµØµ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù…Ù†
            window.addEventListener('favoritesChanged', function(e) {
                console.log('ğŸ”„ Favorites changed via custom event, updating favorites...');
                updateFavoritesCountBadge();
            });

                    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± "Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ" ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
        setupHeaderButtons();
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', setupProductRequestForm);
        } else {
            // Page already loaded, wait a bit more for scripts
            setTimeout(setupProductRequestForm, 1000);
        }
        });
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‡ÙŠØ¯Ø±
        function setupHeaderButtons() {
            console.log('ğŸ”„ Setting up header buttons...');
            
            // Ø²Ø± "Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ" ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
            const addProductRequestBtn = document.getElementById('add-product-request-btn');
            if (addProductRequestBtn) {
                console.log('âœ… Found add product request button');
                addProductRequestBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('ğŸ–±ï¸ Button clicked, scrolling to section...');
                    // ØªÙ…Ø±ÙŠØ± ÙÙˆØ±ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ±
                    scrollToProductRequestSection();
                });
            } else {
                console.error('âŒ Add product request button not found');
            }
            
            // Ø£Ø²Ø±Ø§Ø± "Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ" ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
            const mobileAddProductRequestBtns = document.querySelectorAll('a[href="#product-request-section"]');
            console.log(`ğŸ“± Found ${mobileAddProductRequestBtns.length} mobile buttons`);
            mobileAddProductRequestBtns.forEach((btn, index) => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log(`ğŸ–±ï¸ Mobile button ${index + 1} clicked, scrolling to section...`);
                    // ØªÙ…Ø±ÙŠØ± ÙÙˆØ±ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ±
                    scrollToProductRequestSection();
                });
            });
        }
        


        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬
        let citiesService;
        let selectedCities = new Set();
        let currentGovernorates = [];
        let uploadedImages = [];
        let draggedElement = null;
        let draggedIndex = null;

        function setupProductRequestForm() {
            console.log('ğŸš€ Setting up Product Request Form...');
            
            // Wait for all required services to be available
            waitForServices().then(() => {
                // Initialize advanced governorate filter
                setupAdvancedGovernorateFilter();
                
                // Initialize cities filter
                initializeCitiesFilter();
                
                // Setup form event listeners
                setupFormEventListeners();
                
                // Setup image upload
                setupImageUpload();
                
                // Setup global error banner
                setupGlobalErrorBanner();
                
                console.log('âœ… Product Request Form setup completed');
            }).catch(error => {
                console.error('âŒ Failed to setup Product Request Form:', error);
            });
        }
        
        // Wait for all required services to be available
        function waitForServices() {
            return new Promise((resolve, reject) => {
                const maxAttempts = 50; // 5 seconds max
                let attempts = 0;
                
                const checkServices = () => {
                    attempts++;
                    
                    const services = {
                        'CitiesService': typeof CitiesService !== 'undefined',
                        'ProductRequestsService': typeof ProductRequestsService !== 'undefined',
                        'Supabase': typeof supabaseClient !== 'undefined'
                    };
                    
                    console.log(`ğŸ” Checking services (attempt ${attempts}):`, services);
                    
                    const allAvailable = Object.values(services).every(available => available);
                    
                    if (allAvailable) {
                        console.log('âœ… All required services are available');
                        resolve();
                    } else if (attempts >= maxAttempts) {
                        console.error('âŒ Timeout waiting for services');
                        reject(new Error('Services timeout'));
                    } else {
                        setTimeout(checkServices, 100);
                    }
                };
                
                checkServices();
            });
        }
        
        // Setup form event listeners
        function setupFormEventListeners() {
            const form = document.getElementById('product-request-form');
            const categorySelect = document.getElementById('request-category');
            
            // Form submission
            form.addEventListener('submit', submitProductRequest);
            
            // Category change
            categorySelect.addEventListener('change', handleCategoryChange);
            
            // Setup validation event listeners
            setupValidationEventListeners();
        }
        
        // Setup validation event listeners
        function setupValidationEventListeners() {
            // Clear errors when user starts typing/selecting
            const descriptionField = document.getElementById('request-description');
            const categoryField = document.getElementById('request-category');
            const whatsappField = document.getElementById('request-whatsapp');
            const facebookField = document.getElementById('request-facebook');
            const instagramField = document.getElementById('request-instagram');
            
            descriptionField.addEventListener('input', () => clearFieldError('request-description'));
            categoryField.addEventListener('change', () => clearFieldError('request-category'));
            whatsappField.addEventListener('input', () => {
                clearFieldError('request-whatsapp');
                validateSocialMediaFields();
            });
            facebookField.addEventListener('input', () => {
                clearFieldError('request-facebook');
                validateSocialMediaFields();
            });
            instagramField.addEventListener('input', () => {
                clearFieldError('request-instagram');
                validateSocialMediaFields();
            });
            
            // Clear governorate error when selection changes
            const governorateCheckboxes = document.querySelectorAll('.governorate-checkbox');
            governorateCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    // Clear error after a short delay to allow the selection to update
                    setTimeout(() => {
                        if (currentGovernorates.length > 0) {
                            clearFieldError('request-governorate');
                        }
                    }, 100);
                });
            });
            
            // Clear subcategory error when selection changes
            document.addEventListener('change', (e) => {
                if (e.target.closest('#request-subcategory-options')) {
                    // Clear error after a short delay to allow the selection to update
                    setTimeout(() => {
                        const selectedSubcategories = document.querySelectorAll('#request-subcategory-options input[type="checkbox"]:checked');
                        if (selectedSubcategories.length > 0) {
                            clearFieldError('request-subcategory');
                        }
                    }, 100);
                }
            });
        }
        
        // Validate social media fields in real-time
        function validateSocialMediaFields() {
            const whatsapp = document.getElementById('request-whatsapp').value.trim();
            const facebook = document.getElementById('request-facebook').value.trim();
            const instagram = document.getElementById('request-instagram').value.trim();
            
            // Clear social media error if at least one is filled
            if (whatsapp || facebook || instagram) {
                clearFieldError('social-media');
            }
            
            // Validate individual fields if they are filled
            if (whatsapp && !isValidWhatsAppNumber(whatsapp)) {
                showFieldError('request-whatsapp', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ØµØ­ÙŠØ­');
            } else if (whatsapp) {
                clearFieldError('request-whatsapp');
            }
            
                            if (facebook && !isValidFacebookUrl(facebook)) {
                    showFieldError('request-facebook', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· ÙÙŠØ³Ø¨ÙˆÙƒ ØµØ­ÙŠØ­ (ÙŠÙ‚Ø¨Ù„ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·: ØµÙØ­Ø§ØªØŒ Ù…Ø¬Ù…ÙˆØ¹Ø§ØªØŒ Ø£Ø­Ø¯Ø§Ø«ØŒ Ù…Ù†Ø´ÙˆØ±Ø§ØªØŒ ØµÙˆØ±ØŒ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŒ hashtagsØŒ Ø±ÙˆØ§Ø¨Ø· Ù‚ØµÙŠØ±Ø©)');
                } else if (facebook) {
                    clearFieldError('request-facebook');
                }
            
            if (instagram && !isValidInstagramUsername(instagram)) {
                showFieldError('request-instagram', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù… ØµØ­ÙŠØ­');
            } else if (instagram) {
                clearFieldError('request-instagram');
            }
        }
        
        // Global Error Banner Functions
        function showGlobalErrorBanner() {
            const banner = document.getElementById('global-error-banner');
            if (banner) {
                banner.classList.remove('hidden');
                // Use setTimeout to ensure the element is visible before animating
                setTimeout(() => {
                    banner.classList.add('show');
                }, 10);
                
                // Scroll to the banner smoothly
                banner.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }
        }
        
        function hideGlobalErrorBanner() {
            const banner = document.getElementById('global-error-banner');
            if (banner) {
                banner.classList.remove('show');
                setTimeout(() => {
                    banner.classList.add('hidden');
                }, 300);
            }
        }
        
        // Handle category change
        function handleCategoryChange() {
            const selectedCategory = this.value;
            const subcategoryGroup = document.getElementById('request-subcategory-group');
            const subcategoryOptions = document.getElementById('request-subcategory-options');
            
            // Clear subcategory options
            subcategoryOptions.innerHTML = '';
            
            // Clear any existing subcategory errors
            clearFieldError('request-subcategory');
            
            if (selectedCategory && subcategories[selectedCategory]) {
                // Add subcategory options as checkboxes
                subcategories[selectedCategory].forEach(sub => {
                    const checkboxDiv = document.createElement('div');
                    checkboxDiv.className = 'flex items-center';
                    checkboxDiv.innerHTML = `
                        <input type="checkbox" 
                               id="sub-${sub.value}" 
                               value="${sub.value}" 
                               class="w-4 h-4 text-yellow-600 bg-gray-100 border-gray-300 rounded focus:ring-yellow-500 focus:ring-2">
                        <label for="sub-${sub.value}" class="mr-2 text-sm text-gray-700 cursor-pointer">
                            ${sub.label}
                        </label>
                    `;
                    subcategoryOptions.appendChild(checkboxDiv);
                });
                
                // Show subcategory group
                subcategoryGroup.style.display = 'block';
            } else {
                // Hide subcategory group
                subcategoryGroup.style.display = 'none';
            }
        }
        
        // Subcategory definitions - Updated to match category page filters
        const subcategories = {
            'koshat': [
                { value: 'koshat-wedding', label: 'ÙƒÙˆØ´Ø§Øª Ø²ÙØ§Ù' },
                { value: 'koshat-engagement', label: 'ÙƒÙˆØ´Ø§Øª Ø®Ø·ÙˆØ¨Ø©' }
            ],
            'mirr': [
                { value: 'mirror-wedding', label: 'Ù…Ø±Ø¢Ø© Ø²ÙØ§Ù' },
                { value: 'mirror-engagement', label: 'Ù…Ø±Ø¢Ø© Ø®Ø·ÙˆØ¨Ø©' },
                { value: 'mirror-decorative', label: 'Ù…Ø±Ø¢Ø© Ø¯ÙŠÙƒÙˆØ±' }
            ],
            'cake': [
                { value: 'cake-wedding', label: 'ØªÙˆØ±ØªØ© Ø²ÙØ§Ù' },
                { value: 'cake-engagement', label: 'ØªÙˆØ±ØªØ© Ø®Ø·ÙˆØ¨Ø©' },
                { value: 'cake-birthday', label: 'ØªÙˆØ±ØªØ© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯' },
                { value: 'cake-chocolate', label: 'ØªÙˆØ±ØªØ© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©' },
                { value: 'cake-fruit', label: 'ØªÙˆØ±ØªØ© ÙÙˆØ§ÙƒÙ‡' },
                { value: 'cake-chocolate-tray', label: 'ØµÙŠÙ†ÙŠØ© Ø´ÙƒÙˆÙ„Ø§ØªØ§Øª' }
            ],
            'other': [
                { value: 'other-birthday', label: 'Ø¯ÙŠÙƒÙˆØ± Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯' },
                { value: 'other-hospital', label: 'Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù…ÙˆÙ„ÙˆØ¯ Ø¨Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰' },
                { value: 'other-bride', label: 'Ø¯ÙŠÙƒÙˆØ± Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¹Ø±ÙˆØ³Ø©' },
                { value: 'other-party', label: 'Ø¯ÙŠÙƒÙˆØ± Ø­ÙÙ„Ø§Øª Ø¨Ø³ÙŠØ·Ø©' }
            ],
            'invitations': [
                { value: 'invitation-wedding', label: 'Ø¯Ø¹ÙˆØ© Ø²ÙØ§Ù' },
                { value: 'invitation-engagement', label: 'Ø¯Ø¹ÙˆØ© Ø®Ø·ÙˆØ¨Ø©' },
                { value: 'invitation-chocolate', label: 'ØªÙˆØ²ÙŠØ¹Ø§Øª Ø¨Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©' },
                { value: 'invitation-perfumed', label: 'ØªÙˆØ²ÙŠØ¹Ø§Øª Ø¨Ø§Ù„Ø¨Ø±ÙØ§Ù†' },
                { value: 'invitation-gift', label: 'ØªÙˆØ²ÙŠØ¹Ø§Øª Ù…Ø¹ Ù‡Ø¯ÙŠØ© ØµØºÙŠØ±Ø©' },
                { value: 'invitation-digital', label: 'Ø¯Ø¹ÙˆØ© Ø±Ù‚Ù…ÙŠØ©' },
                { value: 'invitation-innovative', label: 'Ø¯Ø¹ÙˆØ© Ù…Ø¨ØªÙƒØ±Ø©' }
            ]
        };
        

        
        // Setup Global Error Banner Event Listeners
        function setupGlobalErrorBanner() {
            // Close button event listener
            const closeBtn = document.getElementById('close-error-banner');
            if (closeBtn) {
                closeBtn.addEventListener('click', hideGlobalErrorBanner);
            }
        }
        
        // Setup Advanced Governorate Filter
        function setupAdvancedGovernorateFilter() {
            console.log('ğŸ” setupAdvancedGovernorateFilter called');
            console.log('ğŸ” Stack trace:', new Error().stack);
            
            const dropdownBtn = document.getElementById('request-governorate-dropdown-btn');
            const dropdownContent = document.getElementById('request-governorate-dropdown-content');
            const checkboxes = document.querySelectorAll('.governorate-checkbox');
            const selectAllBtn = document.getElementById('request-select-all-governorates');
            const clearAllBtn = document.getElementById('request-clear-all-governorates');
            const selectedContainer = document.getElementById('request-selected-governorates');

            console.log('ğŸ” Setting up Advanced Governorate Filter...');
            console.log('ğŸ“± Elements found:', {
                dropdownBtn: !!dropdownBtn,
                dropdownBtnId: dropdownBtn?.id,
                dropdownContent: !!dropdownContent,
                dropdownContentId: dropdownContent?.id,
                checkboxes: checkboxes.length,
                selectAllBtn: !!selectAllBtn,
                clearAllBtn: !!clearAllBtn,
                selectedContainer: !!selectedContainer
            });

            // Toggle dropdown
            dropdownBtn.addEventListener('click', function() {
                dropdownContent.classList.toggle('hidden');
                dropdownBtn.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!dropdownBtn.contains(event.target) && !dropdownContent.contains(event.target)) {
                    dropdownContent.classList.add('hidden');
                    dropdownBtn.classList.remove('active');
                }
            });
            
            // Hover event removed - no validation needed

            // Handle checkbox changes
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateSelectedGovernorates();
                    updatePlaceholder();
                    updateCitiesFilter(currentGovernorates);
                });
            });

            // Select all
            selectAllBtn.addEventListener('click', function() {
                checkboxes.forEach(checkbox => {
                    checkbox.checked = true;
                });
                updateSelectedGovernorates();
                updatePlaceholder();
                updateCitiesFilter(currentGovernorates);
            });

            // Clear all
            clearAllBtn.addEventListener('click', function() {
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
                updateSelectedGovernorates();
                updatePlaceholder();
                updateCitiesFilter(currentGovernorates);
            });

            function updateSelectedGovernorates() {
                const selected = [];
                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        selected.push(checkbox.value);
                    }
                });
                currentGovernorates = selected;
                displaySelectedGovernorates();
                
                // Clear governorate error if governorates are selected
                if (selected.length > 0) {
                    clearFieldError('request-governorate');
                }
            }

            function updatePlaceholder() {
                const placeholder = document.getElementById('request-governorate-placeholder');
                if (currentGovernorates.length === 0) {
                    placeholder.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª';
                } else if (currentGovernorates.length === 1) {
                    placeholder.textContent = currentGovernorates[0];
                } else {
                    placeholder.textContent = `${currentGovernorates.length} Ù…Ø­Ø§ÙØ¸Ø© Ù…Ø®ØªØ§Ø±Ø©`;
                }
            }

            function displaySelectedGovernorates() {
                if (currentGovernorates.length === 0) {
                    selectedContainer.innerHTML = '';
                    return;
                }

                selectedContainer.innerHTML = currentGovernorates.map(gov => `
                    <div class="selected-governorate-tag">
                        ${gov}
                        <button class="remove-governorate" onclick="removeRequestGovernorate('${gov}')">Ã—</button>
                    </div>
                `).join('');
            }
        }

        // Remove specific governorate from request form
        function removeRequestGovernorate(governorate) {
            const checkbox = document.querySelector(`.governorate-checkbox[value="${governorate}"]`);
            if (checkbox) {
                checkbox.checked = false;
                currentGovernorates = currentGovernorates.filter(g => g !== governorate);
                
                const placeholder = document.getElementById('request-governorate-placeholder');
                placeholder.textContent = currentGovernorates.length === 0 ? 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª' : 
                    currentGovernorates.length === 1 ? currentGovernorates[0] :
                    `${currentGovernorates.length} Ù…Ø­Ø§ÙØ¸Ø© Ù…Ø®ØªØ§Ø±Ø©`;
                
                displaySelectedGovernorates();
                updateCitiesFilter(currentGovernorates);
            }
        }

        // Initialize Cities Filter
        function initializeCitiesFilter() {
            try {
                // Wait for CitiesService to be available
                if (typeof CitiesService === 'undefined') {
                    console.log('â³ Waiting for CitiesService to load...');
                    setTimeout(() => initializeCitiesFilter(), 100);
                    return;
                }
                
                // Initialize CitiesService
                citiesService = new CitiesService();
                console.log('âœ… CitiesService initialized successfully');
                
                // Setup cities filter functionality
                setupCitiesFilter();
            } catch (error) {
                console.error('âŒ Error initializing CitiesService:', error);
                // Retry after a delay
                setTimeout(() => initializeCitiesFilter(), 500);
            }
        }
        
        // Setup Cities Filter
        function setupCitiesFilter() {
            const citiesTrigger = document.getElementById('request-cities-trigger');
            const citiesDropdown = document.getElementById('request-cities-dropdown');
            const citiesSearch = document.getElementById('request-cities-search');
            const selectAllCitiesBtn = document.getElementById('request-select-all-cities-btn');
            const clearAllCitiesBtn = document.getElementById('request-clear-all-cities-btn');
            const applyCitiesFilterBtn = document.getElementById('request-apply-cities-filter');

            // Toggle dropdown
            citiesTrigger.addEventListener('click', function() {
                citiesDropdown.classList.toggle('show');
                citiesTrigger.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!citiesTrigger.contains(event.target) && !citiesDropdown.contains(event.target)) {
                    citiesDropdown.classList.remove('show');
                    citiesTrigger.classList.remove('active');
                }
            });

            // Search functionality
            citiesSearch.addEventListener('input', function() {
                filterCities(this.value);
            });

            // Select all cities
            selectAllCitiesBtn.addEventListener('click', function() {
                const checkboxes = document.querySelectorAll('.city-input');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = true;
                    selectedCities.add(checkbox.value);
                });
                updateCitiesDisplay();
            });

            // Clear all cities
            clearAllCitiesBtn.addEventListener('click', function() {
                const checkboxes = document.querySelectorAll('.city-input');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
                selectedCities.clear();
                updateCitiesDisplay();
            });

            // Apply filter
            applyCitiesFilterBtn.addEventListener('click', function() {
                citiesDropdown.classList.remove('show');
                citiesTrigger.classList.remove('active');
            });
        }
        

        
        // Update Cities Filter based on selected governorates
        function updateCitiesFilter(selectedGovernorates) {
            console.log('ğŸ”„ Updating Cities Filter for governorates:', selectedGovernorates);
            
            const citiesGroup = document.getElementById('request-cities-group');
            const citiesList = document.getElementById('request-cities-list');
            const citiesTrigger = document.getElementById('request-cities-trigger');
            const citiesSearch = document.getElementById('request-cities-search');

            if (selectedGovernorates.length === 0) {
                // Hide cities filter if no governorates selected
                citiesGroup.style.display = 'none';
                selectedCities.clear();
                updateCitiesDisplay();
                return;
            }

            // Show cities filter
            citiesGroup.style.display = 'block';

            // Check if citiesService is available
            if (!citiesService) {
                console.error('âŒ CitiesService not available');
                console.log('ğŸ” Current citiesService:', citiesService);
                console.log('ğŸ” Window CitiesService:', typeof window.CitiesService);
                return;
            }

            // Get all cities for selected governorates
            let allCities = [];
            selectedGovernorates.forEach(governorate => {
                try {
                    const cities = citiesService.getCitiesForGovernorate(governorate);
                    if (cities && cities.length > 0) {
                        allCities = allCities.concat(cities);
                    }
                } catch (error) {
                    console.error(`Error getting cities for ${governorate}:`, error);
                }
            });

            // Remove duplicates
            allCities = [...new Set(allCities)];

            console.log('Available cities for selected governorates:', allCities);

            // Populate cities list
            citiesList.innerHTML = allCities.map(city => `
                <div class="city-item">
                    <label class="city-checkbox">
                        <input type="checkbox" value="${city}" class="city-input">
                        <span class="city-name">${city}</span>
                    </label>
                </div>
            `).join('');

            // Add event listeners to new checkboxes
            const cityCheckboxes = document.querySelectorAll('.city-input');
            cityCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        selectedCities.add(this.value);
                    } else {
                        selectedCities.delete(this.value);
                    }
                    updateCitiesDisplay();
                });
            });

            // Clear search
            citiesSearch.value = '';
            
            // Update display
            updateCitiesDisplay();
        }
        
        // Filter cities based on search term
        function filterCities(searchTerm) {
            const cityItems = document.querySelectorAll('.city-item');
            
            cityItems.forEach(item => {
                const cityName = item.querySelector('.city-name').textContent.toLowerCase();
                const matches = cityName.includes(searchTerm.toLowerCase());
                item.style.display = matches ? 'block' : 'none';
            });
        }
        
        // Update cities display
        function updateCitiesDisplay() {
            const selectedCount = document.getElementById('request-cities-selected-count');
            const selectedCitiesContainer = document.getElementById('request-selected-cities');
            const triggerText = document.querySelector('#request-cities-trigger .trigger-text');

            // Update count
            if (selectedCities.size === 0) {
                selectedCount.style.display = 'none';
                triggerText.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø§Ø·Ù‚/Ø§Ù„Ù…Ø¯Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)';
            } else {
                selectedCount.style.display = 'inline-block';
                selectedCount.textContent = selectedCities.size;
                triggerText.textContent = `${selectedCities.size} Ù…Ù†Ø·Ù‚Ø© Ù…Ø®ØªØ§Ø±Ø©`;
            }

            // Update selected cities tags
            if (selectedCities.size === 0) {
                selectedCitiesContainer.innerHTML = '';
            } else {
                selectedCitiesContainer.innerHTML = Array.from(selectedCities).map(city => `
                    <div class="selected-city-tag">
                        ${city}
                        <button class="remove-city" onclick="removeCity('${city}')">Ã—</button>
                    </div>
                `).join('');
            }
        }
        
        // Remove specific city
        function removeCity(city) {
            selectedCities.delete(city);
            
            // Uncheck the corresponding checkbox
            const checkbox = document.querySelector(`.city-input[value="${city}"]`);
            if (checkbox) {
                checkbox.checked = false;
            }
            
            updateCitiesDisplay();
        }
        
        // Get selected cities for form submission
        function getSelectedCities() {
            return Array.from(selectedCities);
        }
        
        // Setup image upload
        function setupImageUpload() {
            const uploadArea = document.getElementById('request-upload-area');
            const imageUpload = document.getElementById('request-image-upload');
            const imagePreview = document.getElementById('request-image-preview');
            
            // Initialize image counter
            updateImageCounter();
            
            // Click to upload
            uploadArea.addEventListener('click', () => {
                // Check if already at limit
                if (uploadedImages.length >= 3) {
                    showNotification('ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ 3 ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰ ÙÙ‚Ø·', 'error');
                    return;
                }
                imageUpload.click();
            });
            
            // Drag and drop functionality
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                // Check if adding files would exceed limit
                if (uploadedImages.length >= 3) {
                    showNotification('ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ 3 ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰ ÙÙ‚Ø·', 'error');
                    return;
                }
                
                const files = e.dataTransfer.files;
                handleImageFiles(files);
            });
            
            // File input change
            imageUpload.addEventListener('change', (e) => {
                handleImageFiles(e.target.files);
                // Clear input to allow selecting same file again
                e.target.value = '';
            });
        }
        
        // Handle image files
        function handleImageFiles(files) {
            // Check if adding these files would exceed the limit
            const currentCount = uploadedImages.length;
            const newFiles = Array.from(files).filter(file => file.type.startsWith('image/'));
            
            if (currentCount + newFiles.length > 3) {
                showNotification('ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ 3 ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰ ÙÙ‚Ø·', 'error');
                return;
            }
            
            // Process each image file
            newFiles.forEach(file => {
                processAndAddImage(file);
            });
        }
        
        // Process image: compress and add preview
        async function processAndAddImage(file) {
            try {
                // Compress image before adding
                const compressedFile = await compressImage(file);
                addImagePreview(compressedFile);
            } catch (error) {
                console.error('Error processing image:', error);
                // Fallback to original file if compression fails
                addImagePreview(file);
            }
        }
        
        // Compress image to reduce quality and size
        async function compressImage(file) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = () => {
                    // Calculate new dimensions (max width: 800px, maintain aspect ratio)
                    const maxWidth = 800;
                    let { width, height } = img;
                    
                    if (width > maxWidth) {
                        height = (height * maxWidth) / width;
                        width = maxWidth;
                    }
                    
                    // Set canvas dimensions
                    canvas.width = width;
                    canvas.height = height;
                    
                    // Draw and compress image
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // Convert to blob with reduced quality (0.7 = 70% quality)
                    canvas.toBlob((blob) => {
                        const compressedFile = new File([blob], file.name, {
                            type: 'image/jpeg',
                            lastModified: Date.now()
                        });
                        resolve(compressedFile);
                    }, 'image/jpeg', 0.7);
                };
                
                img.src = URL.createObjectURL(file);
            });
        }
        
        // Add image preview with drag and drop functionality
        function addImagePreview(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item sortable-image';
                imageItem.draggable = true;
                imageItem.setAttribute('data-index', uploadedImages.length);
                
                // Calculate file size in KB
                const fileSizeKB = (file.size / 1024).toFixed(1);
                
                imageItem.innerHTML = `
                    <div class="image-drag-handle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" />
                        </svg>
                    </div>
                    <img src="${e.target.result}" alt="${file.name}" class="w-full h-32 object-cover rounded-lg">
                    <div class="image-number">${uploadedImages.length + 1}</div>
                    <div class="image-info text-xs text-gray-500 mt-1 text-center">
                        ${fileSizeKB} KB
                    </div>
                    <button type="button" class="image-remove" onclick="removeImage(this)">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                `;
                
                // Add drag and drop event listeners
                imageItem.addEventListener('dragstart', handleDragStart);
                imageItem.addEventListener('dragover', handleDragOver);
                imageItem.addEventListener('drop', handleDrop);
                imageItem.addEventListener('dragenter', handleDragEnter);
                imageItem.addEventListener('dragleave', handleDragLeave);
                
                const imagePreview = document.getElementById('request-image-preview');
                if (imagePreview) {
                    imagePreview.appendChild(imageItem);
                }
                uploadedImages.push({ src: e.target.result, name: file.name, file: file });
                
                // Hide instructions after first image
                const instructions = document.querySelector('.image-sort-instructions');
                if (instructions) {
                    instructions.style.display = 'none';
                }
                
                // Update image counter
                updateImageCounter();
            };
            reader.readAsDataURL(file);
        }
        
        // Drag and drop functions for image sorting
        function handleDragStart(e) {
            draggedElement = this;
            draggedIndex = parseInt(this.getAttribute('data-index'));
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDragEnter(e) {
            e.preventDefault();
            this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            if (draggedElement !== this) {
                const dropIndex = parseInt(this.getAttribute('data-index'));
                
                // Reorder the uploadedImages array
                const draggedImage = uploadedImages[draggedIndex];
                uploadedImages.splice(draggedIndex, 1);
                uploadedImages.splice(dropIndex, 0, draggedImage);
                
                // Reorder the DOM elements
                const imagePreview = document.getElementById('request-image-preview');
                if (imagePreview) {
                    const allImages = Array.from(imagePreview.querySelectorAll('.sortable-image'));
                    const draggedDOM = allImages[draggedIndex];
                    
                    if (draggedIndex < dropIndex) {
                        imagePreview.insertBefore(draggedDOM, allImages[dropIndex].nextSibling);
                    } else {
                        imagePreview.insertBefore(draggedDOM, allImages[dropIndex]);
                    }
                }
                
                // Update order
                updateImageOrder();
                
                // Show success message
                showSortSuccess();
            }
            
            draggedElement.classList.remove('dragging');
            draggedElement = null;
            draggedIndex = null;
        }

        function showSortSuccess() {
            const message = document.createElement('div');
            message.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center';
            message.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
                ØªÙ… ØªØºÙŠÙŠØ± ØªØ±ØªÙŠØ¨ Ø§Ù„ØµÙˆØ± Ø¨Ù†Ø¬Ø§Ø­
            `;
            
            document.body.appendChild(message);
            
            // Remove message after 3 seconds
            setTimeout(() => {
                message.remove();
            }, 3000);
        }

        function updateImageOrder() {
            const imagePreview = document.getElementById('request-image-preview');
            if (!imagePreview) return;
            
            const imageItems = imagePreview.querySelectorAll('.sortable-image');
            imageItems.forEach((item, index) => {
                item.setAttribute('data-index', index);
                const numberElement = item.querySelector('.image-number');
                if (numberElement) {
                    numberElement.textContent = index + 1;
                }
            });
            
            // Update image counter after reordering
            updateImageCounter();
        }
        
        // Remove image
        function removeImage(button) {
            const imagePreview = document.getElementById('request-image-preview');
            if (!imagePreview) return;
            
            const imageItem = button.parentElement;
            const index = Array.from(imagePreview.children).indexOf(imageItem);
            uploadedImages.splice(index, 1);
            imageItem.remove();
            
            // Update image numbers and data-index attributes
            updateImageOrder();
            
            // Update image counter
            updateImageCounter();
            
            // Show instructions if no images left
            if (uploadedImages.length === 0) {
                const instructions = document.querySelector('.image-sort-instructions');
                if (instructions) {
                    instructions.style.display = 'block';
                }
            }
        }
        
        // Update image counter display
        function updateImageCounter() {
            const counter = document.getElementById('image-counter');
            if (counter) {
                counter.textContent = `${uploadedImages.length}/3`;
                
                // Change color based on count
                if (uploadedImages.length >= 3) {
                    counter.classList.add('text-red-500');
                    counter.classList.remove('text-green-500', 'text-yellow-500');
                } else if (uploadedImages.length >= 2) {
                    counter.classList.add('text-yellow-500');
                    counter.classList.remove('text-green-500', 'text-red-500');
                } else {
                    counter.classList.add('text-green-500');
                    counter.classList.remove('text-yellow-500', 'text-red-500');
                }
            }
        }



        // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬
        async function submitProductRequest(e) {
            e.preventDefault();
            
            // Clear all previous errors
            clearAllFieldErrors();
            
            // Validate form before submission
            if (!validateForm()) {
                return; // Stop submission if validation fails
            }
            
            // Check image count
            if (uploadedImages.length === 0) {
                showNotification('ÙŠØ¬Ø¨ Ø±ÙØ¹ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ù…Ù†ØªØ¬', 'error');
                return;
            }
            
            // Get form data after validation
            const description = document.getElementById('request-description').value.trim();
            const price = document.getElementById('request-price').value;
            const category = document.getElementById('request-category').value;
            
            // Get selected subcategories
            const selectedSubcategories = [];
            const subcategoryCheckboxes = document.querySelectorAll('#request-subcategory-options input[type="checkbox"]:checked');
            subcategoryCheckboxes.forEach(checkbox => {
                selectedSubcategories.push(checkbox.value);
            });
            
            const selectedGovernorates = currentGovernorates;
            const whatsapp = document.getElementById('request-whatsapp').value;
            const facebook = document.getElementById('request-facebook').value;
            const instagram = document.getElementById('request-instagram').value;
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            showLoading(submitBtn);
            
            try {
                // Get selected cities
                const selectedCitiesArray = getSelectedCities();
                
                // Prepare request data
                const requestData = {
                    description: description,
                    price: price || null,
                    category: category,
                    subcategory: selectedSubcategories.length > 0 ? selectedSubcategories : null,
                    governorate: selectedGovernorates.join(', '),
                    cities: selectedCitiesArray.length > 0 ? selectedCitiesArray.join(', ') : null,
                    whatsapp: whatsapp,
                    facebook: facebook || null,
                    instagram: instagram || null
                };
                
                // Convert uploaded images to File objects
                const imageFiles = [];
                for (let i = 0; i < uploadedImages.length; i++) {
                    if (uploadedImages[i].file) {
                        imageFiles.push(uploadedImages[i].file);
                    } else {
                        // Convert data URL to File object
                        const response = await fetch(uploadedImages[i].src);
                        const blob = await response.blob();
                        const file = new File([blob], uploadedImages[i].name, { type: blob.type });
                        imageFiles.push(file);
                    }
                }
                
                // Submit request
                const productRequestsService = new ProductRequestsService();
                const result = await productRequestsService.submitProductRequest(requestData, imageFiles);
                
                if (result.success) {
                    // Show success message
                    showSuccessMessage('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†Ù‚ÙˆÙ… Ø¨Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ ÙˆØ¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
                    
                    // Clear form
                    e.target.reset();
                    uploadedImages.length = 0;
                    const imagePreview = document.getElementById('request-image-preview');
                    imagePreview.innerHTML = '';
                    
                    // Clear cities filter
                    selectedCities.clear();
                    updateCitiesDisplay();
                    
                    // Hide subcategory group
                    document.getElementById('request-subcategory-group').style.display = 'none';
                    document.getElementById('request-cities-group').style.display = 'none';
                    
                    // Show instructions again
                    const instructions = document.createElement('div');
                    instructions.className = 'image-sort-instructions mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg col-span-2 md:col-span-4';
                    instructions.innerHTML = `
                        <div class="flex items-center text-blue-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4" />
                            </svg>
                            <span class="text-sm font-medium">Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ù„ØªØ±ØªÙŠØ¨Ù‡Ø§ - Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø³ØªÙƒÙˆÙ† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                        </div>
                    `;
                    imagePreview.appendChild(instructions);
                    
                    // Reset governorate selection
                    currentGovernorates = [];
                    // Reset governorate dropdown
                    const governorateCheckboxes = document.querySelectorAll('.governorate-checkbox');
                    governorateCheckboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    
                    // Update placeholder
                    const placeholder = document.getElementById('request-governorate-placeholder');
                    if (placeholder) {
                        placeholder.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª';
                    }
                    
                    // Clear selected governorates display
                    const selectedContainer = document.getElementById('request-selected-governorates');
                    if (selectedContainer) {
                        selectedContainer.innerHTML = '';
                    }
                    
                    // Refresh the page after successful submission
                    setTimeout(() => {
                        location.reload();
                    }, 2000); // Ø§Ù†ØªØ¸Ø§Ø± Ø«Ø§Ù†ÙŠØªÙŠÙ† Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                } else {
                    submitBtn.innerHTML = originalText;
                    showErrorMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            } catch (error) {
                submitBtn.innerHTML = originalText;
                showErrorMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                console.error('Error:', error);
            }
        }
        
                // Form validation function
        function validateForm() {
            let isValid = true;
            
            // Validate description
            const description = document.getElementById('request-description').value.trim();
            if (!description) {
                showFieldError('request-description', 'Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨');
                isValid = false;
            }
            
            // Validate category
            const category = document.getElementById('request-category').value;
            if (!category) {
                showFieldError('request-category', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ');
                isValid = false;
            }
            
            // Validate subcategory (only if category is selected)
            if (category) {
                const subcategoryCheckboxes = document.querySelectorAll('#request-subcategory-options input[type="checkbox"]:checked');
                if (subcategoryCheckboxes.length === 0) {
                    showFieldError('request-subcategory', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ');
                    isValid = false;
                }
            }
            
            // Validate governorate
            if (currentGovernorates.length === 0) {
                showFieldError('request-governorate', 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§ÙØ¸Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                isValid = false;
            }
            
            // Validate social media - at least one must be filled
            const whatsapp = document.getElementById('request-whatsapp').value.trim();
            const facebook = document.getElementById('request-facebook').value.trim();
            const instagram = document.getElementById('request-instagram').value.trim();
            
            if (!whatsapp && !facebook && !instagram) {
                showFieldError('social-media', 'ÙŠØ¬Ø¨ Ù…Ù„Ø¡ Ø­Ù‚Ù„ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ù† ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ');
                isValid = false;
            } else {
                // Clear social media error if at least one is filled
                clearFieldError('social-media');
            }
            
            // Validate individual social media fields if they are filled
            if (whatsapp && !isValidWhatsAppNumber(whatsapp)) {
                showFieldError('request-whatsapp', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ØµØ­ÙŠØ­');
                isValid = false;
            }
            
            if (facebook && !isValidFacebookUrl(facebook)) {
                showFieldError('request-facebook', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· ÙÙŠØ³Ø¨ÙˆÙƒ ØµØ­ÙŠØ­ (ÙŠÙ‚Ø¨Ù„ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·: ØµÙØ­Ø§ØªØŒ Ù…Ø¬Ù…ÙˆØ¹Ø§ØªØŒ Ø£Ø­Ø¯Ø§Ø«ØŒ Ù…Ù†Ø´ÙˆØ±Ø§ØªØŒ ØµÙˆØ±ØŒ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŒ hashtagsØŒ Ø±ÙˆØ§Ø¨Ø· Ù‚ØµÙŠØ±Ø©)');
                isValid = false;
            }
            
            if (instagram && !isValidInstagramUsername(instagram)) {
                showFieldError('request-instagram', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù… ØµØ­ÙŠØ­');
                isValid = false;
            }
            
            // Show global error banner if validation fails
            if (!isValid) {
                showGlobalErrorBanner();
            } else {
                hideGlobalErrorBanner();
            }
            
            return isValid;
        }
        
        // Validate WhatsApp number format
        function isValidWhatsAppNumber(phone) {
            // Remove all non-digit characters
            const cleanPhone = phone.replace(/\D/g, '');
            
            // Check if it's a valid Egyptian phone number
            // Egyptian numbers start with 01 and are 11 digits long
            if (cleanPhone.length === 11 && cleanPhone.startsWith('01')) {
                return true;
            }
            
            // Check if it's a valid international format
            if (cleanPhone.length === 12 && cleanPhone.startsWith('20')) {
                return true;
            }
            
            // Check if it's a valid international format with +
            if (phone.startsWith('+') && (cleanPhone.length === 12 || cleanPhone.length === 11)) {
                return true;
            }
            
            return false;
        }
        
        // Validate Facebook URL format - ÙŠÙ‚Ø¨Ù„ Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙÙŠØ³ Ø¨ÙˆÙƒ
        function isValidFacebookUrl(url) {
            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† Ø§Ù„Ù…Ø³Ø§ÙØ§Øª
            url = url.trim();
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙØ§Ø±ØºØ§Ù‹ØŒ ÙŠØ¹ØªØ¨Ø± ØµØ­ÙŠØ­Ø§Ù‹ (Ø­Ù‚Ù„ Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            if (!url) {
                return true;
            }
            
            // Ù†Ù…Ø· Ù…Ø¨Ø³Ø· ÙˆØ´Ø§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø±ÙˆØ§Ø¨Ø· ÙÙŠØ³Ø¨ÙˆÙƒ
            // ÙŠÙ‚Ø¨Ù„ Ø£ÙŠ Ø±Ø§Ø¨Ø· ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ facebook.com Ø£Ùˆ fb.me
            const facebookRegex = /^https?:\/\/(www\.)?(facebook\.com|fb\.me)\/.+/;
            
            return facebookRegex.test(url);
        }
        
        // Validate Instagram username format
        function isValidInstagramUsername(username) {
            const instagramRegex = /^[a-zA-Z0-9._]{1,30}$/;
            return instagramRegex.test(username);
        }
        
        // Show field error
        function showFieldError(fieldId, message) {
            const errorElement = document.getElementById(`${fieldId}-error`);
            let fieldElement = document.getElementById(fieldId);
            
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
                errorElement.classList.add('show');
                
                // Add error styling to field
                if (fieldElement) {
                    fieldElement.classList.add('field-error');
                }
                
                // Special handling for governorate and subcategory
                if (fieldId === 'request-governorate') {
                    const dropdownBtn = document.getElementById('request-governorate-dropdown-btn');
                    if (dropdownBtn) {
                        dropdownBtn.classList.add('field-error');
                        // Also add error styling to the entire governorate section
                        const governorateSection = dropdownBtn.closest('.simple-governorate-filter');
                        if (governorateSection) {
                            governorateSection.classList.add('field-error');
                        }
                    }
                } else if (fieldId === 'request-subcategory') {
                    const subcategoryGroup = document.getElementById('request-subcategory-group');
                    if (subcategoryGroup) {
                        subcategoryGroup.classList.add('field-error');
                        // Add error styling to the subcategory options container
                        const subcategoryOptions = document.getElementById('request-subcategory-options');
                        if (subcategoryOptions) {
                            subcategoryOptions.classList.add('field-error');
                        }
                    }
                }
            }
        }
        
        // Clear field error
        function clearFieldError(fieldId) {
            const errorElement = document.getElementById(`${fieldId}-error`);
            let fieldElement = document.getElementById(fieldId);
            
            if (errorElement) {
                errorElement.classList.add('hidden');
                errorElement.classList.remove('show');
                
                // Remove error styling from field
                if (fieldElement) {
                    fieldElement.classList.remove('field-error');
                }
                
                // Special handling for governorate and subcategory
                if (fieldId === 'request-governorate') {
                    const dropdownBtn = document.getElementById('request-governorate-dropdown-btn');
                    if (dropdownBtn) {
                        dropdownBtn.classList.remove('field-error');
                        // Also remove error styling from the entire governorate section
                        const governorateSection = dropdownBtn.closest('.simple-governorate-filter');
                        if (governorateSection) {
                            governorateSection.classList.remove('field-error');
                        }
                    }
                } else if (fieldId === 'request-subcategory') {
                    const subcategoryGroup = document.getElementById('request-subcategory-group');
                    if (subcategoryGroup) {
                        subcategoryGroup.classList.remove('field-error');
                        // Remove error styling from the subcategory options container
                        const subcategoryOptions = document.getElementById('request-subcategory-options');
                        if (subcategoryOptions) {
                            subcategoryOptions.classList.remove('field-error');
                        }
                    }
                }
            }
        }
        
        // Clear all field errors
        function clearAllFieldErrors() {
            const errorElements = document.querySelectorAll('.validation-error');
            const fieldElements = document.querySelectorAll('.field-error');
            
            errorElements.forEach(element => {
                element.classList.add('hidden');
                element.classList.remove('show');
            });
            
            fieldElements.forEach(element => {
                element.classList.remove('field-error');
            });
            
            // Also clear any special error styling
            const governorateSection = document.querySelector('.simple-governorate-filter.field-error');
            if (governorateSection) {
                governorateSection.classList.remove('field-error');
            }
            
            const subcategoryGroup = document.getElementById('request-subcategory-group');
            if (subcategoryGroup && subcategoryGroup.classList.contains('field-error')) {
                subcategoryGroup.classList.remove('field-error');
            }
            
            const subcategoryOptions = document.getElementById('request-subcategory-options');
            if (subcategoryOptions && subcategoryOptions.classList.contains('field-error')) {
                subcategoryOptions.classList.remove('field-error');
            }
        }
        
        // Show loading state
        function showLoading(button) {
            button.innerHTML = `
                <svg class="animate-spin h-5 w-5 inline ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...
            `;
            button.disabled = true;
        }
        
        // Show success message
        function showSuccessMessage(message) {
            // Show success notification
            showNotification(message, 'success');
        }
        
        // Show error message
        function showErrorMessage(message, fieldId = null) {
            if (fieldId) {
                showFieldError(fieldId, message);
            } else {
                showNotification(message, 'error');
            }
        }
    </script>
</body>
</html> 